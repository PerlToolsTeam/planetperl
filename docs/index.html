<!DOCTYPE html>
<html>
  <head>
    <meta property="og:title" content="Planet Perl" /> 
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://perl.theplanetarium.org/" />
    <meta property="og:image" content="https://perl.theplanetarium.org/planet-perl.jpg" />
    <meta property="og:description" content="Collecting the best Perl web feeds"/>
    <title>Planet Perl</title>
    <meta charset="UTF-8">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
          crossorigin="anonymous">

    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://perl.theplanetarium.org/atom.xml" />
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <nav class="navbar fixed-top navbar-dark bg-dark">
      <a class="navbar-brand" href="#">Planet Perl</a>
    </nav>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 left">
          <p>Text: <a href="#" id="show">show</a> / <a href="#" id="hide">hide</a></p>
          <h2>Sources</h2>
          <ul>
            <li><a href="http://blogs.perl.org/">blogs.perl.org</a></li>
            <li><a href="https://dev.to/t/perl">dev.to #perl</a></li>
            <li><a href="https://domm.plix.at/perl.html">domm (Perl and other tech)</a></li>
            <li><a href="https://metacpan.org/news">MetaCPAN News</a></li>
            <li><a href="https://niceperl.blogspot.com/">Niceperl</a></li>
            <li><a href="https://nxadm.wordpress.com/tag/perl/">nxadm</a></li>
            <li><a href="https://news.perlfoundation.org/">Perl Foundation News</a></li>
            <li><a href="https://perlhacks.com/">Perl Hacks</a></li>
            <li><a href="https://perlmaven.com/">Perl Maven</a></li>
            <li><a href="https://perlweekly.com/">Perl Weekly</a></li>
            <li><a href="https://blog.perl-academy.de/">Perl-Academy.de</a></li>
            <li><a href="https://perl.com/">perl.com</a></li>
            <li><a href="https://perlancar.wordpress.com/">Perlancar</a></li>
            <li><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl">RabbitFarm Perl</a></li>
            <li><a href="https://log.perl.org/">The Perl NOC</a></li>
          </ul>
          <p><a href="/atom.xml"><img alt="Feed" src="/images/feed.gif" /> Subscribe</a>
          <br />
          <a href="/opml.xml"><img alt="OPML" src="/images/opml.png" /> OPML</a></p>
          <p>
            <ul>
              <li>Powered by <a href="https://metacpan.org/release/Perlanet">Perlanet</a></li>
              <li>Code on <a href="https://github.com/davorg/planetperl">Github</a></li>
              <li><a href="https://github.com/davorg/planetperl/issues">Feedback welcome</a></li>
            </ul>
          </p>
        </div><!-- col-md-2 -->
        <div class="col-md-8">
          <div class="card" id="card_1">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-5---32bit---64bit-perls-storable.html">Developing A Game Engine with Perl: Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable </a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Thursday 02 December 2021 08:42</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <div><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">If you haven't heard already...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></div><div><strong><br /></strong></div><div class="crayons-article__main"><div class="crayons-article__body text-styles spec__body" data-article-id="913844" id="article-body">

<p>If you want to start reading from the beginning. Check out the <a href="http://blogs.perl.org/users/shawn1/2021/11/developing-a-game-engine-with-perl.html">first article in this series</a></p>

<p>Continuing on with the <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">last article</a> let's talk about changing system architecture and how that can affect Perl code, specifically <a href="https://perldoc.perl.org/Storable">Storable</a>.</p>

<ul><li>Mouse Input Support</li><li>Hardware Failure</li><li>Server Upgrade</li><li>UEFI vs OpenSuSE Installer</li><li><strong>32bit -&gt; 64bit &amp; Perl's Storable</strong></li></ul>

<p>After the old server had <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-3---hardware-failure-server-upgrade.html">HDD failures</a> and finally <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">managing to upgrade</a>
 to the new server, I eagerly began getting all the services and 
software installed to test the engine on new hardware. I was quickly 
meet with an error I have never seen before.</p>

<p><code>Byte order is not compatible at /usr/lib/perl5/5.34.0/x86_64-linux-thread-multi/Storable.pm</code></p>

<p>After doing some quick reading, I came to understand that Perl uses 
architecture specific ways to save content to files when using Storable.
 Specifically if you use <code>lock_store</code> and <code>store</code>. These are part of Perl's core system and what I use throughout the engine for working with the file structure.</p>

<p>I had to carefully re-read the perldoc's to discover that you can avoid architecture incompatibility by simply using <code>nstore</code> and <code>lock_nstore</code> The method you use for retrieving the stored files doesn't matter, only when storing the data into files does it matter.</p>

<p>I tried to find ways of being able to convert the stored files from 
32bit architecture to 64bit, but ultimately the only real option was to 
use the old server to re-store the files with lock_nstore.</p>

<p>Luckily the old PC was still working, and I was able to modify the 
code and re-store all the files. The change and usage was simple:</p>

<p>I had to change my use statement from:<br />
<code>use Storable qw(lock_store lock_retrieve);</code><br />
to<br />
<code>use Storable qw(lock_nstore lock_retrieve)</code></p>

<p>And to re-store I changed my code from this:<br />
<code>lock_store($data_ref, $dir_location);</code><br />
to<br />
<code>lock_nstore($data_ref, $dir_location);</code></p>

<p>Have you ever had to write code for architecture compatibility? Or 
fix code migrated from one architecture to another? What do you prefer 
for storing data to files in Perl?</p>

<p>If you have any suggestions or comments please share constructively. 
Also please visit our social media pages for lots of fun videos and 
pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br />
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">Prev &lt;&lt; Part 4 - UEFI vs OpenSuSE Installer</a><br />
<a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-6---a-colourful-telnet-server.html">Next &gt;&gt; Part 6 - A Colourful Telnet Server</a></p>

<p>Cheers!<br />
Shawn</p>


          </div>

        </div>
        
           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_2">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-6---a-colourful-telnet-server.html">Developing A Game Engine with Perl: Part 6 - A Colourful Telnet Server</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Friday 03 December 2021 06:25</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">I'll stop reminding you that...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>If you want to start reading from the beginning. Check out the <a href="http://blogs.perl.org/users/shawn1/2021/11/developing-a-game-engine-with-perl.html">first article in this series</a></p>

<h2>
  What is ANSI Game Engine?
</h2>

<p>Well, at it's core, <a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine</a> is a very colourful and interactive telnet server.</p>

<p><strong>Why telnet!?</strong></p>

<p>I know, right!? I still ask myself the same question today, but at 
this point, I'm kinda committed. Initially, it all came down to my 
decision <strong>NOT</strong> to code the client side. I looked into it,
 and it just wasn't something I wanted to do. And honestly, it seemed 
too far outside my comfort level with Perl. I feel much more 
comfortable, and interested in, working with server side code, as may be
 true for other Perl dev's out there. That's where <a href="https://www.perl.org/">Perl</a> is quite prolific. Since I was going with <a href="https://en.wikipedia.org/wiki/ANSI_art">ANSI graphics</a>, they are best known these days, for me at least, to be used in telnet/terminal clients and <a href="https://en.wikipedia.org/wiki/Bulletin_board_system">BBS's</a>, which are mainly telnet based now. This being said, it wasn't long searching google before I came across SyncTERM. <a href="https://syncterm.bbsdev.net/">SyncTERM</a>
 is, in my opinion, the best available choice for cross-platform 
rendering of ANSI graphics over telnet. I've tried many different 
clients, on Mac, Windows, and Linux. SyncTERM works the most consistent 
across these platforms, it's been around for a long time and is still 
actively being developed. So telnet it is!</p>

<p><strong>Telnet.... Fork me...</strong></p>

<p>The engine has to be multiplayer. Depending on the specific game 
requirements, this does not necessarily mean players interacting with 
each other, but at least having multiple players connected at the same 
time to the same server. This is a minimum initial requirement. To me, 
this is a great opportunity to work with <a href="http://man.he.net/man2/fork">Fork</a>.
 I really like the idea of creating multiple processes with fork that 
can interact with each other. This is an area I have little experience 
with and a great opportunity to learn.</p>

<p><strong>Have you heard of Perl's CPAN?</strong></p>

<p>If you are a Perl dev, obviously yes. If you code in another language, perhaps you've heard of it. <a href="https://www.cpan.org/">Comprehensive Perl Archive Network</a>,
 or CPAN, is Perl's repository of code modules. If you want to do 
something, chances are someone has already made a module for that. As of
 writing this article, CPAN currently has 208,034 Perl modules written 
by 14,179 authors. It's absolutely amazing!</p>

<p>This is where I found the modules to develop a telnet server. A 
forking telnet server, can you believe it? Fork yah! Okokok.... I'll 
stop making that joke, I promise!</p>

<p><strong>Let's get to coding!</strong></p>

<p>The first step was to get a telnet server that could accept multiple 
simultaneous connections. I read up on how to make a telnet server with 
Perl and from that reading I quickly learned about <a href="https://metacpan.org/pod/IO::Socket::INET">IO::Socket::INET</a>. It wasn't long after I had working code for a telnet server!<br />
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>use strict;
use warnings;
use IO::Socket::INET;
print "\nBEGIN\n";

print "Setting up listen socket\n";
my $socket = new IO::Socket::INET (
    LocalHost =&gt; '192.168.1.15',
    LocalPort =&gt; '27777',
    Proto =&gt; 'tcp',
    Listen =&gt; SOMAXCONN,
    ReuseAddr =&gt; 1
);

my $player_socket;
my $player_data;

print "Waiting for connection ...\n";
while(1) {

    next unless $player_socket = $socket-&gt;accept();
    print "Incomming Connection!\n";

    my $player_address = $player_socket-&gt;peerhost();
    my $player_port    = $player_socket-&gt;peerport();

    my $response = "Player Connection Info: $player_address : $player_port. ";
    print "$response\n";

    $response .= "Press Any Key To Disconnect...\n";
    $player_socket-&gt;send($response);

    print "Waiting for player to press a key and disconnect...\n";
    while ($player_socket-&gt;connected()) {

        $player_socket-&gt;recv($player_data, 1024);
        if ($player_data) {
            print "Player Disconnecting $player_address : $player_port\n";
            $socket-&gt;close();
            print "Player Disconnected\n";
            last;
        }

    }
    last;
}
print "Good Bye!\n";
exit;
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
    </svg></div></div></div><div class="highlight js-code-highlight"><div class="highlight__panel js-actions-panel"><div class="highlight__panel-action js-fullscreen-code-action"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
</svg>

    

</div>
</div>
</div>



<p>Running this code and connecting with SyncTERM shows:<br />
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:~ # perl telnet_server.pl 

BEGIN
Setting up listen socket
Waiting for connection ...
Incomming Connection!
Player Connection Info: 192.168.1.9 : 55414. 
Waiting for player to press a key and disconnect...
Player Disconnecting 192.168.1.9 : 55414
Player Disconnected
Good Bye!

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
    </svg></div></div></div><div class="highlight js-code-highlight"><div class="highlight__panel js-actions-panel"><div class="highlight__panel-action js-fullscreen-code-action"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
</svg>

    

</div>
</div>
</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QEvJGtrE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/th0yb9l6o49xidryn1xg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QEvJGtrE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/th0yb9l6o49xidryn1xg.png" alt="Image description" width="880" height="692" /></a></p>

<p>I read my <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">Linux OpenSuSE</a> server's man page for <a href="https://man7.org/linux/man-pages/man2/listen.2.html">listen(2)</a>, and the best I can understand is that the value for SOMAXCONN in  <a href="https://perldoc.perl.org/IO::Socket#Listen"><code>Listen =&gt; SOMAXCONN</code></a> will allow me to have up to  4096 connections!? I think this is correct. It says the value can be found in <code>/proc/sys/net/core/somaxconn</code> and doing a <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> of that file shows 4096.<br />
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:~ # cat /proc/sys/net/core/somaxconn 
4096

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
    </svg></div></div></div><div class="highlight js-code-highlight"><div class="highlight__panel js-actions-panel"><div class="highlight__panel-action js-fullscreen-code-action"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
</svg>

    

</div>
</div>
</div>



<p><strong>Now we just need to fork!</strong></p>

<p>This process turned out to be a bit more difficult to understand (for
 me) and a few more lines of code then did the telnet portion. I'll pick
 up from here in the next article.</p>

<p>Have you done any telnet programming before? If so, what modules have you found useful? (CPAN or otherwise)</p>

<p>If you have any suggestions or comments please share constructively. 
Also please visit our social media pages for lots of fun videos and 
pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br />
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-5---32bit---64bit-perls-storable.html">Prev &lt;&lt; Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable</a><br />
<strong><em>Next &gt;&gt; Coming Soon</em></strong></p>

<p>Cheers!<br />
Shawn</p>
        
           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_3">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/laurent_r/2021/11/perl-weekly-challenge-140-multiplication-tables.html">Perl Weekly Challenge 140: Multiplication Tables</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by laurent_r
 on Monday 29 November 2021 03:16</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p>These are some answers to the Week 140 of the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-140/">Perl Weekly Challenge</a> organized by <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a>.</p>

<h2>Task 1: Add Binary</h2>

<p>This task was covered in the following blog post: http://blogs.perl.org/users/laurent_r/2021/11/perl-weekly-challenge-140-add-binary.html.</p>

<h2>Task 2: Multiplication Table</h2>

<p><em>You are given 3 positive integers, <code>$i</code>, <code>$j</code> and <code>$k</code>.</em></p>

<p><em>Write a script to print the <code>$kth</code> element in the sorted multiplication table of <code>$i</code> and <code>$j</code>.</em></p>

<p><em>Example 1:</em></p>

<pre><code>Input: $i = 2; $j = 3; $k = 4
Output: 3

Since the multiplication of 2 x 3 is as below:

    1 2 3
    2 4 6

The sorted multiplication table:

    1 2 2 3 4 6

Now the 4th element in the table is "3".
</code></pre>

<p><em>Example 2:</em></p>

<pre><code>Input: $i = 3; $j = 3; $k = 6
Output: 4

Since the multiplication of 3 x 3 is as below:

    1 2 3
    2 4 6
    3 6 9

The sorted multiplication table:

    1 2 2 3 3 4 6 6 9

Now the 6th element in the table is "4".
</code></pre>

<h3>Multiplication Table in Raku</h3>

<p>We use the built-in infix <code>X</code> <a href="https://docs.raku.org/routine/X">cross-product</a> operator to create all combinations from each range, and combine it with the <code>*</code> multiplication operators to obtain all the products of the multiplication table. Then, we simply sort the values obtained and pick the right one (at index <code>$k - 1</code>). In Raku, we can chain all these operations in just one code-line:</p>

<pre><code>use v6;

sub mult-table (UInt $i, UInt $j, UInt $k) {
    say (sort 1..$i X* 1..$j)[$k - 1]
}
for (2, 3, 4), (3, 3, 6) -&gt; $a, $b, $c {
    mult-table $a, $b, $c;
}
</code></pre>

<p>This script displays the following output:</p>

<pre><code>raku ./mult-table.raku
3
4
</code></pre>

<h3>Multiplication Table in Perl</h3>

<p>Since we don&#8217;t have the cross-product operator in Perl, we will simply use two nested <code>for</code> loops to compute the products and store them in the <code>@products</code> array. Then, we sort the values obtained and pick the right one (at index <code>$k - 1</code>).</p>

<pre><code>use strict;
use warnings;
use feature "say";

sub mult_table {
    my ($c, $d, $k) = @{$_[0]};
    my @products;
    for my $i (1..$c) {
        for my $j (1..$d) {
            push @products, $i * $j;
        }
    }
    say +(sort {$a &lt;=&gt; $b} @products)[$k - 1];

}
for my $test ([2, 3, 4], [3, 3, 6]) {
    mult_table $test;
}
</code></pre>

<p>This script displays the following output:</p>

<pre><code>$ perl mult-table.pl
3
4
</code></pre>

<h2>Wrapping up</h2>

<p>The next week Perl Weekly Challenge will start soon. If you want to participate in this challenge, please check https://perlweeklychallenge.org/ and make sure you answer the challenge before 23:59 BST (British summer time) on December 5, 2021. And, please, also spread the word about the Perl Weekly Challenge if you can.</p>

        

           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_4">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">Developing A Game Engine with Perl : Part 4 - UEFI vs OpenSuSE Installer</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Thursday 02 December 2021 08:24</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">I'm still learning</a> so remember... <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>If you want to start reading from the beginning. Check out the <a href="http://blogs.perl.org/users/shawn1/2021/11/developing-a-game-engine-with-perl.html">first article in this series</a></p>

<p>Continuing on with the <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-3---hardware-failure-server-upgrade.html">last article</a> let's talk about old hardware with <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface">UEFI</a>. It can be difficult (for me) to know how to get <a href="https://www.opensuse.org/">Linux OpenSuSE</a> installed properly.</p>

<ul><li>Mouse Input Support</li><li>Hardware Failure</li><li>Server Upgrade</li><li><strong>UEFI vs OpenSuSE Installer</strong></li><li>32bit -&gt; 64bit &amp; Perl's Storable</li></ul>

<h2>
  <a name="a-small-computer-and-almost-destroying-it" href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c#a-small-computer-and-almost-destroying-it">
  </a>
  A small computer and almost destroying it...
</h2>

<p>The last server's hard drive died, and I happen to have this old, but
 better, computer. It was in pieces, sitting in a box for a long time. 
Putting it back together was not easy. This <a href="https://www.acer.com/ac/en/US/content/support-product/3916?b=1&amp;pn=DT.SLQAA.001">Aspire X1470</a>
 is a small form factor design, meaning there is no room to spare. Also 
meaning if your computer has been sitting around in a box, in pieces for
 a long time, and its' frame gets bent... well that means it's going to 
be very difficult to get it back together. I managed to rip off a chip 
heatsink in the process. I tell ya, my stomach turned right over... but 
luckily it went back on and seems to be holding and working fine.</p>

<h2>
  <a name="uefi-vs-opensuse-installer" href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c#uefi-vs-opensuse-installer">
  </a>
  UEFI vs OpenSuSE Installer
</h2>

<p>This is where things get interesting. After finally getting the 
computer together, I downloaded the OpenSuSE ISO for 64bit. I went with <a href="https://get.opensuse.org/tumbleweed">Tumbleweed</a> again. It worked well with the last server, so I'll just go with what I know. Tumbleweed is a <a href="https://en.wikipedia.org/wiki/Rolling_release">rolling release linux</a>, which means I shouldn't have to reinstall when a new version is released and I should still stay up to date. I created a <a href="https://askubuntu.com/questions/1335903/make-a-full-bootable-usb-stick-with-gnome-disk-utility">bootable USB from ISO in Ubuntu 20.04</a> (My Desktop). Booted the new computer, installed OpenSuSE, and was happy... until I tried to reboot.</p>

<p>When I rebooted, I pulled out the USB stick and the BIOS said no boot
 drives. I knew of UEFI, and started reading. I found that in /boot/efi/
 there was no EFI directory. If you don't know anything about UEFI (No 
worries, neither do I) ..apparently there is supposed to be a Fat32 
partition marked as type EFI. The BIOS checks for this location and 
attempts to load the OS this way as apposed to using the <a href="https://en.wikipedia.org/wiki/Master_boot_record">MBR</a> for booting like in the old days. </p>

<p>Here is what it looks like now in the server using <a href="https://man7.org/linux/man-pages/man8/fdisk.8.html">fdisk</a> to look at the partitions and <a href="https://linux.die.net/man/1/tree">tree</a> to look at the directory structure:<br />
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:/ # fdisk -l
Device          Start        End    Sectors  Size Type
/dev/sda1        2048    1050623    1048576  512M EFI System
/dev/sda2     1050624 2893709311 2892658688  1.3T Linux filesystem
/dev/sda3  2893709312 2930277134   36567823 17.4G Linux swap

localhost:/ # tree /boot/efi/
/boot/efi/
└── EFI
    ├── boot
    │&nbsp;&nbsp; ├── MokManager.efi
    │&nbsp;&nbsp; ├── bootx64.efi
    │&nbsp;&nbsp; └── fallback.efi
    └── opensuse
        ├── MokManager.efi
        ├── boot.csv
        ├── grub.cfg
        ├── grub.efi
        ├── grubx64.efi
        └── shim.efi

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
    </svg></div></div></div><div class="highlight js-code-highlight"><div class="highlight__panel js-actions-panel"><div class="highlight__panel-action js-fullscreen-code-action"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
</svg>

    

</div>
</div>
</div>



<p>You may need to scroll right to see the partition type EFI.</p>

<p>Well, this is what was <strong>NOT</strong> happening when I 
installed. I tried several different ways to get it to do an EFI 
install, but it kept doing it MBR style. The difficult thing is I didn't
 know what to ask google, and every time I had to try a new install 
method, it took about an hour to do the install, just to check and find 
out that it was wrong.</p>

<p>I knew that the installer wasn't loading in EFI mode and was running 
in legacy mode, but I didn't know how to switch it manually, and why it 
was choosing legacy in the first place. I checked the BIOS for booting 
options, and there just wasn't anything that would force it to boot from
 a HDD's MBR. I also didn't want to do a firmware update, I just wanted 
to code and get this install done.</p>

<p>Finally.... the answer was the BIOS just sucks. For some reason it 
prioritizes legacy mode on USB booting and I could only get it to chose 
an EFI boot from USB by manually loading it in the boot menu with F12. 
Allowing it to choose the USB for booting always resulted in legacy 
mode, regardless of the settings specified in the BIOS. Of course 
OpenSuSE's installer will not allow you to switch to EFI if you are in 
legacy mode. Also it does not make it obvious for the uninitiated to 
know that it is in legacy (MBR) mode. </p>

<p>I managed to find an obscure article that said <strong><code>"If you see the options for pressing F keys at the bottom of the install screen, then it's legacy mode"</code></strong>
 That one little piece of information is all I needed to understand what
 was happening. I saw that every time I booted into the OpenSuSE 
installer there were F key options at the bottom. That's when I realized
 that the BIOS wasn't booting from the USB's EFI partition. After 
realizing this, I used a manual BIOS boot, picked the correct USB boot 
drive (of course the BIOS displays both EFI and Legacy USB boot drives 
with the same name) I got the correct install screen, the EFI boot 
options were all there. The install went really easy at this point and 
is up and running now for a few days with no issues.</p>

<p>Have you ever worked with small form factor computers? What sort of 
disaster stories, or success stories have you had? Also what about 
installing an OS with UEFI vs MBR, what sort of experiences have you 
had?</p>

<p>If you have any suggestions or comments please share constructively. 
Also please visit our social media pages for lots of fun videos and 
pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br />
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-3---hardware-failure-server-upgrade.html">Prev &lt;&lt; Part 3 - Hardware Failure &amp; Server Upgrade</a><br />
<a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-5---32bit---64bit-perls-storable.html">Next &gt;&gt; Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable</a></p>

<p>Cheers!<br />
Shawn</p>
        
           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_5">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-3---hardware-failure-server-upgrade.html">Developing A Game Engine with Perl: Part 3 - Hardware Failure &amp; Server Upgrade </a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Thursday 02 December 2021 08:09</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">Remember...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>Continuing from the <a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">last article</a>, let's talk about the hardware failures and server upgrade.</p>

<ul><li>Mouse Input Support</li><li><strong>Hardware Failure</strong></li><li><strong>Server Upgrade</strong></li><li>UEFI vs OpenSuSE Installer</li><li>32bit -&gt; 64bit &amp; Perl's Storable</li></ul>

<h2>
  <a name="all-your-bad-sectors-are-belong-to-us" href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1#all-your-bad-sectors-are-belong-to-us">
  </a>
  All your bad sectors are belong to us.....
</h2>

<p>Ugh, seeing these sort of log errors screams panic to me<br />
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], Self-Test Log error count increased from 3 to 4
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], previous self-test completed with error (read test element)
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], Failed SMART usage Attribute: 184 End-to-End_Error.
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], 136 Offline uncorrectable sectors
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], 136 Currently unreadable (pending) sectors
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
    </svg></div></div></div><div class="highlight js-code-highlight"><div class="highlight__panel js-actions-panel"><div class="highlight__panel-action js-fullscreen-code-action"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on">
</svg>

    

</div>
</div>
</div>



<p>My Dev/Test server's hard drive is going bad and I need to deal with this ASAP! It's one of those <a href="https://www.acer.com/ac/en/ID/content/support-product/4000;-;">all in one PC's Acer makes</a> You can see it far right, tucked behind the laptops in this pic of my setup.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gh0StCVz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8t6ca8pe8d1sggz4kj1a.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gh0StCVz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8t6ca8pe8d1sggz4kj1a.jpg" alt="Image description" width="880" height="880" /></a></p>

<p>It's been a while since I've had to look at system logs in <a href="https://www.opensuse.org/">Linux OpenSuSE</a>. I used to remember just doing a <a href="https://man7.org/linux/man-pages/man1/tail.1.html">tail -f /var/log/messages</a>
 or what ever log file you wanted to watch. I guess at some point since 
then they switched to using systemd journal service and you can now view
 everything using <a href="https://documentation.suse.com/es-es/sles/15-SP1/html/SLES-all/cha-journalctl.html">journalctl</a></p>

<h2>
  <a name="we-can-rebuild-it-we-have-the-technology" href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1#we-can-rebuild-it-we-have-the-technology">
  </a>
  We can rebuild it, we have the technology...
</h2>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qJEe5LJ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yfxkmd942pem6o4ggx7y.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qJEe5LJ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yfxkmd942pem6o4ggx7y.gif" alt="Image description" data-animated="true" width="334" height="251" /></a></p>

<p>This is actually OK. I back up my code, so I'm not worried about data
 loss. Aaand... I just so happen to have another Acer computer that 
has been sitting in a cardboard box in pieces for a long time. Aaand... 
this other computer is much better spec'd. </p>

<p>Here you can see a <a href="https://github.com/dylanaraps/neofetch">neofetch</a> comparison of the 2 servers side by side. Left is the "new" server, right is the old server with the bad HDD.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--j2dXVXrY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/f70tbyuqndxq3gy3t0p9.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--j2dXVXrY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/f70tbyuqndxq3gy3t0p9.jpg" alt="Image description" width="688" height="259" /></a></p>

<p><strong>Notable upgrades:</strong></p>

<ul><li>32bit -&gt; 64bit Architecture</li><li>2 Core -&gt; 4 Core CPU</li><li>4 GB -&gt; 6 GB RAM</li><li>A Very Slow 1 TB -&gt; Much Faster 1.5 TB HDD</li></ul>

<p>I'm excited mainly for the extra core count for <a href="https://perldoc.perl.org/functions/fork">forking</a> and the working hard drive, that is exceptionally faster.</p>

<p>Running an <a href="http://manpages.org/fio">fio test</a> shows dramatic differences in results.</p>

<p><code>fio --name=randwrite --ioengine=libaio --iodepth=1 
--rw=randwrite --bs=4k --direct=0 --size=512M --numjobs=4 --runtime=240 
--group_reporting</code></p>

<p>Old server write speeds are around 6789kB/s and took a few minutes to
 run. The new server performs @ 109MB/s and finished the test in a few 
seconds. I'd say we should see a huge performance increase, and we do! </p>

<p>The engine can do a lot of writing to the hard drive at times, and I 
used to see the lag, now... no lag from the hard drive! Nice and quick! 
Also no bad sectors.</p>

<p>I've <a href="https://docs.oracle.com/en-us/iaas/Content/Block/References/samplefiocommandslinux.htm">read somewhere</a>
 that you may not want to perform randwrite against a device that is in 
use... So, be careful. I did it with no apparent problems, and the bad 
sectors were already happening well before ever running the fio command. </p>

<p>Let me know if you have any experience with hard drive failure diagnosing and testing write speeds with fio.</p>

<p>If you have any suggestions or comments please share constructively. 
Also please visit our social media pages for lots of fun videos and 
pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br />
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-2---mouse-input.html">Prev &lt;&lt; Part 2 - Mouse Input</a><br />
<a href="http://blogs.perl.org/users/shawn1/2021/12/developing-a-game-engine-with-perl-part-4---uefi-vs-opensuse-installer.html">Next &gt;&gt; Part 4 - UEFI vs OpenSuSE Installer</a></p>

<p>Cheers!<br />
Shawn</p>
        
           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_6">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-6-a-colourful-telnet-server-4i7g">Developing A Game Engine with Perl: Part 6 - A Colourful Telnet Server</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Thursday 02 December 2021 09:06</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">I'll stop reminding you that...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>If you want to start reading from the beginning. Check out the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-3b8">first article in this series</a></p>

<h2>
  <a href="#what-is-ansi-game-engine">
  </a>
  What is ANSI Game Engine?
</h2>

<p>Well, at it's core, <a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine</a> is a very colourful and interactive telnet server.</p>

<p><strong>Why telnet!?</strong></p>

<p>I know, right!? I still ask myself the same question today, but at this point, I'm kinda committed. Initially, it all came down to my decision <strong>NOT</strong> to code the client side. I looked into it, and it just wasn't something I wanted to do. And honestly, it seemed too far outside my comfort level with Perl. I feel much more comfortable, and interested in, working with server side code, as may be true for other Perl dev's out there. That's where <a href="https://www.perl.org/">Perl</a> is quite prolific. Since I was going with <a href="https://en.wikipedia.org/wiki/ANSI_art">ANSI graphics</a>, they are best known these days, for me at least, to be used in telnet/terminal clients and <a href="https://en.wikipedia.org/wiki/Bulletin_board_system">BBS's</a>, which are mainly telnet based now. This being said, it wasn't long searching google before I came across SyncTERM. <a href="https://syncterm.bbsdev.net/">SyncTERM</a> is, in my opinion, the best available choice for cross-platform rendering of ANSI graphics over telnet. I've tried many different clients, on Mac, Windows, and Linux. SyncTERM works the most consistent across these platforms, it's been around for a long time and is still actively being developed. So telnet it is!</p>

<p><strong>Telnet.... Fork me...</strong></p>

<p>The engine has to be multiplayer. Depending on the specific game requirements, this does not necessarily mean players interacting with each other, but at least having multiple players connected at the same time to the same server. This is a minimum initial requirement. To me, this is a great opportunity to work with <a href="http://man.he.net/man2/fork">Fork</a>. I really like the idea of creating multiple processes with fork that can interact with each other. This is an area I have little experience with and a great opportunity to learn.</p>

<p><strong>Have you heard of Perl's CPAN?</strong></p>

<p>If you are a Perl dev, obviously yes. If you code in another language, perhaps you've heard of it. <a href="https://www.cpan.org/">Comprehensive Perl Archive Network</a>, or CPAN, is Perl's repository of code modules. If you want to do something, chances are someone has already made a module for that. As of writing this article, CPAN currently has 208,034 Perl modules written by 14,179 authors. It's absolutely amazing!</p>

<p>This is where I found the modules to develop a telnet server. A forking telnet server, can you believe it? Fork yah! Okokok.... I'll stop making that joke, I promise!</p>

<p><strong>Let's get to coding!</strong></p>

<p>The first step was to get a telnet server that could accept multiple simultaneous connections. I read up on how to make a telnet server with Perl and from that reading I quickly learned about <a href="https://metacpan.org/pod/IO::Socket::INET">IO::Socket::INET</a>. It wasn't long after I had working code for a telnet server!<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>use strict;
use warnings;
use IO::Socket::INET;
print "\nBEGIN\n";

print "Setting up listen socket\n";
my $socket = new IO::Socket::INET (
    LocalHost =&gt; '192.168.1.15',
    LocalPort =&gt; '27777',
    Proto =&gt; 'tcp',
    Listen =&gt; SOMAXCONN,
    ReuseAddr =&gt; 1
);

my $player_socket;
my $player_data;

print "Waiting for connection ...\n";
while(1) {

    next unless $player_socket = $socket-&gt;accept();
    print "Incomming Connection!\n";

    my $player_address = $player_socket-&gt;peerhost();
    my $player_port    = $player_socket-&gt;peerport();

    my $response = "Player Connection Info: $player_address : $player_port. ";
    print "$response\n";

    $response .= "Press Any Key To Disconnect...\n";
    $player_socket-&gt;send($response);

    print "Waiting for player to press a key and disconnect...\n";
    while ($player_socket-&gt;connected()) {

        $player_socket-&gt;recv($player_data, 1024);
        if ($player_data) {
            print "Player Disconnecting $player_address : $player_port\n";
            $socket-&gt;close();
            print "Player Disconnected\n";
            last;
        }

    }
    last;
}
print "Good Bye!\n";
exit;
</code></pre>

</div>



<p>Running this code and connecting with SyncTERM shows:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:~ # perl telnet_server.pl 

BEGIN
Setting up listen socket
Waiting for connection ...
Incomming Connection!
Player Connection Info: 192.168.1.9 : 55414. 
Waiting for player to press a key and disconnect...
Player Disconnecting 192.168.1.9 : 55414
Player Disconnected
Good Bye!

</code></pre>

</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QEvJGtrE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/th0yb9l6o49xidryn1xg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QEvJGtrE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/th0yb9l6o49xidryn1xg.png" alt="Image description" width="880" height="692"></a></p>

<p>I read my <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">Linux OpenSuSE</a> server's man page for <a href="https://man7.org/linux/man-pages/man2/listen.2.html">listen(2)</a>, and the best I can understand is that the value for SOMAXCONN in  <a href="https://perldoc.perl.org/IO::Socket#Listen"><code>Listen =&gt; SOMAXCONN</code></a> will allow me to have up to  4096 connections!? I think this is correct. It says the value can be found in <code>/proc/sys/net/core/somaxconn</code> and doing a <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> of that file shows 4096.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:~ # cat /proc/sys/net/core/somaxconn 
4096

</code></pre>

</div>



<p><strong>Now we just need to fork!</strong></p>

<p>This process turned out to be a bit more difficult to understand (for me) and a few more lines of code then did the telnet portion. I'll pick up from here in the next article.</p>

<p>Have you done any telnet programming before? If so, what modules have you found useful? (CPAN or otherwise)</p>

<p>If you have any suggestions or comments please share constructively. Also please visit our social media pages for lots of fun videos and pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br>
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-5-32bit-64bit-perls-storable-5l8">Prev &lt;&lt; Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable</a><br>
<strong><em>Next &gt;&gt; Coming Soon</em></strong></p>

<p>Cheers!<br>
Shawn</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_7">
            <div class="card-header">
              <h2 class="card-title"><a href="http://domm.plix.at/perl/2021_12_git_merge_repos_with_history.html">Merging multiple git repos with their commit history</a></h2>
<a href="https://domm.plix.at/perl.html" class="badge badge-primary" style="float: left">domm (Perl and other tech)</a>

              <p class="text-right"><small>Published
 on Wednesday 01 December 2021 12:14</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p><a href="https://adventofcode.com/2021">Advent of Code</a> has started again and I'm again publishing my solutions to github (and probably also here). In the last two years I created on git repo for each year, but this year I changed my mind and want to have on repo containing a dir for each year.</p>

<p>Now I could just copy all the files into the <a href="https://github.com/domm/advent_of_code">new repo</a>, but that would lose the commit history. Which is unacceptable!</p>

<h4>The status quo ante</h4>

<pre><code>.
├── advent2019
│   ├── 01_1.pl
│   └── 01_2.pl
└── advent2020
    ├── 01_1.pl
    └── 01_2.pl</code></pre>

<h4>What I want</h4>

<pre><code>.
└─── advent_of_code
    ├── 2019
    │   ├── 01_1.pl
    │   └── 01_2.pl
    └── 2020
        ├── 01_1.pl
        └── 01_2.pl</code></pre>

<p>I know that git allows you to rewrite history and have once munged a repo using <code>git filter-branch</code> (to completely delete some files and commits). I of course forgot the details, but after a little bit of searching and trial and error I got it working!</p>

<h4>First, prepare the old repo</h4>

<p>To prevent merge conflicts later, I first move the code in the old repo from the root dir into a new dir, eg <code>2019</code></p>

<p>So this:</p>

<pre><code>.
└─── advent2019
    ├── 01_1.pl
    └── 01_2.pl</code></pre>

<p>Should look like this:</p>

<pre><code>.
└─── advent2019
    └─── 2019
        ├── 01_1.pl
        └── 01_2.pl</code></pre>

<p>I found <a href="https://gist.github.com/fabiomaggio/ce7ecd7dffd27b32a45325204288efce">this gist</a> very helpful, and adapted it to my needs:</p>

<pre><code>cd advent2019
mkdir 2019
git filter-branch --tree-filter 'mkdir -p /tmp/ad; mv * /tmp/ad; mkdir 2019; mv /tmp/ad/* 2019/' --tag-name-filter cat --prune-empty -- --all</code></pre>

<p>This uses <code>git filter-branch</code> to move the old code to a temp dir (<code>mv * /tmp/ad</code>) and then move it back to the new location (<code>mv /tmp/ad/* 2019/</code>), using some git magic to keep the history.</p>

<p>While I was at it, I also removed some of the AdventOfCode input files which I had commited (but which we should not commit):</p>

<pre><code>git filter-branch -f --tree-filter 'rm -f 2019/*.data' HEAD</code></pre>

<h4>Second, import the repo</h4>

<p>Now I can merge the old repo into my new unified repo. This time this <a href="https://stackoverflow.com/a/6004865">StackOverflow comment</a> pointed me in the right direction. The basic idea is to add the old repo as a new remote, fetch the commits, and then merge them using <code>--allow-unrelated-histories</code></p>

<pre><code>cd advent_of_code
git remote add old19 ../advent2019/
git fetch old19
git merge --allow-unrelated-histories old19/master
git remote remove old19</code></pre>

<p>And then push, and we're done and have a nice unified repo:</p>

<pre><code>~/perl/advent_of_code$ tree
.
├── 2019
│   ├── 01_1.pl
│   ├── 01_2.pl
├── 2020
│   ├── 01_1.pl
│   ├── 01_2.pl
│   ├── 01_2_golf.pl
├── 2021
│   ├── 01_1.pl
│   ├── 01_1_golf.pl
│   └── 01_2.pl
└── README.md</code></pre>

<p>And the history was preserved:</p>

<pre><code>~/perl/advent_of_code$ git log 2019/24_1.pl
commit dbaf0bc1df645bda61ec5cf7e623d478a179947e
Author: Thomas Klausner &lt;domm@plix.at&gt;
Date:   Fri Dec 27 10:10:10 2019 +0100

    no need to keep a map around, the rating is unique per map</code></pre>

<p>Win!</p>

<p>Next steps: Fix all links pointing to the old repos to point to the new location, and maybe archive / delete the github repos (and/or have them redirect to the new unified repo)</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_8">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-5-32bit-64bit-perls-storable-5l8">Developing A Game Engine with Perl: Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Wednesday 01 December 2021 03:14</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">If you haven't heard already...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>If you want to start reading from the beginning. Check out the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-3b8">first article in this series</a></p>

<p>Continuing on with the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">last article</a> let's talk about changing system architecture and how that can affect Perl code, specifically <a href="https://perldoc.perl.org/Storable">Storable</a>.</p>

<ul>
<li>Mouse Input Support</li>
<li>Hardware Failure</li>
<li>Server Upgrade</li>
<li>UEFI vs OpenSuSE Installer</li>
<li><strong>32bit -&gt; 64bit &amp; Perl's Storable</strong></li>
</ul>

<p>After the old server had <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1">HDD failures</a> and finally <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">managing to upgrade</a> to the new server, I eagerly began getting all the services and software installed to test the engine on new hardware. I was quickly meet with an error I have never seen before.</p>

<p><code>Byte order is not compatible at /usr/lib/perl5/5.34.0/x86_64-linux-thread-multi/Storable.pm</code></p>

<p>After doing some quick reading, I came to understand that Perl uses architecture specific ways to save content to files when using Storable. Specifically if you use <code>lock_store</code> and <code>store</code>. These are part of Perl's core system and what I use throughout the engine for working with the file structure.</p>

<p>I had to carefully re-read the perldoc's to discover that you can avoid architecture incompatibility by simply using <code>nstore</code> and <code>lock_nstore</code> The method you use for retrieving the stored files doesn't matter, only when storing the data into files does it matter.</p>

<p>I tried to find ways of being able to convert the stored files from 32bit architecture to 64bit, but ultimately the only real option was to use the old server to re-store the files with lock_nstore.</p>

<p>Luckily the old PC was still working, and I was able to modify the code and re-store all the files. The change and usage was simple:</p>

<p>I had to change my use statement from:<br>
<code>use Storable qw(lock_store lock_retrieve);</code><br>
to<br>
<code>use Storable qw(lock_nstore lock_retrieve)</code></p>

<p>And to re-store I changed my code from this:<br>
<code>lock_store($data_ref, $dir_location);</code><br>
to<br>
<code>lock_nstore($data_ref, $dir_location);</code></p>

<p>Have you ever had to write code for architecture compatibility? Or fix code migrated from one architecture to another? What do you prefer for storing data to files in Perl?</p>

<p>If you have any suggestions or comments please share constructively. Also please visit our social media pages for lots of fun videos and pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br>
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">Prev &lt;&lt; Part 4 - UEFI vs OpenSuSE Installer</a><br>
<a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-6-a-colourful-telnet-server-4i7g">Next &gt;&gt; Part 6 - A Colourful Telnet Server</a></p>

<p>Cheers!<br>
Shawn</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_9">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">Developing A Game Engine with Perl : Part  4 - UEFI vs OpenSuSE Installer</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Wednesday 01 December 2021 02:34</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">I'm still learning</a> so remember... <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>If you want to start reading from the beginning. Check out the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-3b8">first article in this series</a></p>

<p>Continuing on with the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1">last article</a> let's talk about old hardware with <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface">UEFI</a>. It can be difficult (for me) to know how to get <a href="https://www.opensuse.org/">Linux OpenSuSE</a> installed properly.</p>

<ul>
<li>Mouse Input Support</li>
<li>Hardware Failure</li>
<li>Server Upgrade</li>
<li><strong>UEFI vs OpenSuSE Installer</strong></li>
<li>32bit -&gt; 64bit &amp; Perl's Storable</li>
</ul>

<h2>
  <a href="#a-small-computer-and-almost-destroying-it">
  </a>
  A small computer and almost destroying it...
</h2>

<p>The last server's hard drive died, and I happen to have this old, but better, computer. It was in pieces, sitting in a box for a long time. Putting it back together was not easy. This <a href="https://www.acer.com/ac/en/US/content/support-product/3916?b=1&amp;pn=DT.SLQAA.001">Aspire X1470</a> is a small form factor design, meaning there is no room to spare. Also meaning if your computer has been sitting around in a box, in pieces for a long time, and its' frame gets bent... well that means it's going to be very difficult to get it back together. I managed to rip off a chip heatsink in the process. I tell ya, my stomach turned right over... but luckily it went back on and seems to be holding and working fine.</p>

<h2>
  <a href="#uefi-vs-opensuse-installer">
  </a>
  UEFI vs OpenSuSE Installer
</h2>

<p>This is where things get interesting. After finally getting the computer together, I downloaded the OpenSuSE ISO for 64bit. I went with <a href="https://get.opensuse.org/tumbleweed">Tumbleweed</a> again. It worked well with the last server, so I'll just go with what I know. Tumbleweed is a <a href="https://en.wikipedia.org/wiki/Rolling_release">rolling release linux</a>, which means I shouldn't have to reinstall when a new version is released and I should still stay up to date. I created a <a href="https://askubuntu.com/questions/1335903/make-a-full-bootable-usb-stick-with-gnome-disk-utility">bootable USB from ISO in Ubuntu 20.04</a> (My Desktop). Booted the new computer, installed OpenSuSE, and was happy... until I tried to reboot.</p>

<p>When I rebooted, I pulled out the USB stick and the BIOS said no boot drives. I knew of UEFI, and started reading. I found that in /boot/efi/ there was no EFI directory. If you don't know anything about UEFI (No worries, neither do I) ..apparently there is supposed to be a Fat32 partition marked as type EFI. The BIOS checks for this location and attempts to load the OS this way as apposed to using the <a href="https://en.wikipedia.org/wiki/Master_boot_record">MBR</a> for booting like in the old days. </p>

<p>Here is what it looks like now in the server using <a href="https://man7.org/linux/man-pages/man8/fdisk.8.html">fdisk</a> to look at the partitions and <a href="https://linux.die.net/man/1/tree">tree</a> to look at the directory structure:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>localhost:/ # fdisk -l
Device          Start        End    Sectors  Size Type
/dev/sda1        2048    1050623    1048576  512M EFI System
/dev/sda2     1050624 2893709311 2892658688  1.3T Linux filesystem
/dev/sda3  2893709312 2930277134   36567823 17.4G Linux swap

localhost:/ # tree /boot/efi/
/boot/efi/
└── EFI
    ├── boot
    │   ├── MokManager.efi
    │   ├── bootx64.efi
    │   └── fallback.efi
    └── opensuse
        ├── MokManager.efi
        ├── boot.csv
        ├── grub.cfg
        ├── grub.efi
        ├── grubx64.efi
        └── shim.efi

</code></pre>

</div>



<p>You may need to scroll right to see the partition type EFI.</p>

<p>Well, this is what was <strong>NOT</strong> happening when I installed. I tried several different ways to get it to do an EFI install, but it kept doing it MBR style. The difficult thing is I didn't know what to ask google, and every time I had to try a new install method, it took about an hour to do the install, just to check and find out that it was wrong.</p>

<p>I knew that the installer wasn't loading in EFI mode and was running in legacy mode, but I didn't know how to switch it manually, and why it was choosing legacy in the first place. I checked the BIOS for booting options, and there just wasn't anything that would force it to boot from a HDD's MBR. I also didn't want to do a firmware update, I just wanted to code and get this install done.</p>

<p>Finally.... the answer was the BIOS just sucks. For some reason it prioritizes legacy mode on USB booting and I could only get it to chose an EFI boot from USB by manually loading it in the boot menu with F12. Allowing it to choose the USB for booting always resulted in legacy mode, regardless of the settings specified in the BIOS. Of course OpenSuSE's installer will not allow you to switch to EFI if you are in legacy mode. Also it does not make it obvious for the uninitiated to know that it is in legacy (MBR) mode. </p>

<p>I managed to find an obscure article that said <strong><code>"If you see the options for pressing F keys at the bottom of the install screen, then it's legacy mode"</code></strong> That one little piece of information is all I needed to understand what was happening. I saw that every time I booted into the OpenSuSE installer there were F key options at the bottom. That's when I realized that the BIOS wasn't booting from the USB's EFI partition. After realizing this, I used a manual BIOS boot, picked the correct USB boot drive (of course the BIOS displays both EFI and Legacy USB boot drives with the same name) I got the correct install screen, the EFI boot options were all there. The install went really easy at this point and is up and running now for a few days with no issues.</p>

<p>Have you ever worked with small form factor computers? What sort of disaster stories, or success stories have you had? Also what about installing an OS with UEFI vs MBR, what sort of experiences have you had?</p>

<p>If you have any suggestions or comments please share constructively. Also please visit our social media pages for lots of fun videos and pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br>
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1">Prev &lt;&lt; Part 3 - Hardware Failure &amp; Server Upgrade</a><br>
<a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-5-32bit-64bit-perls-storable-5l8">Next &gt;&gt; Part 5 - 32bit -&gt; 64bit &amp; Perl's Storable</a></p>

<p>Cheers!<br>
Shawn</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_10">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-3-hardware-failure-server-upgrade-on1">Developing A Game Engine with Perl: Part 3 - Hardware Failure &amp; Server Upgrade</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Shawn Holland
 on Wednesday 01 December 2021 01:03</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">Remember...</a> <strong>I DO NOT KNOW WHAT I AM DOING.</strong></p>

<p>Continuing from the <a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">last article</a>, let's talk about the hardware failures and server upgrade.</p>

<ul>
<li>Mouse Input Support</li>
<li><strong>Hardware Failure</strong></li>
<li><strong>Server Upgrade</strong></li>
<li>UEFI vs OpenSuSE Installer</li>
<li>32bit -&gt; 64bit &amp; Perl's Storable</li>
</ul>

<h2>
  <a href="#all-your-bad-sectors-are-belong-to-us">
  </a>
  All your bad sectors are belong to us.....
</h2>

<p>Ugh, seeing these sort of log errors screams panic to me<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], Self-Test Log error count increased from 3 to 4
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], previous self-test completed with error (read test element)
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], Failed SMART usage Attribute: 184 End-to-End_Error.
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], 136 Offline uncorrectable sectors
Nov 25 03:44:25 Dev smartd[627]: Device: /dev/sda [SAT], 136 Currently unreadable (pending) sectors
</code></pre>

</div>



<p>My Dev/Test server's hard drive is going bad and I need to deal with this ASAP! It's one of those <a href="https://www.acer.com/ac/en/ID/content/support-product/4000;-;">all in one PC's Acer makes</a> You can see it far right, tucked behind the laptops in this pic of my setup.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gh0StCVz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8t6ca8pe8d1sggz4kj1a.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gh0StCVz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8t6ca8pe8d1sggz4kj1a.jpg" alt="Image description" width="880" height="880"></a></p>

<p>It's been a while since I've had to look at system logs in <a href="https://www.opensuse.org/">Linux OpenSuSE</a>. I used to remember just doing a <a href="https://man7.org/linux/man-pages/man1/tail.1.html">tail -f /var/log/messages</a> or what ever log file you wanted to watch. I guess at some point since then they switched to using systemd journal service and you can now view everything using <a href="https://documentation.suse.com/es-es/sles/15-SP1/html/SLES-all/cha-journalctl.html">journalctl</a></p>

<h2>
  <a href="#we-can-rebuild-it-we-have-the-technology">
  </a>
  We can rebuild it, we have the technology...
</h2>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qJEe5LJ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yfxkmd942pem6o4ggx7y.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qJEe5LJ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yfxkmd942pem6o4ggx7y.gif" alt="Image description" width="334" height="251"></a></p>

<p>This is actually OK. I back up my code, so I'm not worried about data loss. Aaaand... I just so happen to have another Acer computer that has been sitting in a cardboard box in pieces for a long time. Aaaand... this other computer is much better spec'd. </p>

<p>Here you can see a <a href="https://github.com/dylanaraps/neofetch">neofetch</a> comparison of the 2 servers side by side. Left is the "new" server, right is the old server with the bad HDD.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--j2dXVXrY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/f70tbyuqndxq3gy3t0p9.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--j2dXVXrY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/f70tbyuqndxq3gy3t0p9.jpg" alt="Image description" width="688" height="259"></a></p>

<p><strong>Notable upgrades:</strong></p>

<ul>
<li>32bit -&gt; 64bit Architecture</li>
<li>2 Core -&gt; 4 Core CPU</li>
<li>4 GB -&gt; 6 GB RAM</li>
<li>A Very Slow 1 TB -&gt; Much Faster 1.5 TB HDD</li>
</ul>

<p>I'm excited mainly for the extra core count for <a href="https://perldoc.perl.org/functions/fork">forking</a> and the working hard drive, that is exceptionally faster.</p>

<p>Running an <a href="http://manpages.org/fio">fio test</a> shows dramatic differences in results.</p>

<p><code>fio --name=randwrite --ioengine=libaio --iodepth=1 --rw=randwrite --bs=4k --direct=0 --size=512M --numjobs=4 --runtime=240 --group_reporting</code></p>

<p>Old server write speeds are around 6789kB/s and took a few minutes to run. The new server performs @ 109MB/s and finished the test in a few seconds. I'd say we should see a huge performance increase, and we do! </p>

<p>The engine can do a lot of writing to the hard drive at times, and I used to see the lag, now... no lag from the hard drive! Nice and quick! Also no bad sectors.</p>

<p>I've <a href="https://docs.oracle.com/en-us/iaas/Content/Block/References/samplefiocommandslinux.htm">read somewhere</a> that you may not want to perform randwrite against a device that is in use... So, be careful. I did it with no apparent problems, and the bad sectors were already happening well before ever running the fio command. </p>

<p>Let me know if you have any experience with hard drive failure diagnosing and testing write speeds with fio.</p>

<p>If you have any suggestions or comments please share constructively. Also please visit our social media pages for lots of fun videos and pictures showing the game engine in action. </p>

<p><a href="https://www.instagram.com/ANSIGameEngine/">ANSI Game Engine on Instagram</a><br>
<a href="https://www.facebook.com/ANSIGameEngine">ANSI Game Engine on Facebook</a></p>

<p><a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-2-mouse-input-43nj">Prev &lt;&lt; Part 2 - Mouse Input</a><br>
<a href="https://dev.to/ansigameengine/developing-a-game-engine-with-perl-part-4-uefi-vs-opensuse-installer-5e1c">Next &gt;&gt; Part 4 - UEFI vs OpenSuSE Installer</a></p>

<p>Cheers!<br>
Shawn</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_11">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlancar.wordpress.com/2021/12/01/list-of-new-cpan-distributions-nov-2021/">List of new CPAN distributions – Nov 2021</a></h2>
<a href="https://perlancar.wordpress.com/" class="badge badge-primary" style="float: left">Perlancar</a>

              <p class="text-right"><small>Published by perlancar
 on Wednesday 01 December 2021 00:31</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><table>
<tr>
<th>dist</th>
<th>author</th>
<th>first_version</th>
<th>latest_version</th>
<th>abstract</th>
</tr>
<tr>
<td><a href="https://metacpan.org/release/API-Mathpix">API-Mathpix</a></td>
<td><a href="https://metacpan.org/author/ERIAM">ERIAM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Use the API of Mathpix</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Acme-CPANModulesBundle-Import-DAVECROSS">Acme-CPANModulesBundle-Import-DAVECROSS</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Acme::CPANModules::* created from DAVECROSS&#039;s posts</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Acme-MarkdownTest">Acme-MarkdownTest</a></td>
<td><a href="https://metacpan.org/author/NEILB">NEILB</a></td>
<td>0.01</td>
<td>0.02</td>
<td>test module to see how markdown is handled</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Alien-Meson">Alien-Meson</a></td>
<td><a href="https://metacpan.org/author/ZMUGHAL">ZMUGHAL</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Find or build meson build tool</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Alien-Ninja">Alien-Ninja</a></td>
<td><a href="https://metacpan.org/author/ZMUGHAL">ZMUGHAL</a></td>
<td>0.01</td>
<td>0.02</td>
<td>Find or build Ninja build tool</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Alien-SWIProlog">Alien-SWIProlog</a></td>
<td><a href="https://metacpan.org/author/ZMUGHAL">ZMUGHAL</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Alien package for the SWI-Prolog Prolog interpreter</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Alien-libgpiod">Alien-libgpiod</a></td>
<td><a href="https://metacpan.org/author/SACAVILIA">SACAVILIA</a></td>
<td>v0.1</td>
<td>v0.1</td>
<td>Find or build libgpiod (Linux GPIO character device library)</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/AltaPay_Try">AltaPay_Try</a></td>
<td><a href="https://metacpan.org/author/MAFEMBRAC">MAFEMBRAC</a></td>
<td>v1.0.1</td>
<td>1.0.1</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-CPANChangesUtils">App-CPANChangesUtils</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.074</td>
<td>0.074</td>
<td>Parse CPAN Changes file</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-Images-To-DjVu">App-Images-To-DjVu</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Base class and script for composing DjVu files from images.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-URIInfoUtils">App-URIInfoUtils</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.002</td>
<td>Utilities related to URI::Info</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-ansiexpand">App-ansiexpand</a></td>
<td><a href="https://metacpan.org/author/UTASHIRO">UTASHIRO</a></td>
<td>0.99</td>
<td>0.9901</td>
<td>ANSI sequence aware tab expand/unexpand command</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-geoCancerDiagnosticDatasetsRetriever">App-geoCancerDiagnosticDatasetsRetriever</a></td>
<td><a href="https://metacpan.org/author/AALAMEER">AALAMEER</a></td>
<td>1</td>
<td>1</td>
<td>GEO Cancer Diagnostic Datasets Retriever is a bioinformatics tool for cancer diagnostic dataset retrieval from the GEO website.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-renlikewd">App-renlikewd</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>REName a file so it becomes LIKE the current (Working) Directory&#039;s name</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-timeput">App-timeput</a></td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>0.060</td>
<td>0.078</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-tjoin">App-tjoin</a></td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>0.060</td>
<td>0.061</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenario-BinarySearch">Bencher-Scenario-BinarySearch</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.003</td>
<td>Benchmark binary searching</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenario-BinarySearch-File">Bencher-Scenario-BinarySearch-File</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Benchmark binary searching sorted lines from a file</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenarios-URI-Info">Bencher-Scenarios-URI-Info</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.002</td>
<td>Scenarios to benchmark URI::Info</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Commons-Link">Commons-Link</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.05</td>
<td>TODO.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Cookie">Cookie</a></td>
<td><a href="https://metacpan.org/author/JDEGUEST">JDEGUEST</a></td>
<td>v0.1.1</td>
<td>v0.1.5</td>
<td>Cookie Object</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Cookies">Cookies</a></td>
<td><a href="https://metacpan.org/author/JDEGUEST">JDEGUEST</a></td>
<td>v0.1.0</td>
<td>v0.1.0</td>
<td>Cookies API for Server &amp; Client</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/DBIx-DBFlow">DBIx-DBFlow</a></td>
<td><a href="https://metacpan.org/author/JLMARTIN">JLMARTIN</a></td>
<td>0.03</td>
<td>0.03</td>
<td>Database development helpers</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/DBIx-DBFlow-Runtime">DBIx-DBFlow-Runtime</a></td>
<td><a href="https://metacpan.org/author/JLMARTIN">JLMARTIN</a></td>
<td>0.03</td>
<td>0.03</td>
<td>Runtime utilities for DBIx::DBFlow</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/DBIx-Spreadsheet">DBIx-Spreadsheet</a></td>
<td><a href="https://metacpan.org/author/CORION">CORION</a></td>
<td>0.01</td>
<td>0.02</td>
<td>Query a spreadsheet with SQL</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Dancer2-Plugin-ControllerAutoload">Dancer2-Plugin-ControllerAutoload</a></td>
<td><a href="https://metacpan.org/author/GILS">GILS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Autoload controllers</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Data-Sah-DefaultValue">Data-Sah-DefaultValue</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Default-value rules for Data::Sah</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Data-TableData-Rank">Data-TableData-Rank</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Add a rank column to a table</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Device-Chip-Adapter-Gpiod">Device-Chip-Adapter-Gpiod</a></td>
<td><a href="https://metacpan.org/author/SACAVILIA">SACAVILIA</a></td>
<td>v0.1.0</td>
<td>v0.1.0</td>
<td>Device::Chip::Adapter implementation for Linux GPIO character devices</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Dyn">Dyn</a></td>
<td><a href="https://metacpan.org/author/SANKO">SANKO</a></td>
<td>0.01</td>
<td>0.02</td>
<td>dyncall Backed FFI</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/File-Find-Rule-DjVu">File-Find-Rule-DjVu</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Common rules for searching DjVu files.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/File-Syslogger">File-Syslogger</a></td>
<td><a href="https://metacpan.org/author/VVELOX">VVELOX</a></td>
<td>v0.0.1</td>
<td>v0.0.2</td>
<td>Use POE to tail a file and read new lines into syslog.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/File-Temp-VarOptions">File-Temp-VarOptions</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Like File::Temp, but allowing to set options with variables</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Future-Workflow">Future-Workflow</a></td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>asynchronous workflow management using futures</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/GitHubDDL">GitHubDDL</a></td>
<td><a href="https://metacpan.org/author/MACOPY">MACOPY</a></td>
<td>0.01</td>
<td>0.01</td>
<td>GitDDL compatibility database migration utility when  hosted on GitHub</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Hash-Util-Exists-Tiny">Hash-Util-Exists-Tiny</a></td>
<td><a href="https://metacpan.org/author/AAHAZRED">AAHAZRED</a></td>
<td>0.01</td>
<td>0.04</td>
<td>Some hash helper functions related to perl&#039;s exists function.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/HealthCheck-Diagnostic-RemoteHealth">HealthCheck-Diagnostic-RemoteHealth</a></td>
<td><a href="https://metacpan.org/author/GSG">GSG</a></td>
<td>v0.1.0</td>
<td>v0.1.0</td>
<td>Get results from an HTTP HealthCheck</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/IURL-XS">IURL-XS</a></td>
<td><a href="https://metacpan.org/author/BRDUCH">BRDUCH</a></td>
<td>v0.1.0</td>
<td>v0.1.0</td>
<td>parsing URLs with zero-copy and no mallocs</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Iterator-Breathe">Iterator-Breathe</a></td>
<td><a href="https://metacpan.org/author/GENE">GENE</a></td>
<td>0.0100</td>
<td>0.0201</td>
<td>Iterate a counter up and back</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/JSON-Schema-Modern-Document-OpenAPI">JSON-Schema-Modern-Document-OpenAPI</a></td>
<td><a href="https://metacpan.org/author/ETHER">ETHER</a></td>
<td>0.001</td>
<td>0.005</td>
<td>One JSON Schema document</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Math-Ryu">Math-Ryu</a></td>
<td><a href="https://metacpan.org/author/SISYPHUS">SISYPHUS</a></td>
<td>0.01</td>
<td>0.02</td>
<td>perl interface to the ryu C library.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Module-Features-Set">Module-Features-Set</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.003</td>
<td>Features of modules that generate text tables</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/MojoX-HTTP-Async">MojoX-HTTP-Async</a></td>
<td><a href="https://metacpan.org/author/CDN">CDN</a></td>
<td>0.01</td>
<td>0.08</td>
<td>simple package to execute multiple parallel requests to the same host</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Mojolicious-Plugin-YamlRoutes">Mojolicious-Plugin-YamlRoutes</a></td>
<td><a href="https://metacpan.org/author/HDELGADO">HDELGADO</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Generates routes from a yaml file</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Net-RFC3161-Timestamp">Net-RFC3161-Timestamp</a></td>
<td><a href="https://metacpan.org/author/AKHUETTEL">AKHUETTEL</a></td>
<td>0.010</td>
<td>0.020</td>
<td>Utility functions to request RFC3161 timestamps</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/PERLSDK">PERLSDK</a></td>
<td><a href="https://metacpan.org/author/MAFEMBRAC">MAFEMBRAC</a></td>
<td>v1.0.1</td>
<td>v1.0.1</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/PensioAPI">PensioAPI</a></td>
<td><a href="https://metacpan.org/author/MAFEMBRAC">MAFEMBRAC</a></td>
<td>1.0.1</td>
<td>1.0.1</td>
<td>Integrate AltaPay gateway with Perl projects.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Pensio">Pensio</a></td>
<td><a href="https://metacpan.org/author/MAFEMBRAC">MAFEMBRAC</a></td>
<td>1.0.1</td>
<td>1.0.1</td>
<td>Integrate AltaPay gateway with Perl projects.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/RT-Extension-ReplyWithMail">RT-Extension-ReplyWithMail</a></td>
<td><a href="https://metacpan.org/author/AVERKIOS">AVERKIOS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>RT-Extension-ReplyWithMail Extension</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/RoleBundle-TinyCommons-Iterator">RoleBundle-TinyCommons-Iterator</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.004</td>
<td>0.004</td>
<td>Iterator roles</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/RoleBundle-TinyCommons-Tree">RoleBundle-TinyCommons-Tree</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.129</td>
<td>0.129</td>
<td>Roles related to object tree</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/SelectPdf">SelectPdf</a></td>
<td><a href="https://metacpan.org/author/SELECTPDF">SELECTPDF</a></td>
<td>v1.2.0</td>
<td>v1.4.0</td>
<td>Get the result of an asynchronous call.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Task-Kramerius">Task-Kramerius</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Install modules for Kramerius system.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Test-Expander">Test-Expander</a></td>
<td><a href="https://metacpan.org/author/JSF">JSF</a></td>
<td>v1.0.0</td>
<td>v1.0.5</td>
<td>Expansion of test functionalities that appear to be frequently used while testing.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Test-Mock-Object">Test-Mock-Object</a></td>
<td><a href="https://metacpan.org/author/OVID">OVID</a></td>
<td>0.1</td>
<td>0.1</td>
<td>Dead-simple mocking</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Tree-RB-XS">Tree-RB-XS</a></td>
<td><a href="https://metacpan.org/author/NERDVANA">NERDVANA</a></td>
<td>0.00_01</td>
<td>0.05</td>
<td>Red/Black Tree object withthe compatible API to Tree::RB</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/URI-Info">URI-Info</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.002</td>
<td>Extract various information from a URI (URL)</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/URI-Router">URI-Router</a></td>
<td><a href="https://metacpan.org/author/SYBER">SYBER</a></td>
<td>v0.1.0</td>
<td>v0.1.3</td>
<td>highest performance powerful URI router (URI path to value lookup) for HTTP frameworks</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/WWW-KeePassHttp">WWW-KeePassHttp</a></td>
<td><a href="https://metacpan.org/author/PETERCJ">PETERCJ</a></td>
<td>0.010</td>
<td>0.020</td>
<td>Interface with KeePass PasswordSafe through the KeePassHttp plugin</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/WebService-WsScreenshot">WebService-WsScreenshot</a></td>
<td><a href="https://metacpan.org/author/SYMKAT">SYMKAT</a></td>
<td>0.001</td>
<td>0.001</td>
<td>API client For ws-screenshot</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/WebService-YTSearch">WebService-YTSearch</a></td>
<td><a href="https://metacpan.org/author/GENE">GENE</a></td>
<td>0.0100</td>
<td>0.0302</td>
<td>Search YouTube</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/require-relative">require-relative</a></td>
<td><a href="https://metacpan.org/author/BARNEY">BARNEY</a></td>
<td>1.0.0</td>
<td>1.0.0</td>
<td>like require for relative paths</td>
</tr>
</table>
<h3>Stats</h3>
<p>Number of new CPAN distributions this period: <b>62</b></p>
<p>Number of authors releasing new CPAN distributions this period: <b>36</b></p>
<p>Authors by number of new CPAN distributions this period: </p>
<table>
<tr>
<th>No</th>
<th>Author</th>
<th>Distributions</th>
</tr>
<tr>
<td>1</td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>14</td>
</tr>
<tr>
<td>2</td>
<td><a href="https://metacpan.org/author/MAFEMBRAC">MAFEMBRAC</a></td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>4</td>
</tr>
<tr>
<td>4</td>
<td><a href="https://metacpan.org/author/ZMUGHAL">ZMUGHAL</a></td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>2</td>
</tr>
<tr>
<td>6</td>
<td><a href="https://metacpan.org/author/GENE">GENE</a></td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td><a href="https://metacpan.org/author/JLMARTIN">JLMARTIN</a></td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td><a href="https://metacpan.org/author/SACAVILIA">SACAVILIA</a></td>
<td>2</td>
</tr>
<tr>
<td>9</td>
<td><a href="https://metacpan.org/author/JDEGUEST">JDEGUEST</a></td>
<td>2</td>
</tr>
<tr>
<td>10</td>
<td><a href="https://metacpan.org/author/AVERKIOS">AVERKIOS</a></td>
<td>1</td>
</tr>
<tr>
<td>11</td>
<td><a href="https://metacpan.org/author/SYMKAT">SYMKAT</a></td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td><a href="https://metacpan.org/author/GSG">GSG</a></td>
<td>1</td>
</tr>
<tr>
<td>13</td>
<td><a href="https://metacpan.org/author/CORION">CORION</a></td>
<td>1</td>
</tr>
<tr>
<td>14</td>
<td><a href="https://metacpan.org/author/GILS">GILS</a></td>
<td>1</td>
</tr>
<tr>
<td>15</td>
<td><a href="https://metacpan.org/author/ETHER">ETHER</a></td>
<td>1</td>
</tr>
<tr>
<td>16</td>
<td><a href="https://metacpan.org/author/MACOPY">MACOPY</a></td>
<td>1</td>
</tr>
<tr>
<td>17</td>
<td><a href="https://metacpan.org/author/AAHAZRED">AAHAZRED</a></td>
<td>1</td>
</tr>
<tr>
<td>18</td>
<td><a href="https://metacpan.org/author/NERDVANA">NERDVANA</a></td>
<td>1</td>
</tr>
<tr>
<td>19</td>
<td><a href="https://metacpan.org/author/ERIAM">ERIAM</a></td>
<td>1</td>
</tr>
<tr>
<td>20</td>
<td><a href="https://metacpan.org/author/HDELGADO">HDELGADO</a></td>
<td>1</td>
</tr>
<tr>
<td>21</td>
<td><a href="https://metacpan.org/author/BARNEY">BARNEY</a></td>
<td>1</td>
</tr>
<tr>
<td>22</td>
<td><a href="https://metacpan.org/author/VVELOX">VVELOX</a></td>
<td>1</td>
</tr>
<tr>
<td>23</td>
<td><a href="https://metacpan.org/author/SYBER">SYBER</a></td>
<td>1</td>
</tr>
<tr>
<td>24</td>
<td><a href="https://metacpan.org/author/JSF">JSF</a></td>
<td>1</td>
</tr>
<tr>
<td>25</td>
<td><a href="https://metacpan.org/author/PETERCJ">PETERCJ</a></td>
<td>1</td>
</tr>
<tr>
<td>26</td>
<td><a href="https://metacpan.org/author/OVID">OVID</a></td>
<td>1</td>
</tr>
<tr>
<td>27</td>
<td><a href="https://metacpan.org/author/UTASHIRO">UTASHIRO</a></td>
<td>1</td>
</tr>
<tr>
<td>28</td>
<td><a href="https://metacpan.org/author/SANKO">SANKO</a></td>
<td>1</td>
</tr>
<tr>
<td>29</td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>1</td>
</tr>
<tr>
<td>30</td>
<td><a href="https://metacpan.org/author/SISYPHUS">SISYPHUS</a></td>
<td>1</td>
</tr>
<tr>
<td>31</td>
<td><a href="https://metacpan.org/author/SELECTPDF">SELECTPDF</a></td>
<td>1</td>
</tr>
<tr>
<td>32</td>
<td><a href="https://metacpan.org/author/BRDUCH">BRDUCH</a></td>
<td>1</td>
</tr>
<tr>
<td>33</td>
<td><a href="https://metacpan.org/author/CDN">CDN</a></td>
<td>1</td>
</tr>
<tr>
<td>34</td>
<td><a href="https://metacpan.org/author/AKHUETTEL">AKHUETTEL</a></td>
<td>1</td>
</tr>
<tr>
<td>35</td>
<td><a href="https://metacpan.org/author/NEILB">NEILB</a></td>
<td>1</td>
</tr>
<tr>
<td>36</td>
<td><a href="https://metacpan.org/author/AALAMEER">AALAMEER</a></td>
<td>1</td>
</tr>
</table>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_12">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/mjgardner/vicious-test-mockery-of-a-perl-modulino-3l4g">Vicious (test) mockery of a Perl modulino</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Mark Gardner
 on Tuesday 30 November 2021 15:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Over the past two years, I’ve gotten back into playing <a href="https://dnd.wizards.com/">Dungeons &amp; Dragons</a>, the famous tabletop fantasy role-playing game. As a software developer and musician, one of my favorite character classes to play is the <a href="https://www.dndbeyond.com/classes/bard">bard</a>, a magical and inspiring performer or wordsmith. The list of basic bardic spells includes <a href="https://www.dndbeyond.com/spells/vicious-mockery">Vicious Mockery</a>, enchanting verbal barbs that have the power to psychically damage and disadvantage an opponent <em>even if they don’t understand the words</em>. (Can you see why this is so appealing to a coder?)</p>

<p>Mocking has a role to play in software testing as well, in the form of <a href="https://en.wikipedia.org/wiki/Mock_object">mock objects</a> that simulate parts of a system that are too brittle, too slow, too complicated, or otherwise too finicky to use in reality. They enable discrete <a href="https://en.wikipedia.org/wiki/Unit_testing">unit testing</a> without relying on dependencies external to the code being tested. Mocks are great for databases, web services, or other network resources where the goal is to test what you wrote, not what’s out in “the cloud” somewhere.</p>

<p>Speaking of web services and mocking, one of my favorites is the long-running <a href="https://foaas.com/">FOAAS</a> (link has language not safe for work), a surprisingly expansive <a href="https://restfulapi.net/">RESTful</a> insult service. There’s a corresponding <a href="https://metacpan.org/pod/WebService::FOAAS">Perl client API</a>, of course, but what I was missing was a handy Perl script to call that API from the terminal command line. So I wrote the following over <a href="https://en.wikipedia.org/wiki/Thanksgiving_(United_States)">Thanksgiving</a> break, trying to keep it simple while also showing the basics of mocking such an API. It also demonstrates some newer Perl syntax and testing techniques as well as <a href="https://briandfoy.github.io/">brian d foy</a>’s <a href="https://perlmaven.com/modulino-both-script-and-module">modulino</a> concept from <em><a href="https://www.masteringperl.org/">Mastering Perl</a> (second edition, 2014)</em> that marries script and module into a self-contained <a href="https://rosettacode.org/wiki/Executable_library">executable library</a>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight perl"><code><span class="c1">#!/usr/bin/env perl</span>

<span class="nb">package</span> <span class="nn">Local::</span><span class="nv">CallFOAAS</span><span class="p">;</span> <span class="c1"># this is a modulino</span>
<span class="k">use</span> <span class="nn">Test2::</span><span class="nv">V0</span><span class="p">;</span> <span class="c1"># enables strict, warnings, utf8</span>

<span class="c1"># declare all the new stuff we're using</span>
<span class="k">use</span> <span class="nv">feature</span> <span class="sx">qw(say state)</span><span class="p">;</span>
<span class="k">use</span> <span class="nv">experimental</span> <span class="sx">qw(isa postderef signatures)</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Feature::Compat::</span><span class="nv">Try</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Syntax::</span><span class="nv">Construct</span> <span class="sx">qw(non-destructive-substitution)</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">WebService::</span><span class="nv">FOAAS</span> <span class="p">();</span>
<span class="k">use</span> <span class="nn">Package::</span><span class="nv">Stash</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Exception::</span><span class="nv">Class</span> <span class="p">(</span>
    <span class="s">NoMethodException</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s">alias</span> <span class="o">=&gt;</span> <span class="p">'</span><span class="s1">throw_no_method</span><span class="p">',</span>
        <span class="s">fields</span> <span class="o">=&gt;</span> <span class="p">'</span><span class="s1">method</span><span class="p">',</span>
    <span class="p">},</span>
    <span class="s">ServiceException</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s">alias</span> <span class="o">=&gt;</span> <span class="p">'</span><span class="s1">throw_service</span><span class="p">'</span> <span class="p">},</span>
<span class="p">);</span>

<span class="k">my</span> <span class="nv">$foaas</span> <span class="o">=</span> <span class="nn">Package::</span><span class="nv">Stash</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">('</span><span class="s1">WebService::FOAAS</span><span class="p">');</span>

<span class="k">my</span> <span class="nv">$run_as</span> <span class="o">=</span>
    <span class="o">!!</span><span class="nv">$ENV</span><span class="p">{</span><span class="nv">CPANTEST</span><span class="p">}</span> <span class="p">?</span> <span class="p">'</span><span class="s1">test</span><span class="p">'</span>
  <span class="p">:</span> <span class="o">!</span><span class="nb">defined</span> <span class="nb">scalar</span> <span class="nb">caller</span> <span class="p">?</span> <span class="p">'</span><span class="s1">run</span><span class="p">'</span>
  <span class="p">:</span> <span class="nb">undef</span><span class="p">;</span>
<span class="nv">__PACKAGE__</span> <span class="o">-&gt;</span><span class="nv">$run_as</span><span class="p">(</span><span class="nv">@ARGV</span><span class="p">)</span> <span class="k">if</span> <span class="nb">defined</span> <span class="nv">$run_as</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">run</span> <span class="p">( $class, @args ) {</span>
    <span class="nv">try</span> <span class="p">{</span> <span class="nv">say</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">call_method</span><span class="p">(</span><span class="nv">@args</span><span class="p">)</span> <span class="p">}</span>
    <span class="nv">catch</span> <span class="p">(</span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">die</span> <span class="p">'</span><span class="s1">No method </span><span class="p">',</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="nv">method</span><span class="p">,</span> <span class="p">"</span><span class="se">\n</span><span class="p">"</span>
          <span class="k">if</span> <span class="nv">$e</span> <span class="nv">isa</span> <span class="nv">NoMethodException</span><span class="p">;</span>
        <span class="nb">die</span> <span class="p">'</span><span class="s1">Service error: </span><span class="p">',</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="nv">error</span><span class="p">,</span> <span class="p">"</span><span class="se">\n</span><span class="p">"</span>
          <span class="k">if</span> <span class="nv">$e</span> <span class="nv">isa</span> <span class="nv">ServiceException</span><span class="p">;</span>
        <span class="nb">die</span> <span class="p">"</span><span class="si">$e</span><span class="se">\n</span><span class="p">";</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># Utilities</span>

<span class="k">sub </span><span class="nf">methods</span> <span class="p">($)</span> <span class="p">{</span>
    <span class="nv">state</span> <span class="nv">@methods</span> <span class="o">=</span> <span class="nb">sort</span> <span class="nb">map</span> <span class="sr">s/^foaas_(.+)/$1/r</span><span class="p">,</span>
      <span class="nb">grep</span> <span class="sr">/^foaas_/</span><span class="p">,</span> <span class="nv">$foaas</span><span class="o">-&gt;</span><span class="nv">list_all_symbols</span><span class="p">('</span><span class="s1">CODE</span><span class="p">');</span>
    <span class="k">return</span> <span class="nv">@methods</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">call_method</span> <span class="p">( $class, $method = '', @args ) {</span>
    <span class="nv">state</span> <span class="nv">%methods</span> <span class="o">=</span> <span class="nb">map</span> <span class="p">{</span> <span class="vg">$_</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">}</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">methods</span><span class="p">();</span>
    <span class="nv">throw_no_method</span><span class="p">(</span> <span class="s">method</span> <span class="o">=&gt;</span> <span class="nv">$method</span> <span class="p">)</span>
      <span class="k">unless</span> <span class="nv">$methods</span><span class="p">{</span><span class="nv">$method</span><span class="p">};</span>
    <span class="k">return</span> <span class="k">do</span> <span class="p">{</span>
        <span class="nv">try</span> <span class="p">{</span> <span class="nv">$foaas</span><span class="o">-&gt;</span><span class="nv">get_symbol</span><span class="p">("</span><span class="s2">&amp;</span><span class="si">$method</span><span class="p">")</span><span class="o">-&gt;</span><span class="p">(</span><span class="nv">@args</span><span class="p">)</span> <span class="p">}</span>
        <span class="nv">catch</span> <span class="p">(</span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span> <span class="nv">throw_service</span><span class="p">(</span> <span class="s">error</span> <span class="o">=&gt;</span> <span class="nv">$e</span> <span class="p">)</span> <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="c1"># Testing</span>

<span class="k">sub </span><span class="nf">test</span> <span class="p">( $class, @ ) {</span>
    <span class="nv">state</span> <span class="nv">$stash</span> <span class="o">=</span> <span class="nn">Package::</span><span class="nv">Stash</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="nv">$class</span><span class="p">);</span>
    <span class="nv">state</span> <span class="nv">@tests</span> <span class="o">=</span> <span class="nb">sort</span> <span class="nb">grep</span> <span class="sr">/^_test_/</span><span class="p">,</span>
      <span class="nv">$stash</span><span class="o">-&gt;</span><span class="nv">list_all_symbols</span><span class="p">('</span><span class="s1">CODE</span><span class="p">');</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$test</span> <span class="p">(</span><span class="nv">@tests</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">subtest</span> <span class="nv">$test</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
            <span class="nv">try</span> <span class="p">{</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">$test</span><span class="p">()</span> <span class="p">}</span>
            <span class="nv">catch</span> <span class="p">(</span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span> <span class="nv">diag</span> <span class="nv">$e</span> <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="nv">done_testing</span><span class="p">();</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">_test_can</span> <span class="p">($class) {</span>
    <span class="nv">state</span> <span class="nv">@subs</span> <span class="o">=</span> <span class="sx">qw(run call_method methods test)</span><span class="p">;</span>
    <span class="nv">can_ok</span><span class="p">(</span> <span class="nv">$class</span><span class="p">,</span> <span class="o">\</span><span class="nv">@subs</span><span class="p">,</span> <span class="p">"</span><span class="s2">can do: </span><span class="si">@subs</span><span class="p">"</span> <span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">_test_methods</span> <span class="p">($class) {</span>
    <span class="k">my</span> <span class="nv">$mock</span> <span class="o">=</span> <span class="nv">mock</span> <span class="p">'</span><span class="s1">WebService::FOAAS</span><span class="p">'</span> <span class="o">=&gt;</span> <span class="p">(</span> <span class="s">track</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">);</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$method</span> <span class="p">(</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">methods</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nv">override</span><span class="p">(</span> <span class="nv">$method</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">);</span>

        <span class="nv">ok</span> <span class="nv">lives</span> <span class="p">{</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">call_method</span><span class="p">(</span><span class="nv">$method</span><span class="p">)</span> <span class="p">},</span>
          <span class="p">"</span><span class="si">$method</span><span class="s2"> lives</span><span class="p">";</span>
        <span class="nv">ok</span> <span class="nb">scalar</span> <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nv">sub_tracking</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$method</span><span class="p">}</span><span class="o">-&gt;</span><span class="err">@</span><span class="o">*</span><span class="p">,</span>
          <span class="p">"</span><span class="si">$method</span><span class="s2"> called</span><span class="p">";</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">_test_service_failure</span> <span class="p">($class) {</span>
    <span class="k">my</span> <span class="nv">$mock</span> <span class="o">=</span> <span class="nv">mock</span> <span class="p">'</span><span class="s1">WebService::FOAAS</span><span class="p">';</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$method</span> <span class="p">(</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">methods</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nv">override</span><span class="p">(</span> <span class="nv">$method</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span> <span class="nb">die</span> <span class="p">'</span><span class="s1">mocked</span><span class="p">'</span> <span class="p">}</span> <span class="p">);</span>

        <span class="k">my</span> <span class="nv">$exception</span> <span class="o">=</span>
          <span class="nv">dies</span> <span class="p">{</span> <span class="nv">$class</span><span class="o">-&gt;</span><span class="nv">call_method</span><span class="p">(</span><span class="nv">$method</span><span class="p">)</span> <span class="p">};</span>
        <span class="nv">isa_ok</span> <span class="nv">$exception</span><span class="p">,</span> <span class="p">['</span><span class="s1">ServiceException</span><span class="p">'],</span>
          <span class="p">"</span><span class="si">$method</span><span class="s2"> throws ServiceException on failure</span><span class="p">";</span>
        <span class="nv">like</span> <span class="nv">$exception</span><span class="o">-&gt;</span><span class="nv">error</span><span class="p">,</span> <span class="sx">qr/^mocked/</span><span class="p">,</span>
          <span class="p">"</span><span class="s2">correct error in </span><span class="si">$method</span><span class="s2"> exception</span><span class="p">";</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="mi">1</span><span class="p">;</span>
</code></pre>

</div>



<p>Let’s walk through the code above.</p>

<h2>
  <a href="#preliminaries">
  </a>
  Preliminaries
</h2>

<p>First, there’s a generic <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang line</a> to indicate that Unix and Linux systems should use the <code>perl</code> executable found in the user’s PATH via the <code>env</code> command. I declare a package name (<a href="https://phoenixtrap.com/2021/04/13/avoid-cpan-conflicts-in-your-personal-perl-modules/">in the Local:: namespace</a>) so as not to pollute the default <code>main</code> package of other scripts that might want to <code>require</code> this as a module. Then I use the <a href="https://metacpan.org/pod/Test2::V0">Test2::V0 bundle</a> from <a href="https://metacpan.org/pod/Test2::Suite">Test2::Suite</a> since the embedded testing code uses many of its functions. This also has the side effect of enabling the <a href="https://perldoc.perl.org/strict">strict</a>, <a href="https://perldoc.perl.org/warnings">warnings</a>, and <a href="https://perldoc.perl.org/utf8">utf8</a> pragmas, so there’s no need to explicitly <code>use</code> them here.</p>

<p>(Why <a href="https://metacpan.org/pod/Test2">Test2</a> instead of <a href="https://metacpan.org/pod/Test::More">Test::More</a> and its derivatives and add-ons? Both are <a href="https://metacpan.org/author/EXODIST">maintained by the same author</a>, who recommends the former. I’m seeing more and more modules using it, so I thought this would be a great opportunity to learn.)</p>

<p>I then declare all the new-ish Perl features I’d like to use that need to be explicitly enabled so as not to sacrifice <a href="https://perldoc.perl.org/perlpolicy#BACKWARD-COMPATIBILITY-AND-DEPRECATION">backward compatibility</a> with older versions of Perl 5. As of this writing, some of these features (the <a href="https://perldoc.perl.org/perlop#Class-Instance-Operator"><code>isa</code> class instance operator</a>, named argument <a href="https://perldoc.perl.org/perlsub#Signatures">subroutine signatures</a>, and <a href="https://perldoc.perl.org/perlsyn#Try-Catch-Exception-Handling"><code>try</code>/<code>catch</code> exception handling</a> syntax) are considered <a href="https://perldoc.perl.org/experimental"><code>experimental</code></a>, with the latter enabled in older versions of Perl via the <a href="https://metacpan.org/pod/Feature::Compat::Try">Feature::Compat::Try</a> module. The friendlier <a href="https://perldoc.pl/perlref#Postfix-Dereference-Syntax">postfix dereferencing</a> syntax was <a href="https://perldoc.perl.org/perl5240delta#Postfix-dereferencing-is-no-longer-experimental">mainlined in Perl version 5.24</a>, but versions 5.20 and 5.22 still need it experimental. Finally, I <code>use Syntax::Construct</code> to announce the <code>/r</code> flag for non-destructive regular expression <a href="https://perldoc.perl.org/perlop#s/PATTERN/REPLACEMENT/msixpodualngcer">text substitutions</a> <a href="https://perldoc.perl.org/perl5140delta#Non-destructive-substitution">introduced in version 5.14</a>.</p>

<p>Next, I bring in the aforementioned FOAAS Perl API without importing any of its functions, <a href="https://metacpan.org/pod/Package::Stash">Package::Stash</a> to make <a href="https://en.wikipedia.org/wiki/Metaprogramming">metaprogramming</a> easier, and a couple of <a href="https://metacpan.org/pod/Exception::Class">exception classes</a> so that the command line function and other consumers might better tell what caused a failure. In preparation for the methods below dynamically discovering what functions are provided by <a href="https://metacpan.org/pod/WebService::FOAAS">WebService::FOAAS</a>, I <a href="https://metacpan.org/pod/Package::Stash#new-%24package_name">gather up</a> its symbol table (or stash) into the <code>$foaas</code> variable.</p>

<p>The next block determines how, if at all, I’m going to run the code as a script. If the <code>CPANTEST</code> environment variable is set, I’ll call the <code>test</code> class method <code>sub</code>, but if there’s no subroutine <a href="https://perldoc.perl.org/functions/caller">calling</a> me I’ll execute the <code>run</code> class method. Either will receive the <a href="https://perldoc.perl.org/variables/@ARGV">command line arguments from <code>@ARGV</code></a>. If neither of these conditions is true, do nothing; the rest of the code is method declarations.</p>

<h2>
  <a href="#modulino-methods-metaprogramming-and-exceptions">
  </a>
  Modulino methods, metaprogramming, and exceptions
</h2>

<p>The first of these is the <code>run</code> method. It’s a thin wrapper around the <code>call_method</code> class method detailed below, either outputting its result or <code>die</code>ing with an appropriate error depending on the class of exception thrown. Although I chose not to write tests for this output, future tests might call this method and catch these rethrown exceptions to match against them. The messages end with a <code>\n</code> newline character so <code>die</code> knows not to append the current script line number.</p>

<p>Next is a utility method called <code>methods</code> that uses Package::Stash’s <code>list_all_symbols</code> to retrieve the names of all named <code>CODE</code> blocks (i.e., <code>sub</code>s) from WebService::FOAAS’s symbol table. Reading from right to left, these are then filtered with <code>grep</code> to only find those <a href="https://metacpan.org/pod/WebService::FOAAS#AVAILABLE-METHODS">beginning in <code>foaas_</code></a> and then transformed with <code>map</code> to remove that prefix. The list is then <code>sort</code>ed and stored in a <code>state</code> variable and returned so it need not be initialized again.</p>

<p>(As an aside, although <code>perlcritic</code> sternly warns against it I’ve chosen the expression forms of <code>grep</code> and <code>map</code> here over their <a href="https://metacpan.org/pod/Perl::Critic::Policy::BuiltinFunctions::RequireBlockGrep">block</a> <a href="https://metacpan.org/pod/Perl::Critic::Policy::BuiltinFunctions::RequireBlockMap">forms</a> for simplicity’s sake. It’s OK to <a href="https://metacpan.org/pod/Perl::Critic#BENDING-THE-RULES">bend the rules</a> if you have a good reason.)</p>

<p><code>sub call_method</code> is where the real action takes place. Its parameters are the class that called it, the name of a FOAAS <code>$method</code> (defaulted to the empty string), and an array of optional arguments in <code>@args</code>. I build a hash or associative array from the earlier <code>methods</code> method which I then use to see if the passed method name is one I know about. If not, I throw a <code>NoMethodException</code> using the <code>throw_no_method</code> alias function <a href="https://metacpan.org/pod/Exception::Class#DECLARING-EXCEPTION-CLASSES">created when I used Exception::Class</a> at the beginning. Using a function instead of <code>NoMethodException-&gt;throw()</code> means that it’s checked at compile time rather than runtime, catching typos.</p>

<p>I get the subroutine (denoted by a <code>&amp;</code> sigil) named by <code>$method</code> from the <code>$foaas</code> stash and pass it any further received arguments from <code>@args</code>. If that WebService::FOAAS subroutine throws an exception it’ll be caught and re-thrown as a <code>ServiceException</code>; otherwise <code>call_method</code> returns the result. It’s up to the caller to determine what, if anything, to do with that result or any thrown exceptions.</p>

<h2>
  <a href="#testing-the-modulino-with-mocks">
  </a>
  Testing the modulino with mocks
</h2>

<p>This is where I start using those <a href="https://metacpan.org/pod/Test2::Suite#Test2::V#">Test2::Suite tools</a> I mentioned at the beginning. The <code>test</code> class method starts by building a filtered list of all <code>sub</code>s beginning with <code>_test_</code> in the current class, much like <code>methods</code> did above with WebService::FOAAS. I then loop through that list of <code>sub</code>s, running each as a <a href="https://metacpan.org/pod/Test2::V0#SUBTEST"><code>subtest</code></a> containing a class method with any exceptions <a href="https://metacpan.org/pod/Test2::Tools::Basic#diag(@messages)">reported as diagnostics</a>.</p>

<p>The rest of the modulino is subtest methods, starting with a simple <code>_test_can</code> sanity check for the public methods in the class. Following that is <code>_test_methods</code>, which starts by <code>mock</code>ing the WebService::FOAAS package and telling Test2::Mock I want to <code>track</code> any added, overridden, or set <code>sub</code>s. I then loop through all the method names returned by the <code>methods</code> class method, <code>override</code>ing each one to return a simple true value. I then test passing those names to <code>call_method</code> and use the hash reference returned by <code>sub_tracking</code> to check that the overridden <code>sub</code> was called. This seems a lot simpler than the <a href="https://metacpan.org/pod/Test::Builder">Test::Builder</a>-based mocking libraries I’ve tried like <a href="https://metacpan.org/pod/Test::MockModule">Test::MockModule</a> and <a href="https://metacpan.org/pod/Test::MockObject">Test::MockObject</a>.</p>

<p><code>_test_service_failure</code> acts in much the same way, checking that <code>call_method</code> correctly throws <code>ServiceException</code>s if the wrapped WebService::FOAAS function <code>die</code>s. The main difference is that the mocked WebService::FOAAS <code>sub</code>s are now overridden with a code reference (<code>sub { die 'mocked' }</code>), which <code>call_method</code> uses to populate the rethrown <code>ServiceException</code>’s <code>error</code> field.</p>

<h2>
  <a href="#wrapping-up">
  </a>
  Wrapping up
</h2>

<p>With luck, this article has given you some ideas, whether it’s in making scripts (perhaps legacy code) testable to improve them, or writing better unit tests that mock dependencies, or delving a little into metaprogramming so you can dynamically support and test new features of said dependencies. I hope you haven’t come away too offended, at least. Let me know in the comments what you think.</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_13">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/540.html">#540 - 24 Pull Requests</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 29 November 2021 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi there</p>
<p>Did you participate in <strong>Hacktoberfest 2021</strong>?</p>
<p>If not then you have one more chance to participate in the global event <a href="https://24pullrequests.com">24 Pull Requests</a>. Participation is simple, you just have to submit one pull request each day between 1st Dec 2021 and 24th Dec 2021. It is one of my favourite events. I have participated in the event each year, without a break, since 2015. I was introduced to it by <a href="http://blogs.perl.org/users/neilb/2015/11/24-pull-requests.html">Neil Bowers</a>. Last year I was going through rough patch so, unfortunately, I had to skip it. My best performance was in the year 2018 when I contributed <strong>125 pull requests</strong> in the first 24 days of December. If I am not mistaken then the <strong>24 Pull Requests</strong> event is little more relaxed as compare to <strong>Hacktoberfest</strong>. You don't have to submit a pull request every day. Instead, you can submit in bulk one day and then take a break. However, make sure you have submitted at least 24 pull requests by the end of play on 24th December.</p>
<p>Happy Hacking !!!</p>
<p>Do you follow the much-discussed <strong>Perl</strong> project <strong>Corinna</strong>?</p>
<p>The project is run by <strong>Curtis</strong> and his dedicated team of experts. I came across a <a href="https://ovid.github.io/articles/why-is-perl-not-putting-moose-in-the-core.html">blog post</a> by <strong>Curtis</strong> talking about "<strong>Why is Perl not putting Moose in the core?</strong>" There is a bold statement in the post in response to the question "<strong>What’s an Object in Perl?</strong>" and it is "<strong>Perl knows nothing about OOP. It doesn’t know what objects are.</strong>"</p>
<p><strong>Curtis</strong> doesn't say things without a reason. Please read the full blog post for more informations. I am one of the biggest followers of <strong>Curtis</strong> and never miss his posts.</p>
<p>If you remember, I mentioned <strong>Advent Calendars</strong> in the editorial of the weekly newsletter edition <a href="https://www.perlweekly.com/archive/536.html">#536</a>. Ever since then, I have noticed lots of activities in the <strong>Perl</strong> and <strong>Raku</strong> communities about <strong>Advent Calendars</strong>. I am confident this year we are going to have another fun filled <strong>Advent Calendar</strong>.</p>
<p>Last but not least, <a href="https://theweeklychallenge.org">The Weekly Challenge</a> (also known as <strong>Perl Weekly Challenge</strong>) is going to complete <strong>1000 days</strong> on <strong>18th December 2021</strong>. To celebrate the day, the team is running a <strong>FREE T-shirt</strong> campaign. If you are interested in knowing about it then please check out the <a href="https://theweeklychallenge.org/blog/1000-days">blog post</a>.</p>
<p>Stay safe and avoid the new <strong>COVID-19</strong> variant <strong>Omicron</strong>.</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_14">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/dancer2-install">Dancer2: Install Perl, editor, Dancer2</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Monday 29 November 2021 09:30</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>
Part of the Dancer2 video course available both to <a href="/pro">Pro</a> subscribers and attendees of the <a href="https://leanpub.com/c/dancer">Perl Dancer course</a> on Leanpub.
<p>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_15">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2021/11/28#pwc140">A Binary Addition Simulation / Nth from a Sorted Multiplication: Table The Weekly Challenge 140</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 28 November 2021 17:16</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from The Weekly Challenge problem statement and demonstrate 
the working solution.</em></p>

<h2>Part 1</h2>

<p><em>You are given two decimal-coded binary numbers, $a and $b. Write a script to simulate the
addition of the given binary numbers.</em> </p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
sub add_binary{
    my($x, $y) = @_;
    my $sum = ""; 
    my @a = reverse(split(//, $x));            
    my @b = reverse(split(//, $y));            
    if(@b > @a){
        my @c = @b;
        @b = @a;
        @a = @c;   
    } 
    my $carry = 0; 
    for(my $d = 0; $d <= @a - 1; $d++){ 
        my $d0 = $a[$d]; 
        my $d1 = $b[$d];
        if($d1){
            $sum = "0$sum", $carry = 0 if $d0 == 1 && $d1 == 1 && $carry == 1;  
            $sum = "1$sum", $carry = 0 if $d0 == 1 && $d1 == 0 && $carry == 0; 
            $sum = "0$sum", $carry = 1 if $d0 == 1 && $d1 == 1 && $carry == 0; 
            $sum = "0$sum", $carry = 1 if $d0 == 0 && $d1 == 1 && $carry == 1; 
            $sum = "0$sum", $carry = 0 if $d0 == 0 && $d1 == 0 && $carry == 0; 
            $sum = "1$sum", $carry = 0 if $d0 == 0 && $d1 == 0 && $carry == 1; 
            $sum = "0$sum", $carry = 1 if $d0 == 1 && $d1 == 0 && $carry == 1; 
            $sum = "1$sum", $carry = 0 if $d0 == 0 && $d1 == 1 && $carry == 0; 
        } 
        else{
            $sum = "0$sum", $carry = 1, next if $d0 == 1 && $carry == 1;  
            $sum = "1$sum", $carry = 0, next if $d0 == 0 && $carry == 1;  
            $sum = "0$sum", $carry = 0, next if $d0 == 0 && $carry == 0;  
            $sum = "1$sum", $carry = 0, next if $d0 == 1 && $carry == 0;  
        }  
    } 
    $sum = "$carry$sum" if $carry == 1;  
    return $sum; 
}

MAIN:{
    print add_binary(11, 1) . "\n"; 
    print add_binary(101, 1) . "\n"; 
    print add_binary(100, 11) . "\n"; 
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
100
110
111
</code></pre>

<h3>Notes</h3>

<p>I have an unusual fondness for Perl's right hand conditional. But that is pretty obvious 
from the way I wrote this, right? </p>

<h2>Part 2</h2>

<p><em>You are given 3 positive integers, $i, $j and $k. Write a script to print the $kth 
element in the sorted multiplication table of $i and $j.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
sub nth_from_table{
    my($i, $j, $k) = @_;
    my @table;
    for my $x (1 .. $i){
        for my $y (1 .. $j){
            push @table, $x * $y; 
        }  
    }  
    return (sort {$a <=> $b} @table)[$k - 1];   
} 

MAIN:{
    print nth_from_table(2, 3, 4) . "\n";  
    print nth_from_table(3, 3, 6) . "\n";  
} 
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-2.pl 
3
4
</code></pre>

<h3>Notes</h3>

<p>Full Disclosure: At first I wanted to do this in some convoluted way for fun. After
experimenting with, like, nested <code>map</code>s for a few minutes I lost all interest in "fun" and
just went with a couple of <code>for</code> loops!</p>

<h2>References</h2>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-140/">Challenge 140</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_16">
            <div class="card-header">
              <h2 class="card-title"><a href="https://news.perlfoundation.org/post/maintaining_perl5_tony_cook_oct_2021">Maintaining Perl 5 Core (Tony Cook): October 2021</a></h2>
<a href="https://news.perlfoundation.org/" class="badge badge-primary" style="float: left">Perl Foundation News</a>

              <p class="text-right"><small>Published by Jason A. Crome
 on Sunday 28 November 2021 17:01</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
   
     
     <p>Approximately 25 tickets were reviewed, and 3 patches were
applied.
```
[Hours]         [Activity]
  0.83          #12957 review discussion (mentioned in #19182), review
                sdbm source, comment
  1.27          #18958 look over code
                #18958 review code and comment
                #18958 comment
  1.59          #19020 research - should the shell be trapping in this
                case?  haven’t found anything appropriate, also look at
                dash source
                #19020 more dash source, comment
  2.74          #19121 research and comment
                #19121 re-work
                #19121 consider alternative for the delimiter, looking
                over code
                #19121 look at a :crlf issue - is it a problem elsewhere
                cpan #133233
  0.30          #19122 apply to blead, perldelta
  1.27          #19124 debugging
  0.30          #19166 review
  0.45          #19171 review and briefly comment
                #19171 review latest changes and apply to blead
  1.22          #19172 review and a couple of brief comments
  0.30          #19174 review discussion, testing, research and comment
  2.42          #19182 review, comments
                #19182 review changes, comment
                #19182 review, testing, brief comment
  0.43          #19184 review, consider if feature regen needs some re-
                work
                #19184 briefly review
  0.60          #19186 review, research and comment
  0.62          #19187 review and approve
  0.63          #19190 review, research, briefly comment
  0.91          #19191 review and apply, also supply patch upstream and
                update customizations
                #19191 comment
  0.43          #19194 review and approve
  2.18          #19197 review, research (who wrote that test? it was me)
                and comment
                #19197 review new commits
  9.56          #19198 debugging and comment
                #19198 debugging, work on a fix, simple testing, comment
                #19198 recheck, testing, try to find good place to add
                regression test, minor perl5db.t re-work
                #19198 minor cleanup and document DebugWrap in perl5db.t,
                write test, test the test with and without the fix,
                testing
                #19198 fix global destruction issue from fix, debug
                another threads only failure and work out a fix
                #19198 polish, documentation, more testing, update PR
  0.92          review coverity reported defects, create PR #19200
  1.42          :utf8 more on re-working fill/readdelim
  0.65          :utf8 more readdelim re-work
  1.58          :utf8 work on re-working fill
  0.17          github notifications</p>

<h1>  1.07          security list: research, testing, comment</h1>

<p>33.86 hours total
```</p>

    
         </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_17">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2021/11/ccclxix-12-great-cpan-modules-released.html">(ccclxix) 12 great CPAN modules released last week</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 27 November 2021 17:56</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Updates for <i>great CPAN modules</i> released last week. A module is considered <i>great</i> if its favorites count is greater or equal than 12.<br /><br /><ol><li><a href="https://metacpan.org/release/OLIVER/App-Netdisco-2.051005" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">App::Netdisco</span></b></a> - An open source web-based network management tool. <ul>  <li>Version: <strong>2.051005</strong> on 2021-11-25</li>  <li>Votes: 13</li>  <li>Previous version: 2.051001 was 11 days before</li></ul></li><li><a href="https://metacpan.org/release/GUGOD/App-perlbrew-0.93" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">App::perlbrew</span></b></a> - Manage perl installations in your $HOME <ul>  <li>Version: <strong>0.93</strong> on 2021-11-22</li>  <li>Votes: 167</li>  <li>Previous version: 0.92 was 7 months, 7 days before</li></ul></li><li><a href="https://metacpan.org/release/DWHEELER/App-Sqitch-v1.2.0" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">App::Sqitch</span></b></a> - Sensible database change management <ul>  <li>Version: <strong>v1.2.0</strong> on 2021-11-20</li>  <li>Votes: 38</li>  <li>Previous version: v1.1.0 was 1 year, 6 months before</li></ul></li><li><a href="https://metacpan.org/release/DROLSKY/Code-TidyAll-0.80" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Code::TidyAll</span></b></a> - Engine for tidyall, your all-in-one code tidier and validator <ul>  <li>Version: <strong>0.80</strong> on 2021-11-26</li>  <li>Votes: 36</li>  <li>Previous version: 0.78 was 1 year, 7 months, 1 day before</li></ul></li><li><a href="https://metacpan.org/release/ANDK/CPAN-2.29" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">CPAN</span></b></a> - query, download and build perl modules from CPAN sites <ul>  <li>Version: <strong>2.29</strong> on 2021-11-23</li>  <li>Votes: 33</li>  <li>Previous version: 2.28 was 1 year, 5 months, 10 days before</li></ul></li><li><a href="https://metacpan.org/release/BINGOS/CPANPLUS-0.9914" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">CPANPLUS</span></b></a> - Ameliorated interface to the CPAN <ul>  <li>Version: <strong>0.9914</strong> on 2021-11-23</li>  <li>Votes: 12</li>  <li>Previous version: 0.9912 was 3 months, 2 days before</li></ul></li><li><a href="https://metacpan.org/release/BINGOS/Module-CoreList-5.20211120" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Module::CoreList</span></b></a> - what modules shipped with versions of perl <ul>  <li>Version: <strong>5.20211120</strong> on 2021-11-21</li>  <li>Votes: 37</li>  <li>Previous version: 5.20211020 was 1 month before</li></ul></li><li><a href="https://metacpan.org/release/JHTHORSEN/Mojo-mysql-1.25" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Mojo::mysql</span></b></a> - Mojolicious and Async MySQL/MariaDB <ul>  <li>Version: <strong>1.25</strong> on 2021-11-22</li>  <li>Votes: 35</li>  <li>Previous version: 1.24 was 1 month, 17 days before</li></ul></li><li><a href="https://metacpan.org/release/JHTHORSEN/Mojolicious-Plugin-OpenAPI-5.02" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Mojolicious::Plugin::OpenAPI</span></b></a> - OpenAPI / Swagger plugin for Mojolicious <ul>  <li>Version: <strong>5.02</strong> on 2021-11-21</li>  <li>Votes: 41</li>  <li>Previous version: 5.01 was 1 day before</li></ul></li><li><a href="https://metacpan.org/release/PEVANS/Object-Pad-0.58" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Object::Pad</span></b></a> - a simple syntax for lexical slot-based objects <ul>  <li>Version: <strong>0.58</strong> on 2021-11-25</li>  <li>Votes: 22</li>  <li>Previous version: 0.57 was 7 days before</li></ul></li><li><a href="https://metacpan.org/release/VANSTYN/RapidApp-1.3500" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">RapidApp</span></b></a> - Turnkey ajaxy webapps <ul>  <li>Version: <strong>1.3500</strong> on 2021-11-22</li>  <li>Votes: 29</li>  <li>Previous version: 1.3404 was 2 months, 5 days before</li></ul></li><li><a href="https://metacpan.org/release/ETHER/Try-Tiny-0.31" target="_blank"><b><span style="font-family: Courier New, Courier, monospace;">Try::Tiny</span></b></a> - Minimal try/catch with proper preservation of $@ <ul>  <li>Version: <strong>0.31</strong> on 2021-11-23</li>  <li>Votes: 168</li>  <li>Previous version: 0.30 was 3 years, 11 months, 2 days before</li></ul></li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_18">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2021/11/cdxcii-metacpan-weekly-report-dbdpg.html">(cdxcii) metacpan weekly report - DBD::Pg</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 27 November 2021 17:54</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>This is the weekly favourites list of CPAN distributions. Votes count: 24</p><p>Week's winner: <b><a href="https://metacpan.org/module/DBD::Pg" target="_blank">DBD::Pg (+2)</a></b></p><p>Build date: 2021/11/27 16:53:53 GMT</p><br/><p>Clicked for <u>first time</u>:</p><ul><li><a href="https://metacpan.org/module/Cookie" target="_blank">Cookie</a> - Cookie Object with Encryption or Signature</li><li><a href="https://metacpan.org/module/DBIx::Spreadsheet" target="_blank">DBIx::Spreadsheet</a> - Query a spreadsheet with SQL</li><li><a href="https://metacpan.org/module/Dist::Zilla::MintingProfile::AlienBuild" target="_blank">Dist::Zilla::MintingProfile::AlienBuild</a> - A minimal Dist::Zilla minting profile for Aliens</li><li><a href="https://metacpan.org/module/Perl::Critic::RENEEB" target="_blank">Perl::Critic::RENEEB</a> - A collection of handy Perl::Critic policies</li><li><a href="https://metacpan.org/module/Text::CleanFragment" target="_blank">Text::CleanFragment</a> - clean up text to use as URL fragment or filename</li></ul><br/><p><u>Increasing</u> its reputation:</p><ul><li><a href="https://metacpan.org/module/App::cpanminus" target="_blank">App::cpanminus</a> (+1=261)</li><li><a href="https://metacpan.org/module/App::plx" target="_blank">App::plx</a> (+1=5)</li><li><a href="https://metacpan.org/module/Coro" target="_blank">Coro</a> (+1=72)</li><li><a href="https://metacpan.org/module/DateTime" target="_blank">DateTime</a> (+1=204)</li><li><a href="https://metacpan.org/module/DBD::Pg" target="_blank">DBD::Pg</a> (+2=87)</li><li><a href="https://metacpan.org/module/DBI" target="_blank">DBI</a> (+1=251)</li><li><a href="https://metacpan.org/module/MCE" target="_blank">MCE</a> (+1=88)</li><li><a href="https://metacpan.org/module/mod_perl" target="_blank">mod_perl</a> (+1=21)</li><li><a href="https://metacpan.org/module/Mojolicious::Plugin::Directory::Stylish" target="_blank">Mojolicious::Plugin::Directory::Stylish</a> (+1=2)</li><li><a href="https://metacpan.org/module/Object::Pad" target="_blank">Object::Pad</a> (+1=22)</li><li><a href="https://metacpan.org/module/Parallel::ForkManager" target="_blank">Parallel::ForkManager</a> (+1=89)</li><li><a href="https://metacpan.org/module/perl" target="_blank">perl</a> (+1=385)</li><li><a href="https://metacpan.org/module/POE" target="_blank">POE</a> (+1=51)</li><li><a href="https://metacpan.org/module/Statocles" target="_blank">Statocles</a> (+1=31)</li><li><a href="https://metacpan.org/module/StreamFinder" target="_blank">StreamFinder</a> (+1=4)</li><li><a href="https://metacpan.org/module/Test::Perl::Critic::Progressive" target="_blank">Test::Perl::Critic::Progressive</a> (+1=3)</li><li><a href="https://metacpan.org/module/UNIVERSAL::Object" target="_blank">UNIVERSAL::Object</a> (+1=12)</li><li><a href="https://metacpan.org/module/YAML" target="_blank">YAML</a> (+1=66)</li></ul>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_19">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2021/11/dxi-stackoverflow-perl-report.html">(dxi) stackoverflow perl report</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 27 November 2021 17:52</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>These are the ten most rated questions at <a href="http://www.stackoverflow.com">Stack Overflow</a> last week.<br />Between brackets: [<b>question score</b> / answers count]<br />Build date: 2021-11-27 15:58:04 GMT</p><hr /><ol><li><a href="http://stackoverflow.com/questions/70100892" target="_blank">Understanding the difference in behaviour between perl's assign-or operator and the combination of assignment and logical-or operators</a> - [<b>3</b>/2]</li><li><a href="http://stackoverflow.com/questions/70076261" target="_blank">Mojo::UserAgent fails to verify certificate, where LWP::UserAgent succeeds</a> - [<b>2</b>/1]</li><li><a href="http://stackoverflow.com/questions/70110446" target="_blank">Dump WWW::Curl::Easy request</a> - [<b>2</b>/1]</li><li><a href="http://stackoverflow.com/questions/70098858" target="_blank">2-Way-TLS support</a> - [<b>2</b>/0]</li><li><a href="http://stackoverflow.com/questions/70094403" target="_blank">In Perl, can I put unlimited conditions with the ternary conditional operator?</a> - [<b>1</b>/3]</li><li><a href="http://stackoverflow.com/questions/70109979" target="_blank">Multiple inheritance - wrong overload selected</a> - [<b>1</b>/3]</li><li><a href="http://stackoverflow.com/questions/70070566" target="_blank">How can I modify this Perl subroutine so that it prints the contents of the file, using print_file?</a> - [<b>1</b>/2]</li><li><a href="http://stackoverflow.com/questions/70105406" target="_blank">How to push an array into another array?</a> - [<b>1</b>/2]</li><li><a href="http://stackoverflow.com/questions/70130938" target="_blank">Extract HTTP body from curl response</a> - [<b>1</b>/2]</li><li><a href="http://stackoverflow.com/questions/70067505" target="_blank">CPAN fails to install Algorithm::CurveFit</a> - [<b>1</b>/1]</li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_20">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/539.html">#539 - Farewell to David H. Adler</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 22 November 2021 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi</p>
<p>Really sad news: that David H. Adler, known by many as DHA has passed away. I've included a number of links where people who can express themselves way better than I do say goodbye to him.</p>
<p>In other news the ephemeral miniconf took place this week. You can read about it below.</p>
<p>Lastly, The Weekly Challenge celebrates its first 1000 days. Congratulations to Mohammad Anwar, my co-editor of the Perl Weekly for keeping up with this project!</p>
<p>Enjoy your week!</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_21">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2021/11/21#pwc139">Jort Sort the First Five Long Primes</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 21 November 2021 16:34</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from The Weekly Challenge problem statement and demonstrate 
the working solution.</em></p>

<h2>Part 1</h2>

<p><em>You are given a list of numbers. Write a script to implement JortSort. It should return 
true/false depending if the given list of numbers are already sorted.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
use boolean;

sub jort_sort{
    for(my $i=0; $i < @_ - 1; $i++){
        return false if $_[$i + 1] < $_[$i];  
    }  
    return true;
}

MAIN:{
    print jort_sort(1, 2, 3, 4, 5) . "\n";
    print jort_sort(1, 3, 2, 4, 5) . "\n";
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
1
0
</code></pre>

<h3>Notes</h3>

<p>Apparently Jort Sort is a joke sort started by somebody in the JavaScript community. I 
didn't find it all that funny, but the code to implement it only took a quick minute.</p>

<h2>Part 2</h2>

<p><em>Write a script to generate the first 5 Long Primes.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
use boolean;
use LWP::UserAgent;
use constant PRIME_URL => "http://primes.utm.edu/lists/small/100000.txt";

sub get_primes{
    my @primes;  
    my $ua = new LWP::UserAgent(
        ssl_opts => {verify_hostname => 0}
    );
    my $response = $ua->get(PRIME_URL);
    my @lines = split(/\n/,$response->decoded_content);
    foreach my $line (@lines){
        my @p = split(/\s+/, $line);
        unless(@p < 10){
            push @primes, @p[1..(@p - 1)]; 
        }  
    }
    return @primes; 
}

sub divide{
    my($n, $d) = @_; 
    my @remainders;
    my $q = (int($n / $d)) . ".";
    my $r = $n % $d; 
    push @remainders, $r; 
    my @a;
    for (0 .. $d){
        $q .= int($r*10 / $d);  
        $r = $r*10 % $d;
        @a = grep { $remainders[$_] == $r } (0 .. @remainders - 1);
        last if(@a); 
        push @remainders, $r; 
    }
    my $r_i = $a[0];
    my $i = index($q, ".");
    my $decimal_part = substr($q, $i+1); 
    return substr($q, 0, $i + 1) . substr($decimal_part, 0, $r_i) . "(" . substr($q, $i + $r_i + 1) . ")";  
}   

sub long_primes_five{
    my @long_primes;
    my @primes = get_primes();
    do{
        my $prime = shift @primes;    
        my $max_repetend = $prime - 1; 
        my $repeats = true if($prime != 2 && $prime != 5); 
        if($repeats){
            my $x = divide(1, $prime, [], []); 
            $x =~ m/\((\d+)\)/;
            my $repetend = $1;
            push @long_primes, [$prime, $x] if length($repetend) == $prime - 1;   
        }
    }while(@long_primes < 5);
    return @long_primes;
}

MAIN:{
    for my $p (long_primes_five()){
        print $p->[0] . "\t" . $p->[1] . "\n";
    }
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-2.pl 
7       0.(142857)
17      0.(0588235294117647)
19      0.(052631578947368421)
23      0.(0434782608695652173913)
29      0.(0344827586206896551724137931)
</code></pre>

<h3>Notes</h3>

<p>This second part of the challenge was much more fun! Maybe my favorite part was that it 
largely re-used code from <a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2021/04/04#pwc106">challenge 106</a>
and also <a href="https://adamcrussell.livejournal.com/5175.html">Challenge 015</a>. Here we grab a 
list of pre-computed primes and then check each one for the desired property. After we 
find five, as required, we're done.</p>

<h2>References</h2>

<p><a href="http://jort.technology/">Jort Sort</a></p>

<p><a href="https://mathworld.wolfram.com/FullReptendPrime.html">Long Prime</a></p>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-139/">Challenge 139</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_22">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/perl-tk-keyboard-and-mouse-events">Perl Tk: Keyboard and Mouse events</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Sunday 21 November 2021 09:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>
Showing how to create to bind keyboard an mouse events to functions in a Perl Tk based application.
<p>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_23">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2021/11/ccclxviii-9-great-cpan-modules-released.html">(ccclxviii) 9 great CPAN modules released last week</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 20 November 2021 16:06</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Updates for <i>great CPAN modules</i> released last week. A module is considered <i>great</i> if its favorites count is greater or equal than 12.<br/><br/><ol><li><a href='https://metacpan.org/release/OLIVER/App-Netdisco-2.051001' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>App::Netdisco</span></b></a> - An open source web-based network management tool. <ul>  <li>Version: <strong>2.051001</strong> on 2021-11-14</li>  <li>Votes: 13</li>  <li>Previous version: 2.050003 was 26 days before</li></ul></li><li><a href='https://metacpan.org/release/SBECK/Date-Manip-6.86' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Date::Manip</span></b></a> - Date manipulation routines <ul>  <li>Version: <strong>6.86</strong> on 2021-11-15</li>  <li>Votes: 16</li>  <li>Previous version: 6.85 was 8 months, 14 days before</li></ul></li><li><a href='https://metacpan.org/release/JHTHORSEN/JSON-Validator-5.03' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>JSON::Validator</span></b></a> - Validate data against a JSON schema <ul>  <li>Version: <strong>5.03</strong> on 2021-11-20</li>  <li>Votes: 29</li>  <li>Previous version: 5.02 was 1 month, 14 days before</li></ul></li><li><a href='https://metacpan.org/release/MARIOROY/MCE-1.875' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>MCE</span></b></a> - Many-Core Engine for Perl providing parallel processing capabilities <ul>  <li>Version: <strong>1.875</strong> on 2021-11-16</li>  <li>Votes: 87</li>  <li>Previous version: 1.874 was 1 year, 2 months, 29 days before</li></ul></li><li><a href='https://metacpan.org/release/JHTHORSEN/Mojo-Redis-3.27' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Mojo::Redis</span></b></a> - Redis driver based on Mojo::IOLoop <ul>  <li>Version: <strong>3.27</strong> on 2021-11-20</li>  <li>Votes: 17</li>  <li>Previous version: 3.26 was 8 months, 19 days before</li></ul></li><li><a href='https://metacpan.org/release/JHTHORSEN/Mojolicious-Plugin-OpenAPI-5.01' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Mojolicious::Plugin::OpenAPI</span></b></a> - OpenAPI / Swagger plugin for Mojolicious <ul>  <li>Version: <strong>5.01</strong> on 2021-11-20</li>  <li>Votes: 41</li>  <li>Previous version: 5.00 was 1 month, 18 days before</li></ul></li><li><a href='https://metacpan.org/release/PEVANS/Object-Pad-0.57' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Object::Pad</span></b></a> - a simple syntax for lexical slot-based objects <ul>  <li>Version: <strong>0.57</strong> on 2021-11-18</li>  <li>Votes: 21</li>  <li>Previous version: 0.56 was 27 days before</li></ul></li><li><a href='https://metacpan.org/release/ETJ/PDL-2.063' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>PDL</span></b></a> - Perl Data Language <ul>  <li>Version: <strong>2.063</strong> on 2021-11-19</li>  <li>Votes: 43</li>  <li>Previous version: 2.061 was 8 days before</li></ul></li><li><a href='https://metacpan.org/release/EXODIST/Test2-Suite-0.000142' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Test2::Suite</span></b></a> - Distribution with a rich set of tools built upon the Test2 framework. <ul>  <li>Version: <strong>0.000142</strong> on 2021-11-15</li>  <li>Votes: 31</li>  <li>Previous version: 0.000141 was 3 months, 20 days before</li></ul></li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_24">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2021/11/cdxci-metacpan-weekly-report-appsdview.html">(cdxci) metacpan weekly report - App::sdview</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 20 November 2021 16:03</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>This is the weekly favourites list of CPAN distributions. Votes count: 28</p><p>Week's winner: <b><a href="https://metacpan.org/module/App::sdview" target="_blank">App::sdview (+3)</a></b></p><p>Build date: 2021/11/20 15:03:15 GMT</p><br/><p>Clicked for <u>first time</u>:</p><ul><li><a href="https://metacpan.org/module/App::BorderStyleUtils" target="_blank">App::BorderStyleUtils</a> - CLI utilities related to border styles</li><li><a href="https://metacpan.org/module/App::Easer" target="_blank">App::Easer</a> - Simplify writing (hierarchical) CLI applications</li><li><a href="https://metacpan.org/module/Inline::Filters::Ragel" target="_blank">Inline::Filters::Ragel</a> - Run ragel when compiling your Inline modules</li></ul><br/><p><u>Increasing</u> its reputation:</p><ul><li><a href="https://metacpan.org/module/App::ModuleBuildTiny" target="_blank">App::ModuleBuildTiny</a> (+1=10)</li><li><a href="https://metacpan.org/module/App::Perldoc::Search" target="_blank">App::Perldoc::Search</a> (+1=2)</li><li><a href="https://metacpan.org/module/App::perlimports" target="_blank">App::perlimports</a> (+1=5)</li><li><a href="https://metacpan.org/module/App::PrereqGrapher" target="_blank">App::PrereqGrapher</a> (+1=12)</li><li><a href="https://metacpan.org/module/App::sdview" target="_blank">App::sdview</a> (+3=4)</li><li><a href="https://metacpan.org/module/autobox" target="_blank">autobox</a> (+1=27)</li><li><a href="https://metacpan.org/module/autobox::Base64" target="_blank">autobox::Base64</a> (+1=3)</li><li><a href="https://metacpan.org/module/autobox::JSON" target="_blank">autobox::JSON</a> (+1=4)</li><li><a href="https://metacpan.org/module/B::C" target="_blank">B::C</a> (+1=21)</li><li><a href="https://metacpan.org/module/cpan::listchanges" target="_blank">cpan::listchanges</a> (+1=12)</li><li><a href="https://metacpan.org/module/cpan::outdated" target="_blank">cpan::outdated</a> (+1=33)</li><li><a href="https://metacpan.org/module/Google::ProtocolBuffers::Dynamic" target="_blank">Google::ProtocolBuffers::Dynamic</a> (+1=10)</li><li><a href="https://metacpan.org/module/HTTP::Parser::XS" target="_blank">HTTP::Parser::XS</a> (+1=12)</li><li><a href="https://metacpan.org/module/IPC::Lite" target="_blank">IPC::Lite</a> (+1=2)</li><li><a href="https://metacpan.org/module/libapreq2" target="_blank">libapreq2</a> (+1=3)</li><li><a href="https://metacpan.org/module/Lingua::EN::ABC" target="_blank">Lingua::EN::ABC</a> (+1=2)</li><li><a href="https://metacpan.org/module/Math::GMPz" target="_blank">Math::GMPz</a> (+1=4)</li><li><a href="https://metacpan.org/module/Minilla" target="_blank">Minilla</a> (+1=53)</li><li><a href="https://metacpan.org/module/Mojolicious::Plugin::OpenAPI" target="_blank">Mojolicious::Plugin::OpenAPI</a> (+1=41)</li><li><a href="https://metacpan.org/module/PDL" target="_blank">PDL</a> (+1=43)</li><li><a href="https://metacpan.org/module/perl" target="_blank">perl</a> (+1=384)</li><li><a href="https://metacpan.org/module/Router::R3" target="_blank">Router::R3</a> (+1=11)</li><li><a href="https://metacpan.org/module/RPerl" target="_blank">RPerl</a> (+1=29)</li></ul>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_25">
            <div class="card-header">
              <h2 class="card-title"><a href="https://news.perlfoundation.org/post/grants_nov_2021_votes">Grants: November 2021 Votes</a></h2>
<a href="https://news.perlfoundation.org/" class="badge badge-primary" style="float: left">Perl Foundation News</a>

              <p class="text-right"><small>Published by Jason A. Crome
 on Tuesday 16 November 2021 20:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
   
     
       <img src="_ra-rel-mnt_/simplecas/fetch_content/7f97282811f6a9f862d7e659c79e5462cc195d94/grant-funding .png" style="max-width:100%;max-height:100%;padding:20px;" /><br>
     
     <p>The Grants Committee has concluded voting on the November 2021 round. One grant request was submitted:</p>

<h4><a href="https://news.perlfoundation.org/post/grant_proposal_raku_dispatch_optimizations">Grant Proposal: Optimizations building upon the new Raku dispatch mechanism</a> (USD 12,000)</h4>

<p>VOTING RESULTS: Approved. 4 YES votes (14 points), 0 NO votes, 1 ABSTAIN</p>

<p>We accept proposals throughout the year; our next round of review will begin in January. You can <a href="https://www.perlfoundation.org/how-to-write-a-proposal.html">submit proposals</a> at any time.</p>

<p>If you want to help with funding and increase our budget, please visit our <a href="https://www.perlfoundation.org/make-a-donation.html">donations page</a>. We sincerely appreciate all the donors which make the grant program possible. If you donate, please take advantage of your employers' matching donation program.</p>

<p>As always, thanks to our <a href="https://www.perlfoundation.org/our-donors.html">donors</a>, both large and small, who support this program to give back to the community.</p>

    
         </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_26">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/538.html">#538 - Are you Perl blogger?</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 15 November 2021 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi there</p>
<p>Going back to the editorial of last week's <a href="https://perlweekly.com/archive/537.html">edition</a> of Perl Weekly, it is still there in my head raising many questions. It is a universal fact that Perl is no longer the favourite language among the youths in college these days. I remember when I was first introduced to Perl in 1999, it was the most popular language. Being a Perl fan, I feel it is my responsibility to bring Perl back to the discussion table. One way to do that is to talk about Perl-based projects and share them with the users of other languages. I have noticed that not as many people blog about Perl as they used to in the past. Talking about blogs, I would like to thank <a href="https://theweeklychallenge.org">The Weekly Challenge</a> team for spreading the power of Perl. For the record, in the last 138 weeks, the team have created and shared over 2000 blog posts. I used to blog regularly in the past but nowadays I hardly find time. Having said that, I still wrte a monthly report blog post where I talk about Perl and my other projects. I find making a live video is less time consuming than writing a blog post. I made some and then I stopped that as well, sorry. You can take a look my <a href="https://www.youtube.com/c/mohammadsajidanwar">YouTube Channel</a> if you fancy. I came across series of <a href="https://perlmaven.com/beginner-perl-maven-video-course">videos</a> by Gabor Szabo teaching Perl. It is great source for someone new to Perl and explore with live action.</p>
<p>I remember, Dave Cross, wrote a <a href="https://dev.to/davorg/don-t-be-a-perl-programmer-4h2d">blog post</a> talking about something that not many people would speak about. I personally agree with him fully and believe knowing more than one programming languages helps you as a programmer. I can tell from my own experience, I picked up Raku last year while participating the weekly challenge. Whatever little I know about Raku to date, I can tell it has helped me a lot. I use that knowledge to write better Perl programs. Recently, I started writing Python as well - just the basics for now. So the question is, does knowing Raku or Python make me any less of a Perl programmer? I am still a Perl programmer and all of my thought processes still follow Perl's rules. Perl is my first love and will remain so for the rest of my life. Even today, after more than 22 years, I find features that I never knew existed before, especially in the field of regex. I would like to give credit to Abigail for sharing the magic of regex in Perl as part of his weekly contributions.</p>
<p>While talking about blogs, how can I miss those who are doing great service on a regular basis? I would like to thank <a href="https://github.polettix.it/ETOOBUSY">Flavio Poletti</a> for blogging every day for months now. Also there is another name, <a href="https://phoenixtrap.com">Mark Gardner</a>, who writes a weekly blog post. Similarly we have weekly stats by <a href="https://niceperl.blogspot.com">Miguel Prz</a>.</p>
<p>Enjoy the rest of the newsletter.</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_27">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/perl-tk-menu">Perl Tk: The label, button, and entry widgets</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Monday 15 November 2021 08:00</small></p>
            </div> <!-- card-header -->

            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_28">
            <div class="card-header">
              <h2 class="card-title"><a href="https://news.perlfoundation.org/post/fosdem-volunteers-call-for-participation">Volunteers needed for Perl dev room at FOSDEM (online)</a></h2>
<a href="https://news.perlfoundation.org/" class="badge badge-primary" style="float: left">Perl Foundation News</a>

              <p class="text-right"><small>Published by Nic Evans
 on Thursday 11 November 2021 16:20</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
   
     
     <p>FOSDEM will run online on 5-6 February 2022 and is <a href="https://fosdem.org/2022/news/2021-11-02-devroom-cfp/">calling for participation</a>. The Marketing Committee would like to run a Perl dev room (basically a talk track), but need volunteers and speakers to assist.</p>

<p>Talks need to be prerecorded and uploaded prior to the conference, which are then streamed to participants with Q&amp;A after each.</p>

<p>Before we request the room from FOSDEM and call for speakers, we need volunteers to assist with both organizing and supporting speakers.</p>

<p>We need 2-3 people who can meet regularly and spend time planning it, encouraging calls for papers, helping speakers record their talks as needed, supporting the management of our dev room on the day, including the collation of recordings etc.</p>

<p>If you can commit to support, we can submit a proposal for dev room (deadline is 23:59 UTC, Monday 15 November).</p>

<p>Please contact nic@perlfoundation.org by 12 noon UTC, Monday 15 November if you can help. </p>

    
         </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_29">
            <div class="card-header">
              <h2 class="card-title"><a href="https://news.perlfoundation.org/post/sockwell-raku-persisent-data-structures">Grant update: Persistent Data Structures for Raku, Daniel Sockwell</a></h2>
<a href="https://news.perlfoundation.org/" class="badge badge-primary" style="float: left">Perl Foundation News</a>

              <p class="text-right"><small>Published by Moritz Lenz
 on Tuesday 09 November 2021 13:05</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
   
     
     <p>Daniel Sockwell has provided two updates to his <a href="https://news.perlfoundation.org/post/grant_proposal_persistent_data_structures_for_raku">Grant: Persistent Data Structures for Raku</a>.</p>

<p>The first update was already submitted in October, and not posted due to my own error. Enjoy the thorough description!</p>

<hr />

<h2>Raku Persistent Data Structures Grant Report for September 2021</h2>

<p>In September, I spent 28 hours on implementing Raku persistent data structures.  That's a bit under
the 10 hour/week I'd estimated that I'd spend, but I was still able to make a good start on the
implementation.</p>

<p>The main reason I didn't spend the full 40 hours on the grant – as well as the explanation for why
you're getting this update now instead of closer to the beginning of the month – is that I decided
to devote a large chunk of my Raku time to two other issues – both of which are directly related to
implementing persistent data structures.  (Though not <em>so</em> related that I'm counting time spent on
them towards the grant.  Which is good, because doing so would mean that I <em>well</em> exceeded my
~40/month budget!)</p>

<p>I'm going to tell you a bit about these two projects and how each relates to Raku persistent data
structures, and then I'll describe the progress I made during the 28 hours I'm actually counting.</p>

<h3>What even is immutability?</h3>

<p>The biggest selling point of persistent data structures is, of course, that they are immutable while
also being fairly cheap to copy.  But to deliver on that promise, it's important to have a very
clear idea of what we mean by "immutability".</p>

<p>I don't mean in some sort of fancy <a href="https://en.wikipedia.org/wiki/Heraclitus">philosophical sense</a>;
I'm asking the very practical question "When we describe the <code>List</code> in <code>my $list = (1, 2, 3)</code> as
immutable, what does that mean?  What different <em>behavior</em> should I expect when I know that the
<code>List</code> is immutable?" (You could say "semantic difference" instead of "different behavior" if you
want to sound a bit more technical.)</p>

<p>Raku has some very clear answers to parts of this question but is also slightly confused (to say
nothing of confusing) on some others.  And, as it turns out, some of the less-clear areas of the
question end up being pretty significant for the sort of immutability that give persistent data
structures so much of their power. </p>

<p>Let's start with an area where Raku is clear: the distinction between immutable <strong>values</strong> and
immutable <strong>bindings</strong>.  This is <a href="https://docs.raku.org/language/containers">well documented</a> (and
isn't what I spent time on; this is still background), but here's a recap:</p>

<h4>Values</h4>

<p>When we describe the list <code>(1, 2, 3)</code>, the string <code>codesections</code>, or the number <code>42</code> as
immutable, we are saying that they are immutable <em>values</em>.  That is, there's no way to take <code>(1, 2,
3)</code> and change the <code>2</code> into a <code>0</code> while still having the same list we started with – we can create a
new list with those values, but that's not at all the same thing.  Contrast that with the <code>Array</code> of
<code>my @a = [1, 2, 3]</code>: here, the code <code>@a[1] = 0</code> literally changes the existing <code>Array</code>.</p>

<p>Strings and numbers in Raku are immutable values in exactly the way <code>List</code>s are (and <code>Array</code>s
aren't).  That is, there's no way to transform a string or a number; all you can do is to return a
modified version of the string or number.  In contrast, C, C++, Rust, and many other languages allow
you to mutate strings in-place; they essentially treat strings as arrays of characters or codepoints
and let you modify that array in exactly the same way Rakoons modify an <code>Array</code>.  (For C's <code>char*</code>
strings, you're literally dealing with character arrays; for other languages that's more of an
(over) simplification).  I'm pretty sure that no programming language is crazy enough <a href="http://rigaux.org/language-study/various/mutability-and-sharing/">to have
mutable numbers</a> (math would get
<em>weird</em>) but I'd love to learn that I'm wrong about that.</p>

<p>Note that I'm discussing the semantics of immutable values that Raku (the language) provides, not
implementation details of how any particular compiler stores those values.  So, while <code>List</code>s and
<code>Str</code>s provide immutable semantics, there's nothing preventing an implementation from storing
different values in a more complex way.  Put differently, when you say <code>my $a = 'foo' x 500; my $b =
$a ~ ' and bar'</code>, you <em>conceptually</em> have two separate and immutable strings, but implementations
are free to let those strings share (or even mutate) some of their backing data.  And, indeed, MoarVM
uses a really amazing system for <a href="https://github.com/MoarVM/MoarVM/blob/master/docs/sts.asciidoc">storing
strings</a> that shares memory in a way
that's not that different from the way the data structures I'm building do.</p>

<h4>Bindings</h4>

<p>Entirely separate from the question of mutable versus immutable values, programming languages can
also constrain the mutability of variable bindings.  That is: once the programmer has defined a
variable as pointing at a particular value, can they later change it to point at a <em>different</em>
value?</p>

<p>One non-Raku example that many programmers may be familiar with is JavaScript's <code>let</code> and <code>const</code>,
especially when used with arrays or objects.  In JavaScript, <code>const</code> enforces immutable bindings –
you can't say <code>const a = [1, 2, 3]; a = [4, 5, 6]</code>.  But it does nothing to make the <em>values</em>
immutable – and, in js, arrays are always mutable.  This means that you can validly write <code>const a =
[1, 2, 3]; a[1] = 99</code> to mutate the value that <code>a</code> points to.  (This distinction, and the lack of
immutable arrays in JavaScript, leads to <a href="https://overreacted.io/on-let-vs-const/">perennial
debates</a> about the advisability of using <code>const</code> in js.)</p>

<p>Raku gives us accesses to the semantics of both mutable and immutable bindings, and lets us combine
either with mutable or immutable values.  Thus, we can write <code>my @a = [1, 2, 3]</code> - mutable binding
to a mutable value.  Or <code>my $l = (1, 2, 3)</code> – an mutable binding to an immutable value (we can't
change the value of the <code>List</code>, but we <em>can</em> make <code>$l</code> point to a different value altogether).  Or
we can write <code>constant @a = [1, 2, 3]</code> – an immutable binding to a mutable value (<code>@a</code> will always
point to that exact <code>Array</code>, but we can freely mutate that <code>Array</code> with code like <code>@a[1] = 99</code>).
Or, finally, we can write <code>constant $l = (1, 2, 3)</code> – an immutable binding to an immutable value
(<code>$l</code> will always point to the same <code>List</code>, and that <code>List</code> will always contain exactly the values
<code>1</code>, <code>2</code>, and <code>3</code>).</p>

<p>This last category – an immutable binding to an immutable value – best fits many peoples intuitions
about what the terms "immutable" or "constant" mean – that variable always gives me the same value,
no matter what.  In addition to being more intuitive, this last category is notable for how much it
can simplify reasoning about code.  There's something very clarifying about knowing the value of a
variable without needing to track whether that value has changed; just like the related idea of
using <a href="https://en.wikipedia.org/wiki/Referential_transparency">referentially transparent</a> functions,
programming with variables that are immutably bound to immutable values can greatly simplify complex
codebases.</p>

<h4>How immutable values and binding fit with persistent data structures</h4>

<p>The distinction between the mutability of values and bindings matters for the data structures I'm
implementing in two ways.</p>

<p>First, because the data structures I'm creating are immutable values, we'll be able to use them to
be in that wonderful forth category – immutable binding to immutable values – if and only if Raku
lets us bind to them immutably.  So it's really important to be clear on what options Raku provides
for immutable bindings.</p>

<p>I've already shown one way that Raku supports immutable bindings: <code>constant $l = (1, 2, 3)</code>.  But
constants are evaluated at compile time and (even though Raku's definition of "compile time" is
pretty expansive) the options for using constants are inherently limited.  So what other options
does Raku provide?</p>

<p>Well, before the beginning of September, I thought that Raku provided three other options for
immutable bindings: so-called <a href="https://docs.raku.org/language/variables#index-entry-_(sigilless_variables)">sigilless
variables</a> (like <code>my
\l = (1, 2, 3)</code>); function parameters that aren't declared as <a href="https://docs.raku.org/type/Signature#index-entry-trait_is_rw"><code>rw</code> or
<code>copy</code></a> (like <code>sub fn($l) {…}</code>); and
lists of variables that are destructured with the <code>:=</code> operator (which share the same semantics as
parameters).  Now, in mid-October, I <strong>still</strong> think that's the case, but I admit that the situation
is more complex than I first thought and, at a minimum, existing compilers don't fully implement
those semantics.</p>

<p>(Note: some people don't like the term "sigilless variable", since the semantics I just described
mean that they don't really vary.  But it's the term the docs use, so I'm going to stick with it for
this post.)</p>

<p>I first realized something odd was going on when comment in this <a href="https://github.com/Raku/doc/issues/3950">docs.raku.org
issue</a> pointed out that, while you can't reassign a
sigilless variable, you can sometimes re-<a href="https://docs.raku.org/language/containers#Binding">bind</a>
it: <code>my Int \x = 2; x := 4</code> changes the value bound to <code>x</code>.  At first I thought that this issue only
applied when certain type constraints were applied, but I soon realized that it applied whenever
any type is mentioned, including <code>Any</code> or <code>Mu</code>.  Moreover, it's not just sigilless variables that
can be rebound – parameters can too: <code>sub f(Any $a) { $a := 42; $a}; f 0</code> returns 42.  In the last
step to make this pervasive, the <code>@</code> and <code>%</code> sigils add implicit type constraints, which means that
any parameter with either of those sigils can be rebound.  (As mentioned, destructuring with <code>:=</code>
shares the semantics of parameter binding, all of that applies there as well.)</p>

<p>Given that sigilless variables and parameters both allowed rebinding, all of the above lead me to
wonder whether Raku is trying to provide immutable bindings at all.  It turns out that there isn't a
<a href="https://github.com/Raku/roast">Roast</a> specification test that's 100% on point.  And, when I <a href="https://stackoverflow.com/questions/69231506/what-are-the-rules-for-re-binding">asked
on StackOverflow</a> I
mixed opinions about whether the current behavior (allowing rebinding) was intentional or a bug.</p>

<p>If Raku does pervasively allow rebinding, that would be pretty bad news for the usefulness of the
data structures I'm implementing.  They'd still have some value – more than enough to be
worthwhile.  But it'd mean that we pretty much can never get to the
immutable-bindings-to-immutable-values promised land that can have such a simplifying effect on
code.</p>

<p>Given that impact, I decided to research the issue pretty thoroughly.  After doing so, I've
concluded that Raku is designed to provide immutable bindings after all, and I produced a <a href="https://github.com/rakudo/rakudo/pull/4536">pull
request</a> that both explains my logic and provides a
patch that gives Raku those semantics.  That PR hasn't been merged yet (I still need to respond to
at least one change request about what error to throw, and I'd like to see if anyone else weighs
in).  But I'm optimistic that it will be and that fixing that bug will make immutable bindings to
immutable values much more practical in Raku.</p>

<h4>What's on the inside</h4>

<p>I mentioned earlier that the values-versus-binding distinction is important for the work I'm doing
in two ways.  The second way it matters is because it gives us the right framework to talk about
"shallow" immutability (also sometimes called <a href="https://stackoverflow.com/questions/69231506/what-are-the-rules-for-re-binding">interior
mutability</a>).</p>

<p>Lets look at a slightly different constant: <code>constant $l = (1, 2, $)</code>.  What can we say about <code>$l</code>?
Well, the variable <code>$l</code> is immutably bound to a <code>List</code>, and the <code>List</code> is comprised of three values,
<code>1</code>, <code>2</code>, and … a <a href="https://docs.raku.org/language/containers#Scalar_containers">scalar</a>.  But a
scalar a container – specifically, a <em>mutable</em> container.  Thus, despite the immutability of <code>$l</code>'s
binding and the immutability of <code>List</code>s, we can still make changes: <code>$l[2] = 99</code> is valid code.</p>

<p>That change is allowed because <code>List</code>s are only <em>shallowly</em> immutable.  Or, to say the same thing in
different words, <code>List</code>s are an immutable type that allows for interior mutability.</p>

<p>One of the goals I mentioned in the <a href="https://news.perlfoundation.org/post/grant_proposal_persistent_data_structures_for_raku">initial grant proposal for the persistent data
structures</a>
is to provide deeply immutable data types.  I hope that the discussion so far gives some context to what I
meant by that.  But it's a point I'll return to in a just a minute.</p>

<h3>Meanwhile, in another thread altogether…</h3>

<p>The second related-but-distinct task has occupied a good deal of my time recently has involved
concurrency and parallelism (which are famously <a href="https://go.dev/blog/waza-talk">not the same
thing</a>).  One of the key selling points of immutable data –
especially deeply immutable data – is that it can be more easily shared across threads.  A lot of
the headache of dealing with parallel code (locks, mutexes, atomics, cache misses, deadlocks,
livelocks, etc) come from ways to prevent different threads from modifying data at the same time.
But different threads will never modify (deeply) immutable data at the same time – because <em>nothing</em>
will ever mutate that data at any time.  I'm very optimistic that the data structures I'm working on
will have significant application for anyone writing multithreaded Raku. </p>

<p>So I've been slightly concerned that I hadn't yet written any non-trivial parallel and concurrent
code in Raku.  Not <em>that</em> concerned – I've written quite a bit of concurrent and parallel Rust code
and concurrent JavaScript (JS is single-threaded, so it's inherently non-parallel).  And I'd gotten
to know Raku's concurrency model by watching some excellent
<a href="https://www.youtube.com/watch?v=hGyzsviI48M&amp;t=43s">conference</a>
<a href="https://www.youtube.com/watch?v=l2fSbOPeSQs&amp;t=1184s">talks</a> and by reading the
<a href="https://docs.raku.org/language/concurrency">docs</a>/<a href="https://6guts.wordpress.com/2017/11/24/a-unified-and-improved-supply-concurrency-model/">other</a>
<a href="https://stackoverflow.com/questions/65473206/what-concurrency-mechanisms-are-provided-by-raku-and-how-can-they-be-evaluated">resources</a>.
Still, though, I was keeping my eye out for a medium-scale project that would let me confirm my
understanding of Raku's approach to concurrency.</p>

<p>In late September, I found the perfect project.  Someone on the r/rakulang subreddit asked if there
was a good way to <a href="https://www.reddit.com/r/rakulang/comments/pvdpd2/recreate_javascript_bouncing_balls_in_raku/">recreate a JavaScript exercise in
Raku</a>.
That exercise involved rendering balls to an HTML5 canvas in a browser – a task that's pretty
challenging with a version of Raku running on MoarVM.  (It would obviously be much easier using the
JavaScript backend, but that wouldn't currently be my first choice for someone new to Raku.)  So, I
decided to write a simple <a href="https://cro.services/">Cro</a> server that would let someone write Raku code
to display balls on an HTML canvas.</p>

<p>Specifically, I decided on the following architecture: A Cro server that would listen for commands
from the user's Raku code, generate a set of balls to display, and then send a JSON representation
of those balls to any connected clients via WebSockets.  Oh, and then do that again with updated
ball positions 16 milliseconds later – with the goal of maintaining a frame rate of 60 fps.  It's
this last bit would normally be a bit of an odd choice: WebSockets are typically used to communicate
with a remote server, and thus it'd typically be a questionable choice to stream updates 60 times
per second.  But the program I had in mind would run locally, which removes network latency from
consideration.  And, besides, I figured that this design would provide good trial by fire for my
understanding of Raku's concurrency model: if my program can stream balls to dozens of
simultaneously connected clients at 60 fps, I must have a pretty decent understanding of how Raku
handles parallelism and concurrency.</p>

<p>You can see the <a href="https://github.com/codesections/LearnRakuWith">program I ended up with</a> on GitHub.
I'm pretty happy with how it turned out: in not much more than 100 lines of Raku, the program sets
up exactly the architecture described above plus an
<a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)">Erlang</a>-style error recovery strategy
for resetting to a known-good state when user input that doesn't produce valid output.</p>

<p>But getting there took longer than I expected it to and, in the middle, had me seriously questioning
whether I actually understood Raku's concurrency model well enough to be implementing new data
structures that'd fit with it.  One of the first things anyone learns about programming is that "<a href="https://blog.plover.com/2017/11/12/">it
is not a compiler error. It is never a compiler error.</a>"  In
other words, even if some issue <em>seems</em> to be caused by a bug in the compiler/runtime/etc, it's far
more likely to be caused by a bug in your own code.</p>

<p>And when writing that module, I kept running into some crashes that made me think that I'd either
run into the mythical compiler bug or – more likely – was seriously misunderstanding how to write
concurrent code.  After spending quite a bit of time double-checking my code, I determined that, as
expected, I had <em>not</em> run into a compiler bug.  No, I'd run into
<a href="https://github.com/croservices/cro-websocket/issues/36">two</a> of
<a href="https://github.com/MoarVM/MoarVM/issues/1565">them</a>.</p>

<p>In fairness, neither was a <em>compiler</em> bug; they were both issues with the MoarVM runtime.  Moreover,
both were fixed extremely quickly, and the second never even made it into production – I only ran
into it because I was using a pre-release build to try out Rakudo's <a href="https://6guts.wordpress.com/2021/09/29/the-new-moarvm-dispatch-mechanism-is-here/">new dispatch
mechanism</a>.  The
whole point of running pre-release builds is to help catch edge-case bugs like these, and I'm
certainly not complaining – but it turns out that streaming 60 fps to dozens of clients was a good
stress test for the new dispatch system and not just for my understanding of Raku's concurrency
model.</p>

<h3>Lessons for persistent data structures</h3>

<p>Once I realized that I wasn't fundamentally misunderstanding concurrency in Raku, implementing
Learn::Raku::With taught me a couple of lessons with important (though subtle) implication for the
persistent data structures I'm building.</p>

<h4>"Concurrency control" ≠ "concurrency"</h4>

<p>The first lesson I learned is that I'd slightly misunderstood what's going on in code like this
(adapted from <a href="https://docs.raku.org/routine/migrate">an example</a> in the docs):</p>

<p>```raku</p>

<h1>A simple stock ticker for Apple and Google stock</h1>

<p>react {
    whenever $stock-info-for-APPL { say "Apple's stock price is now:  $_ " }
    whenever $stock-info-for-GOOG { say "Google's stock price is now: $_ " }
}
```</p>

<p>My previous (<strong>incorrect</strong>) reading of that example was pretty much just an English version of the
code:</p>

<p>&gt; Whenever we get an update about either Apple or Google's stock, print that update.  We don't know
&gt; when these updates could come, but we want to react to them the instant they do, whether that
&gt; means reacting to the Apple one first, reacting to the Google one first, or reacting to both at
&gt; the same time.</p>

<p>That's <em>so close</em> to correct, but it goes wrong in the very last 7 words: we are guaranteed <strong>not</strong>
to react to both updates at the same time.  This is a consequence of Raku's
<a href="https://6guts.wordpress.com/2017/11/24/a-unified-and-improved-supply-concurrency-model/#user-content-supplies-and-concurrency">run-to-completion</a>
semantics: the code inside a <code>whenever</code> block is guaranteed to finish executing (that is, to "run to
completion") before the code in any other <code>whenever</code> block can start.  This wouldn't matter much for
the simple example above, but here are two modified versions in which it would:</p>

<p>```raku</p>

<h1>Lets store our results in a Map instead of printing them</h1>

<p>react {
    my %prices is Map;
    react {
        my Map $prices = Map.new;
        whenever $stock-info-for-APPL { $prices = %(|$prices, :APPL($<em>)) }
        whenever $stock-info-for-GOOG { $prices = %(|$prices, :GOOG($</em>)) }
    }
}
```</p>

<p>Under the incorrect understanding, we could've be in both <code>whenever</code> blocks at the same time and
this would create a race condition – we might lose a price update if two came in at the same time.
However, because the concurrency control Raku provides <em>prevents</em> concurrent access here, this is
actually 100% fine: we'll be in exactly one <code>whenever</code> block at a time.  Raku's semantics protect us
from any race condition.</p>

<p>Here's an example where Raku's semantics would have a less ideal impact on naive code:</p>

<p>```raku</p>

<h1>Now with buy/sell recomendations!</h1>

<p>react {
    whenever $stock-info-for-APPL { 
        say "Apple's stock price is now:  $_ ";
        say "Rating: " ~slow-fn-to-calculte-recomendation('APPL', $<em>);
    }
    whenever $stock-info-for-GOOG { 
        say "Google's stock price is now: $</em> ";
        say "Rating: " ~slow-fn-to-calculte-recomendation('GOOG', $_);
    }
}
```</p>

<p>This code would <em>not</em> behave as the author might hope, due to those same run-to-completion
semantics.  Specifically, while <code>slow-fn-to-calculate-recomendation</code> is running, other updates would
be blocked.  If you don't want this behavior, Raku offers several ways to schedule work outside of
the run-to-completion guarantee of the <code>whenever</code> block; Raku's semantics aren't going to <em>stop</em> you
from doing anything here, but it's important to understand the behavior they provide by default. </p>

<p>(It may be helpful to compare Raku's semantics to JavaScript, which guarantees that <em>every</em> function
will run to completion before any other work begins – a model I've <a href="https://stackoverflow.com/questions/67679309/raku-equivalent-to-javascripts-settimeoutfn-0">contrasted with Raku's
before</a>.)</p>

<p>So, how does all of this impact persistent data structures?  Well, some of the performance
optimizations for persistent data structures involve temporarily suspending the immutability
guarantee when there's provably only one copy of the data (or part of the data).  And whether that's
provably the case or not depends crucially on whether other sections of the program can have
concurrent access to the data.  So being clear on all of the above is pretty essential for safe
implementations of the data structures I'm working on.</p>

<h4>Under pressure</h4>

<p>I mentioned that implementing Learn::Raku::With helped me learn two lessons, but the second was
really a reminder of a Raku concurrency feature that I already knew about/a good example of how
important that feature can be.  The feature I'm talking about is the way Raku manages backpressure.</p>

<p>Raku's high level concurrency tools are carefully designed with backpressure in mind.  Quoting
directly from the <a href="https://6guts.wordpress.com/2017/11/24/a-unified-and-improved-supply-concurrency-model/">6guts blog
post</a> that
I've already linked to:</p>

<p>&gt; Another interesting problem for any system processing asynchronous messages is that of
&gt; backpressure. In short, how do we make a source of messages emit them at a rate no greater than
&gt; that of the processing logic? The general principle with Supply is that the sender of a message
&gt; pays the cost of its processing. So, if I have <code>$source.map(&amp;foo).tap(&amp;bar)</code>, then whatever emits at
&gt; the source pays the cost of the map of that message along with the processing done by the tap callback.</p>

<p>Backpreasure is extremely helpful because it can allow a program to handle arbitrary amounts of
input without requiring a proportionally arbitrary (i.e., infinite) amount of memory.  Of course,
given Raku's commitment to flexibility and programmer control, it shouldn't come as any surprise
that Raku also makes it easy to opt out of this automatic backpreasure when doing so makes sense.</p>

<p>Learn::Raku::With presents a good example of a situation where it makes sense to opt out of Raku's
default backpressure semantics.  As I mentioned above, Learn::Raku::With generates a stream of
frames and transmits those frames to all connected clients.  If we applied backpressure to this
system in the normal way, then transmitting the frames to the clients would exert backpressure on
generating the frames – that is, we'd be guaranteed not to generate frames any faster than we can
transmit them.</p>

<p>This would have some benefits – most notably, we'd never need to buffer generated frames and our
memory use would never grow.  But, in the Learn::Raku::With context, it'd have one very notable flaw
as well: the normal backpreasure system would mean that any time we can't transmit frames to clients
at 60 fps, the actual <em>speed</em> of Learn::Raku::With's balls would get reduced.  This obviously isn't
ideal – while 60 fps is a nice goal to shoot for, 45 fps is an absolutely fine frame rate and it'd
be much better to drop 1 out of 4 frames and to display the balls at normal speed in 45 fps than to
keep every frame but to display the balls in slow motion.</p>

<p>Thus, Learn::Raku::With <a href="https://github.com/codesections/LearnRakuWith/blob/main/lib/HtmlBalls.rakumod#L70-L78">pairs a Supply with a
Channel</a> to
allow it to drop frames instead of generating frames more slowly – but that, of course, means that
it needs to store at least a few frames at least temporarily.</p>

<p>But storing extra frames, in turn, means both that the program will take up more memory and,
crucially, that there will be more work for the garbage collector to do.  And that work will take
some time – time that necessarily cannot be spent transmitting those frames to the client.  But
since the whole reason we need to store those extra frames was that we're generating them faster
than we can ship them off to the client, it's possible for the GC-pause-induced extra delay to
result in <em>more</em> extra frames.  Which can then result in more garbage to collect, and thus more
delay, and thus more frames.</p>

<p>I'm sure you can see where that sort of infinite loop heads and it's certainly not to anywhere
good.  In fact, a previous version of Learn::Raku::With could get itself into exactly that sort of
situation pretty easily, consuming ever-more RAM and operating ever more slowly (I think I measured
it as hitting at least 50 GB).  The current version is much more resilient, but the risk remains.</p>

<p>All of this is relevant to persistent data structures because one of the main benefits of these data
structures is that the power of structural sharing makes copies vastly less expensive – verging on
free, in fact.  This benefit would go a long way towards avoiding the sort of issues I outlined
above.  I'd always known that these inexpensive copies are a key benefit of the persistent data
structures I'm building, but I'd previously focused on this as a way to reduce the memory footprint
of Raku programs.  After building Learn::Raku::With, however, I recognize that structural sharing
also reduces GC pressure and thus improves the speed at which Raku programs can execute – which can
avoid the sort of death spirals described above.  This means that having persistent data structures
will not only make many Raku programs more memory efficient but will also certain of Raku programs
much more feasible to write without spiraling into a need for ever-increasing amounts of RAM.</p>

<h2>Implementation progress</h2>

<p>So, having spent a few thousand words explaining things related to but not directly covered by the
grant, let me say at least a bit about the implementation work itself.  In the nature of
implementation work, it's not nearly as interesting as more exploratory work and I don't have very
much to say – I've very much stuck to the plan in my <a href="https://news.perlfoundation.org/post/grant_proposal_persistent_data_structures_for_raku">grant
proposal</a>.</p>

<p>Specifically, I started by implementing the persistent version of the <code>List</code> (still open to
bikeshedding on the name!).  I have made good progress on implementing a persistent <code>List</code> that with
the structural sharing features described in my proposal but <em>without</em> the bit-shifting indexing
(I'm instead currently using the simplified indexing scheme that involves converting the key to a
different base and calculating the relevant indices manually).  This simplified indexing scheme will
allow me to test the soundness of the list before switching to the bit-shifting index (which will be
key to the performance of the persistent list).</p>

<p>Additionally, I've written a set of tests to confirm the correctness of my implementation so far and
a (much smaller and still preliminary) set of tests that measure the performance of deep copies of
built in <code>List</code>s and <code>Array</code>s, which should provide a nice baseline to compare the persistent
versions against.</p>

<h1>Conclusion</h1>

<p>Over the course of September, I made a good start on implementing persistent data structures for
Raku.  This included significant, though limited, progress on actually implementing the persistent
List and much more time-consuming work on auxiliary projects (not counted as part of my grant hours)
that have given me a much better foundation for the remaining work.  The downside of this auxiliary
work is that it took up considerable time that I might have devoted to the actual implementation,
both in September and in October.  In fact, given the amount of time I've already spent on these
research/side projects in October, it's possible that I won't have much or any grant progress to
report at the end of this month.  Nevertheless, I'm glad I invested the effort into those projects
since I believe both left me significantly better equipped to carry out the remainder of the grant.
I look forward to putting these lessons into practice as I continue to implement persistent data
structures for Raku.</p>

<hr />

<h2>Raku Persistent Data Structures Grant Report for October 2021</h2>

<p>The expectation I mentioned in my September grant report came true in October: I had significantly
less time to devote to work on this grant in October.  This was due in large part to the conceptual
work I previously reported on, which stretched well into October.</p>

<p>Accordingly, I was only able to spend 5 hours on the grant in October; I used that time to continue
work on the persistent List.  Specifically, I nearly completed the basic API (without the
bit-shifting optimizations).  I was also able to add some initial test coverage. Given that
progress, I am now nearing point where I'll be able to share the WIP code publicly.</p>

<p>On the conceptual front (i.e., work that's relevant to the persistent data structures but not
relevant enough that I'm counting it towards the hours funded by this grant), I've also made a fair
bit of progress.  Most significantly, I was able to complete the work to add fully immutable binding
to Rakudo.  Thanks to some helpful feedback from Vadim Belman, I also added significantly more
detailed error messages, which should help explain the nature of these binding to Rakoons who aren't
as used to programming with in an immutable style.  As discussed in my last grant report, being able
to immutably bind values to their names will mean that the persistent data structures implemented
for this grant will be truly immutable – and thereby significantly easier to reason about.  This
work was merged in <a href="https://github.com/rakudo/rakudo/pull/4536">rakudo#4536</a> and should be part of
the 2021.11 Rakudo release.</p>

<p>Additionally, I've been putting some thought into how Raku's notion of <a href="https://docs.raku.org/language/glossary#Value_type">value
types</a> fits with the persistent data structures
I'm implementing.  As I mentioned last month, one of the core motivations behind this grant proposal
is to provide deeply immutable types, so it's clear that the types I'm implementing will be value
types and thus will return a <a href="https://docs.raku.org/type/ValueObjAt">ValueObjAt</a> from their <code>WHICH</code>
method.  But what should the persistent types do when the user adds a non-value type?  I can see
three options:</p>

<ol>
<li>Throw an error/require the user to create a value type to pass in.  This is basically the approach taken by Elizabeth Mattijsen's  <a href="https://modules.raku.org/dist/ValueType:zef:zef:lizmat/">ValueType</a> module.</li>
<li>Recursively copy each non-value type into an equivalent value type when it's added to the persistent type ("copy-on-read").  This is straightforward for some types (an <code>Array</code> becomes a <code>List</code>) but might involve more metaprogramming trickery for others (especially user classes).
<ol>
<li>Store the non-value type if we can prove that no other part of the code has access to it, and only make a copy if we need to hand it out to someone (basically copy-on-write, with some slight tweaks).</li>
</ol></li>
</ol>

<p>Each of these has different pros and cons.  In particular, the first is the easiest to implement, the most verbose, and gives the user the most control over/awareness of the performance costs.  Conversely, the last is the most "magical" and the only one that risks introducing correctness bugs.  Additionally, there could be ways to combine different aspects of these three approaches – for example, one combination of 1. and 2. would be to copy simple/built in types but to throw an error when passed a user type with a mutable field.  I'm currently leaning towards the copy-on-read option #2 as a reasonable middle ground, but it's definitely something I'd be interested in hearing other thoughts on.</p>

<p>November is already off to a good start, and I'm optimistic that I'll be able to make significant
progress on this grant before the end-of-year business (and exciting things like the <a href="https://github.com/Raku/advent/blob/master/raku-advent-2021/authors.md">Raku Advent
Calendar</a>!) start to eat
into my coding time.</p>

    
         </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_30">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/537.html">#537 - How do you spend your free time?</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 08 November 2021 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi</p>
<p>The Perl Weekly newsletter is more than 10 years old and over those years we have witnessed a huge decline in the number and diversity of posts. There are still a few people who write about Perl regularly, The Weekly Challenge of Mohammad generates many posts, but in general we see fewer and fewer posts.</p>
<p>I wonder, do those people who used to write about Perl write about other technologies or have they just stopped? How come that so few people write about Perl? Are there no new things in Perl? Are there no new problems that one solves in Perl?</p>
<p>I know that writing about stuff is not the same thing as writing the stuff, but as many other people who write or teach will attest, the best way to improve your knowledge is to explain it. to explain it to live audience (at a Meetup) or to write about it in a blog post.</p>
<p>So how do you spend your free time? Do you write more code? Do you try to explain what you wrote, how you wrote and why? Or do you spend your time on some other activities? I, for examples started to read a lot more than I did in the recent years. And sure, I'll even share my recommendations with you. (See below.)</p>
<p>In any case enjoy your week!</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_31">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/perl-tk-label-button-entry-widgets">Perl Tk: The label, button, and entry widgets</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Sunday 07 November 2021 23:00</small></p>
            </div> <!-- card-header -->

            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->

        </div><!-- col-md-8 -->
        <div class="col-md-2">
<script type="text/javascript"><!--
google_ad_client = "pub-3663319204757145";
/* planet */
google_ad_slot = "8413744374";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
        </div><!-- col-md-2 -->
      </div><!-- row -->
      <footer class="footer">
        <div class="container-fluid">
          <div class="row>
            <div class="col-md-8">
              <address><a href="https://twitter.com/@davorg">@davorg</a> / Friday 03 December 2021 04:47 UTC</address>
            </div>
          </div>
        </div><!-- container -->
      </footer>
    </div><!-- container -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56332-76"></script>
    <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-56332-76');
    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>
    <script src="/script.js"></script>
  </body>
</html>
