<!DOCTYPE html>
<html>
  <head>
    <meta property="og:title" content="Planet Perl" /> 
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://perl.theplanetarium.org/" />
    <meta property="og:image" content="https://perl.theplanetarium.org/planet-perl.jpg" />
    <meta property="og:description" content="Collecting the best Perl web feeds"/>
    <title>Planet Perl</title>
    <meta charset="UTF-8">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
          crossorigin="anonymous">

    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://perl.theplanetarium.org/atom.xml" />
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <nav class="navbar fixed-top navbar-dark bg-dark">
      <a class="navbar-brand" href="#">Planet Perl</a>
    </nav>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 left">
          <p>Text: <a href="#" id="show">show</a> / <a href="#" id="hide">hide</a></p>
          <h2>Sources</h2>
          <ul>
            <li><a href="http://blogs.perl.org/">blogs.perl.org</a></li>
            <li><a href="https://dev.to/t/perl">dev.to #perl</a></li>
            <li><a href="https://domm.plix.at/perl.html">domm (Perl and other tech)</a></li>
            <li><a href="https://www.endpointdev.com/blog/tags/perl/">End Point Dev blog Perl topic</a></li>
            <li><a href="https://metacpan.org/news">MetaCPAN News</a></li>
            <li><a href="https://niceperl.blogspot.com/">Niceperl</a></li>
            <li><a href="https://nxadm.wordpress.com/tag/perl/">nxadm</a></li>
            <li><a href="https://news.perlfoundation.org/">Perl Foundation News</a></li>
            <li><a href="https://perlhacks.com/">Perl Hacks</a></li>
            <li><a href="https://perlmaven.com/">Perl Maven</a></li>
            <li><a href="https://perlweekly.com/">Perl Weekly</a></li>
            <li><a href="https://blog.perl-academy.de/">Perl-Academy.de</a></li>
            <li><a href="https://perl.com/">perl.com</a></li>
            <li><a href="https://perlancar.wordpress.com/">Perlancar</a></li>
            <li><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl">RabbitFarm Perl</a></li>
            <li><a href="https://log.perl.org/">The Perl NOC</a></li>
          </ul>
          <p><a href="/atom.xml"><img alt="Feed" src="/images/feed.gif" /> Subscribe</a>
          <br />
          <a href="/opml.xml"><img alt="OPML" src="/images/opml.png" /> OPML</a></p>
          <p>
            <ul>
              <li>Powered by <a href="https://metacpan.org/release/Perlanet">Perlanet</a></li>
              <li>Code on <a href="https://github.com/davorg/planetperl">Github</a></li>
              <li><a href="https://github.com/davorg/planetperl/issues">Feedback welcome</a></li>
            </ul>
          </p>
        </div><!-- col-md-2 -->
        <div class="col-md-8">
          <div class="card" id="card_1">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/ovid/2022/05/introducing-moosexextended-1.html">Introducing MooseX::Extended</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Ovid
 on Thursday 26 May 2022 21:26</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p><code>MooseX::Extended</code> is coming along well and is ready for testing. See <a href="https://ovid.github.io/articles/introducing-moosexextended-for-perl.html">Introducing MooseX::Extended</a> for a decent introduction on how to make writing your Moose code safer and easier.</p>

        

           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_2">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/ovid/2022/05/introducing-moosexextended.html">Introducing MooseX::Extended</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Ovid
 on Thursday 26 May 2022 21:26</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p><code>MooseX::Extended</code> is coming along well and is ready for testing. See <a href="https://ovid.github.io/articles/introducing-moosexextended-for-perl.html">Introducing MooseX::Extended</a> for a decent introduction on how to make writing your Moose code safer and easier.</p>

        

           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_3">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/tom_wyant/2022/05/whats-in-that-string.html">What's In That String?</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Tom Wyant
 on Wednesday 25 May 2022 20:54</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p>One of the steps of debugging Perl can be to find out what is actually in a string. There are a number of more-or-less informative ways to do this, and I thought I would compare them.</p>

<p>For this I used two short strings. The first was just the concatenation of the characters whose ordinals are 24 through 39; that is, 16 ASCII characters straddling the divide between control characters and printable characters. The second was a small variation on the first, made by removing the last character and appending <code>"\N{U+100}"</code> (a.k.a. <code>"\N{LATIN CAPITAL A WITH MACRON}"</code>) to force the string's internal representation to be upgraded.</p>

<p>The results given below include the version of the module used, the actual code snippet that generated the output, the output itself, and any comments I thought relevant. All subroutines used to dump strings are exportable except for those called as methods. The sample code makes fully-qualified calls because of duplication of subroutine names between different modules.</p>

<h2><a href="https://metacpan.org/pod/Data::Dumper"><code>Data::Dumper</code></a> 2.183 (core since 5.005)</h2>

<pre>local $Data::Dumper::Useqq = 1;
print Data::Dumper::Dumper( $_ );

<p>$VAR1 = &quot;\30\31\32\e\34\35\36\37 !\&quot;#\$%&amp;&#39;&quot;;<br />
$VAR1 = &quot;\30\31\32\e\34\35\36\37 !\&quot;#\$%&amp;\x{100}&quot;;<br />
</pre></p>

<p><a href="https://metacpan.org/pod/Data::Dumper"><code>Data::Dumper</code></a> is probably the default debug output tool. One of its goals is the ability to recover the original data by <code>eval()</code>-ing the output of <code>Dumper()</code>. But <strong>note</strong> the need to set <code>$Data::Dumper::Useqq</code> true to actually see all characters in the dumped string. If this is not done, the control characters are not converted into escape sequences, so the only way to see them is to pipe your output through <code>hexdump -C</code>. For more general-purpose debugging you may also want to set <code>$Data::Dumper::Sortkeys</code> to <code>1</code> so that hash keys come out in non-random order.</p>

<h2><a href="https://perldoc.perl.org/B.html"><code>B</code></a> 1.82 (core since 5.005)</h2>

<pre>print B::perlstring( $_ ), &quot;\n&quot;;

<p>&quot;\030\031\032\033\034\035\036\037 !\&quot;#\$%&amp;&#39;&quot;<br />
&quot;\x{18}\x{19}\x{1a}\e\x{1c}\x{1d}\x{1e}\x{1f} !\&quot;#\$%&amp;\x{100}&quot;<br />
</pre></p>

<p>The primary purpose of the <a href="https://perldoc.perl.org/B.html"><code>B</code></a> module is to support rummaging around in Perl's internals. This use as a casual debugging tool is more a happy accident than the actual intent of the module. If you prefer the C language representation of a string, this module also provides <code>cstring()</code>.</p>

<p><br />
<h2><a href="https://metacpan.org/pod/Devel::Peek"><code>Devel::Peek</code></a> 1.3 (core since 5.006)</h2></p>

<pre>Devel::Peek::Dump( $_ );

<p>SV = PV(0x7f7c1222a2b0) at 0x7f7c1200fee0<br />
  REFCNT = 2<br />
  FLAGS = (POK,IsCOW,pPOK)<br />
  PV = 0x600003e3d760 &quot;\30\31\32\33\34\35\36\37 !\&quot;#$%&amp;&#39;&quot;\0<br />
  CUR = 16<br />
  LEN = 18<br />
  COW_REFCNT = 0<br />
SV = PVMG(0x7f7c135c75e0) at 0x7f7c1100ac48<br />
  REFCNT = 2<br />
  FLAGS = (SMG,POK,pPOK,UTF8)<br />
  IV = 0<br />
  NV = 0<br />
  PV = 0x600003e3d580 &quot;\30\31\32\33\34\35\36\37 !\&quot;#$%&amp;\304\200&quot;\0 [UTF8 &quot;\x{18}\x{19}\x{1a}\e\x{1c}\x{1d}\x{1e}\x{1f} !&quot;#$%&amp;\x{100}&quot;]<br />
  CUR = 17<br />
  LEN = 18<br />
  MAGIC = 0x60000307e310<br />
    MG_VIRTUAL = &amp;PL_vtbl_utf8<br />
    MG_TYPE = PERL_MAGIC_utf8(w)<br />
    MG_LEN = -1<br />
</pre></p>

<p><a href="https://metacpan.org/pod/Devel::Peek"><code>Devel::Peek</code></a> tells you much more than you probably need to know about a string for casual debugging. Unlike the other modules presented here, it does its output directly to <code>STDERR</code> instead of just returning another string.</p>

<p><br />
<h2><a href="https://metacpan.org/pod/Data::Dump"><code>Data::Dump</code></a> 1.25 (not in core)</h2></p>

<pre>print Data::Dump::dump( $_ ), &quot;\n&quot;;

<p>&quot;\30\31\32\e\34\35\36\37 !\&quot;#\$%&amp;&#39;&quot;<br />
&quot;\30\31\32\e\34\35\36\37 !\&quot;#\$%&amp;\x{100}&quot;<br />
</pre></p>

<p><a href="https://metacpan.org/pod/Data::Dump"><code>Data::Dump</code></a> is a non-core module written as an alternative to <a href="https://metacpan.org/pod/Data::Dumper"><code>Data::Dumper</code></a>. Its focus is more on ease of configuration and readability of output.</p>

<p><br />
<h2><a href="https://metacpan.org/dist/JSON"><code>JSON</code></a> 4.05 (not in core)</h2></p>

<pre>state $json = JSON-&gt;new-&gt;allow_nonref;
print $json-&gt;encode( $_ ), &quot;\n&quot;;

<p>&quot;\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\&quot;#$%&amp;&#39;&quot;<br />
&quot;\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\&quot;#$%&amp;&#256;&quot;<br />
</pre></p>

<p><a href="https://metacpan.org/dist/JSON"><code>JSON</code></a> is a general-purpose serializer whose output can be made fairly readable. <p><strong>Note</strong> the need to turn on <code>allow_nonref</code> to dump a string, and to turn on <code>pretty</code> and <code>canonical</code> to get indented structures with hash keys in order. <strong>Note also</strong> that the <code>"\N{U+100}"</code> is represented literally; you will need to set your output encoding (say, by <code>binmode STDERR, ':encoding(utf-8)';</code>) to avoid the dreaded <code>Wide character in print</code> warning.</p>

<p>There are a number of <code>JSON</code> modules available. Output of untried modules may differ from the output I have presented here.</p>

<h2><a href="https://metacpan.org/dist/YAML"><code>YAML</code></a> 1.30 (not in core)</h2>

<pre>print YAML::Dump( $_ );

<p>--- &quot;\x18\x19\x1a\e\x1c\x1d\x1e\x1f !\&quot;#$%&amp;&#39;&quot;<br />
--- &quot;\x18\x19\x1a\e\x1c\x1d\x1e\x1f !\&quot;#$%&amp;&#256;&quot;<br />
</pre></p>

<p><a href="https://metacpan.org/dist/YAML"><code>YAML</code></a> is a general-purpose serializer whose output is fairly readable with minimal to no configuration. <strong>Note</strong> that the <code>"\N{U+100}"</code> is represented literally; you will need to set your output encoding (say, by <code>binmode STDERR, ':encoding(utf-8)';</code>) to avoid the dreaded <code>Wide character in print</code> warning.</p>

<p>There are a number of <code>YAML</code> modules available. Output of untried modules may differ from the output I have presented here.</p>

<h2><a href=" https://perldoc.perl.org/perlfunc#unpack-TEMPLATE%2CEXPR"><code>unpack()</code></a> (Perl built-in)</h2>

<pre>print unpack( &#39;H*&#39;, $_ ), &quot;\n&quot;;

<p>18191a1b1c1d1e1f2021222324252627<br />
Character in &#39;H&#39; format wrapped in unpack at (eval 28) line 1 (#1)<br />
    (W unpack) You tried something like<br />
    <br />
       unpack(&quot;H&quot;, &quot;\x{2a1}&quot;)<br />
    <br />
    where the format expects to process a byte (a character with a value<br />
    below 256), but a higher value was provided instead.  Perl uses the<br />
    value modulus 256 instead, as if you had provided:<br />
    <br />
       unpack(&quot;H&quot;, &quot;\x{a1}&quot;)<br />
    <br />
18191a1b1c1d1e1f2021222324252600<br />
</pre></p>

<p>The <a href=" https://perldoc.perl.org/perlfunc#unpack-TEMPLATE%2CEXPR"><code>unpack()</code></a> built-in is included so I can say I think it is a bad idea unless you <strong>know</strong> your string is bytes, not characters. The big, fat warning (courtesy of the <a href="https://perldoc.perl.org/diagnostics.html"><code>diagnostics</code></a> module) makes this perfectly clear. In this specific case, the output of <code>"\N{U+100}"</code> is the same as the output of <code>"\N{U+00}"</code>, and suppressing the warning does not change this.</p>

<p>It is possible to use the <a href="https://perldoc.perl.org/bytes.html"><code>bytes</code></a> pragma to force byte semantics on the unpack and get the whole string. But what you get is the internal representation, subject to change without notice.</p>

<p>My best advice is to avoid this one unless you <strong>really, really</strong> know what you are doing.</p>

<p>If you <strong>must</strong> use this method (and I <strong>did</strong> warn you) you can make it a little easier on yourself by using</p>

<pre>
say unpack( 'H*', $_ ) =~ s/..\K/ /gr;
</pre>

<p>which produces (for the ASCII string)</p>

<pre>
18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27
</pre>

<p>The <code>/r</code> causes the substitution to return the modified string rather than modifying it in-place, and requires Perl 5.14. Since I knew I was requiring 5.14 I replaced <code>print()</code> with <code>say()</code>.</p>

        
           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_4">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/psc/2022/05/what-happened-to-perl-7.html">What happened to Perl 7?</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by Perl Steering Council
 on Thursday 26 May 2022 01:44</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p>With Perl 5.36.0 just around the corner, we thought that this is a good time to clarify plans for the future of the Perl programming language. We realised that the future was hammered out in a number of steps, across several months. This meant that there hasn't been a single statement we could refer people to. This post is to fill that gap.</p>

        <p>Two years ago Perl 7 was announced. A key idea for Perl 7 was to significantly reduce the boilerplate needed at the top of your code, by enabling a lot of widely used modules / pragmas, but this would have come at the price of breaking some backwards compatibility. This would have meant that some existing code wouldn't have worked without modification.</p>

<p>This prompted a lot of heated discussions: some thought this was a great idea, and some thought it a terrible idea to throw away one of Perl's key strengths. Ultimately this led to a discussion about who had the right to make this decision, now that Larry is no longer involved in Perl (and hasn't been for about 20 years). The end result of all those discussions was a <a href="https://github.com/Perl/perl5/blob/blead/pod/perlgov.pod">new governance structure</a>.</p>

<p>The <a href="https://lists.perl.org/list/perl5-porters.html">Perl 5 Porters</a> ("p5p") mailing list is still where the future of Perl is discussed, and we aim to build consensus, but where that's not possible, the three-person <a href="https://github.com/Perl/perl5/blob/blead/pod/perlgov.pod#the-steering-council">Perl Steering Council</a> (PSC) has ultimate decision making authority on the future of Perl. The PSC is elected annually by the <a href="https://github.com/Perl/perl5/blob/blead/pod/perlgov.pod#the-core-team">core team</a> (the subset of p5p who have contributed most to Perl "recently"). The trigger for an election is the annual release of Perl, so the next election will happen after 5.36.0 is released.</p>

<p>The first PSC was elected in late 2020, and one of our first tasks was to create a plan for the future of Perl, and to put that in motion. A lot of discussion and iteration followed, but the strategy we agreed is:</p>

<ol>
<li>Existing sensibly-written Perl 5 code should continue to run under future releases of Perl. Sometimes this won't be possible, for example if a security bug requires a change that breaks backward compatibility.</li>
<li>We want to drive the language forwards, increasing the rate at which new features are introduced. This resulted in the introduction of the <a href="https://github.com/Perl/RFCs/blob/main/docs/process.md">RFC process</a>, which anyone can use to propose language changes. </li>
<li>We want to make it easy for people to use these new features, and want to do what we can to encourage their adoption.</li>
</ol>

<p>At the heart of this strategy are feature guards and version bundles.</p>

<h2>Features</h2>

<p>If a new language feature isn't backwards compatible, then it is protected with a feature guard. For example, Perl 5.010 introduced the <code>say</code> keyword. But it couldn't be enabled by default, as someone might have a say function in their code, which it would conflict with. So if you want to use say, you have to request it using the <a href="https://perldoc.perl.org/feature">feature pragma</a>:</p>

<pre>
    use feature 'say';
    say "hello, world";
</pre>

<h2>Unguarded features</h2>

<p>Not all new language features have a guard. If new syntax is introduced which would result in a syntax error in all previous versions of Perl, then it doesn't need a guard. For example, 5.36.0 introduces new syntax which lets you process N items at a time from a list:</p>

<pre>
    foreach my ($key, $value) (%hash) {
    …
    }
</pre>

<p>This new syntax doesn't have a feature guard, so it's available to use at line 0 (i.e. before you <code>use v5.36</code>).</p>

<h2>Experimental features</h2>

<p>Sometimes a feature will be marked as experimental, which means that we're not sure whether it's in the final form, and we'd like people to play with it and give feedback. The experimental status means that we reserve the right to change everything about it in a subsequent release, or even to remove it. If you use such a feature, you'll get a warning, which you can suppress with an extra line of code:</p>

<pre>
    use feature 'try';
    no warnings "experimental::try";
</pre>

<p>In general you shouldn't use experimental features in production code.</p>

<h2>Version bundles</h2>

<p>A lot of features have been added since 5.10.0, and a bunch more have been added in 5.36.0. That can mean that you end up putting a lot of <code>use …</code> lines at the top of all your code. Instead, you can enable all the stable (i.e. non-experimental) features provided in Perl 5.36.0 that weren't included in the original Perl 5 release, with just put this one line at the top of your code:</p>

<pre>
    use v5.36;
</pre>

<p>This does three things:</p>

<ol>
<li>it tells the perl interpreter (and human readers), that your code requires perl 5.36.0 or later to run;</li>
<li>it enables all additional non-experimental features provided by Perl;</li>
<li>it uses a number of additional pragmas that have been accepted as good practice.</li>
</ol>

<p>That one line is equivalent to:</p>

<pre>
    require v5.36;
    use strict;
    use warnings;
    use feature 'say';
    use feature 'state';
    use feature 'current_sub';
    use feature 'fc';
    use feature 'lexical_subs';
    use feature 'signatures';
    use feature 'isa';
    use feature 'bareword_filehandles';
    use feature 'bitwise';
    use feature 'evalbytes';
    use feature 'postderef_qq';
    use feature 'unicode_eval';
    use feature 'unicode_strings';
    no feature 'indirect';
    no feature 'multidimensional';
</pre>

<p>Code that starts with <code>use v5.36</code> will run against future versions of Perl – all versions of Perl know about the version bundles of previous versions of Perl.</p>

<p>Version bundles have two main benefits:</p>

<ul>
<li>they greatly reduce the boilerplate you have to write at the top of your code, and</li>
<li>they document what version of Perl your code was written to. Version bundles have been supported since 5.10.0, but not widely understood or used. With the release of 5.36 we hope to change that.</li>
</ul>

<p>We have a lot more proposals in the pipeline, including the introduction of richer OO syntax. We expect 5.38 to include another swathe of new features.</p>

<h2>What about Perl 7?</h2>

<p>For now, our plan is to continue introducing new features and to resolve all existing experimental features, so they're either dropped, or become non-experimental features (and so are included in the version bundle).</p>

<p>The downside with this is that people often can't remember which version of Perl introduced which feature(s).</p>

<p>At some point in the future, the PSC may decide that the set of features, taken together, represent a big enough step forward to justify a new baseline for Perl. If that happens, then the version will be bumped to 7.0.</p>

<p>If this happens, Perl 7 will still be backwards compatible with Perl 5 by default – you'll have to put <code>use v7;</code> at the top of your code to use all the new features.</p>

<p>Think of <code>use v7</code> like Modern::Perl and similar modules.</p>

<p>Annual releases would continue, so it would then be followed by 7.2, 7.4, etc. We have a lot of good ideas in the works, and if we can keep up the momentum of the last year, then things look promising. And in the meantime we'll continue with 5.XX releases.</p>

           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_5">
            <div class="card-header">
              <h2 class="card-title"><a href="https://blog.perl-academy.de/2022-05-25-auf-dem-weg-zu-perl-536-a-gesammelte-werke">Auf dem Weg zu Perl 5.36 – gesammelte Werke</a></h2>
<a href="https://blog.perl-academy.de/" class="badge badge-primary" style="float: left">Perl-Academy.de</a>

              <p class="text-right"><small>Published
 on Wednesday 25 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Zum Abschluss der kleinen Blogpost-Serie ein Artikel der noch ein paar Änderungen aufsammelt, die nicht in die anderen Artikel gepasst haben.       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_6">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/dancer2-solution-1-calculator">Dancer2: Solution: 1 - Calculator</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Monday 23 May 2022 10:30</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>
Part of the Dancer2 video course available both to <a href="/pro">Pro</a> subscribers and attendees of the <a href="https://leanpub.com/c/dancer">Perl Dancer course</a> on Leanpub.
<p>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_7">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/565.html">#565 - Supporting the Perl Weekly</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 23 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi there!</p>
<p>Two weeks ago I wrote about the issues we are facing with the Perl Weekly. I got a lot of responses and then yesterday I also noticed there were quite few comments on <a href="https://www.reddit.com/r/perl/comments/unb6yd/do_you_want_the_perl_weekly_to_continue/">Reddit</a> as well. Let me thank all the responses now.</p>
<p>Many people suggested that we could switch to sending out every 2 weeks or once a month, but I don't think either of those would be a good idea. Some people suggested we (Mohammad and myself) should write more articles or interview people. Well, no. The Perl Weekly is specifically about collecting <b>your</b> content and sharing it. So it is the wider Perl community that could solve the content-problem by writing more articles. Which brings me to one of our posts today. Dave Cross had another nice idea, <a href="https://dev.to/davorg/cpan-module-tutorials-2be9">linking to tutorials of CPAN modules from MetaCPAN</a>. You don't need to write some article on a topic that has never been mentioned. It would be enough to take one of the modules you use anyway. Put together an example on how to use it. Add some explanations and then post it on your blog. (Which could be very simple using GitHub pages.) Send us the link and also include it in the CSV file of Dave.</p>
<p>Some people suggested to have a (better) web version and RSS feed. You are welcome to send a PR changing the web version to be better. The source of the Perl Weekly is <a href="https://github.com/szabgab/perlweekly">here</a>. We also have two different RSS feeds: <a href="https://perlweekly.com/perlweekly.rss">latest edition</a>, <a href="https://perlweekly.com/index.rss">10 most recent editions</a>. However these get updated only once a week. If you really like RSS, you might want to use the <a href="https://perl.theplanetarium.org/">Perl Planetarium</a> by who else, Dave Cross.</p>
<p>There was some back-and-forth on Reddit whether the Perl-related Facebook groups are the best thing on earth or the worst thing on Earth. I think both sides are right. On one hand Facebook is a black hole that anything going there is invisible from the outside world - that's why I don't often link to it. On the other hand the <a href="https://www.facebook.com/groups/perlcommunity">Perl Community</a> and the <a href="https://www.facebook.com/groups/perlprogrammers/">Perl programmers</a> Facebook groups seem to be the most active locations for discussing anything about Perl. So let's thank those Perl Mongers who spend time in these groups helping the newcomers. If I may suggest something, if you are not doing it yet: You could also try to direct them to the Perl Weekly and you could also work with them to set up a public blog (or use <a href="https://dev.to/t/perl">dev.to</a>) and write a post about something Perl related.</p>
<p>Finally, some people suggested to ask for a grant from The Perl Foundation. Here is the thing. Money in itself is not an issue, but feeling that the work we do is appreciated goes a long way. The many responses I got show that there are at least a few people who value our work. Thank you!. However, if the issue of money was already raised you could use some money to show your appreciation. <a href="https://www.patreon.com/manwar">Mohammad S Anwar</a> has Patreon account with currently 23 supporters. Can we double this number? I also have a Patreon account, but for me a much better boost would be if you checked out the web-site of my son and became a user and a paying subscriber. It is called <a href="https://torto.ai/welcome?utm_source=perlweekly&utm_medium=email&utm_campaign=perlweekly565">torto.ai</a>. That will make me a lot happier than any money you might send to my Patreon account.</p>
<p>So that's about it for now.</p>
<p>Enjoy your week!</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_8">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2022/05/22#pwc165">SVG Plots of Points and Lines</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 22 May 2022 23:16</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from the weekly challenge problem statement and demonstrate 
the working solution.</em></p>

<h2>Part 1</h2>

<p><em>Plot lines and points in SVG format.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
sub svg_begin{
    return <&lt;BEGIN;
        &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;                                   &lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"&gt;                                                                          &lt;svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
BEGIN
}

sub svg_end{
    return "</svg>";
}

sub svg_point{
    my($x, $y) = @_;
    return "&lt;circle cx=\"$x\" cy=\"$y\" r=\"1\" /&gt;";
}

sub svg_line{
    my($x0, $y0, $x1, $y1) = @_;
    return "&lt;line x1=\"$x0\" x2=\"$x1\" y1=\"$y0\" y2=\"$y1\" style=\"stroke:#006600;\" /&gt;";          
}

sub svg{
    my @lines = @_;
    my $svg = svg_begin;
    for my $line (@_){
        $svg .= svg_point(@{$line}) if @{$line} == 2;
        $svg .= svg_line(@{$line})  if @{$line} == 4;
    }
    return $svg . svg_end;
}


MAIN:{
    my @lines;
    while(<DATA>){
        chomp;
        push @lines, [split(/,/, $_)];
    }
    print svg(@lines);
}


__DATA__
53,10
53,10,23,30
23,30
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;                                   &lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"&gt;                                                                          &lt;svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
&lt;circle cx="53" cy="10" r="1" /&gt;&lt;line x1="53" x2="23" y1="10" y2="30" /&gt;&lt;circle cx="23" cy="30" r="1" /&gt;&lt;/svg&gt;
</code></pre>

<h3>Notes</h3>

<p>Doing the SVG formatting from scratch is not so bad, especially when sticking only
to points and lines. The boiler plate XML is taken from a known good SVG example
and used as a template. </p>

<h2>Part 2</h2>

<p><em>Compute a linear regression and output an SVG plot of the points and regression line.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
sub svg_begin{
    return <&lt;BEGIN;
        &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;                                   &lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"&gt;                                                                          &lt;svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
BEGIN
}

sub svg_end{
    return "</svg>";
}

sub svg_point{
    my($x, $y) = @_;
    return "&lt;circle cx=\"$x\" cy=\"$y\" r=\"1\" /&gt;";
}

sub svg_line{
    my($x0, $y0, $x1, $y1) = @_;
    return "&lt;line x1=\"$x0\" x2=\"$x1\" y1=\"$y0\" y2=\"$y1\" style=\"stroke:#006600;\" /&gt;";          
}

sub svg{
    my @lines = @_;
    my $svg = svg_begin;
    for my $line (@_){
        $svg .= svg_point(@{$line}) if @{$line} == 2;
        $svg .= svg_line(@{$line})  if @{$line} == 4;
    }
    return $svg . svg_end;
}

sub linear_regression{
    my(@points) = @_;
    # 1. Calculate average of your X variable.
    my $sum = 0;
    my $x_avg;
    map{$sum += $_->[0]} @points;
    $x_avg = $sum / @points;
    # 2. Calculate the difference between each X and the average X.
    my @x_differences = map{$_->[0] - $x_avg} @points;
    # 3. Square the differences and add it all up. This is Sx.
    my $sx = 0;
    my @squares = map{$_ * $_} @x_differences;
    map{$sx += $_} @squares;
    # 4. Calculate average of your Y variable.
    $sum = 0;
    my $y_avg;
    map{$sum += $_->[1]} @points;
    $y_avg = $sum / @points;
    my @y_differences = map{$_->[1] - $y_avg} @points;
    # 5. Multiply the differences (of X and Y from their respective averages) and add them all together.  This is Sxy.
    my $sxy = 0;
    @squares = map {$y_differences[$_] * $x_differences[$_]} 0 .. @points - 1;
    map {$sxy += $_} @squares;
    # 6. Using Sx and Sxy, you calculate the intercept by subtracting Sx / Sxy * AVG(X) from AVG(Y).
    my $m = $sxy / $sx;
    my $y_intercept = $y_avg - ($sxy / $sx * $x_avg);
    my @sorted = sort {$a->[0] <=> $b->[0]} @points;
    my $max_x = $sorted[@points - 1]->[0];
    return [0, $y_intercept, $max_x + 10, $m * ($max_x + 10) + $y_intercept];
}

MAIN:{
    my @points;
    while(<DATA>){
        chomp;
        push @points, [split(/,/, $_)];
    }
    push @points, linear_regression(@points);
    print svg(@points);    
}


__DATA__
333,129
39,189
140,156
292,134
393,52
160,166
362,122
13,193
341,104
320,113
109,177
203,152
343,100
225,110
23,186
282,102
284,98
205,133
297,114
292,126
339,112
327,79
253,136
61,169
128,176
346,72
316,103
124,162
65,181
159,137
212,116
337,86
215,136
153,137
390,104
100,180
76,188
77,181
69,195
92,186
275,96
250,147
34,174
213,134
186,129
189,154
361,82
363,89
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-2.pl
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
           &lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"&gt;
           &lt;svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
&lt;circle cx="333" cy="129" r="1" /&gt;&lt;circle cx="39" cy="189" r="1" /&gt;&lt;circle cx="140" cy="156" r="1" /&gt;&lt;circle cx="292" cy="134" r="1" /&gt;&lt;circle cx="393" cy="52" r="1" /&gt;&lt;circle cx="160" cy="166" r="1" /&gt;&lt;circle cx="362" cy="122" r="1" /&gt;&lt;circle cx="13" cy="193" r="1" /&gt;&lt;circle cx="341" cy="104" r="1" /&gt;&lt;circle cx="320" cy="113" r="1" /&gt;&lt;circle cx="109" cy="177" r="1" /&gt;&lt;circle cx="203" cy="152" r="1" /&gt;&lt;circle cx="343" cy="100" r="1" /&gt;&lt;circle cx="225" cy="110" r="1" /&gt;&lt;circle cx="23" cy="186" r="1" /&gt;&lt;circle cx="282" cy="102" r="1" /&gt;&lt;circle cx="284" cy="98" r="1" /&gt;&lt;circle cx="205" cy="133" r="1" /&gt;&lt;circle cx="297" cy="114" r="1" /&gt;&lt;circle cx="292" cy="126" r="1" /&gt;&lt;circle cx="339" cy="112" r="1" /&gt;&lt;circle cx="327" cy="79" r="1" /&gt;&lt;circle cx="253" cy="136" r="1" /&gt;&lt;circle cx="61" cy="169" r="1" /&gt;&lt;circle cx="128" cy="176" r="1" /&gt;&lt;circle cx="346" cy="72" r="1" /&gt;&lt;circle cx="316" cy="103" r="1" /&gt;&lt;circle cx="124" cy="162" r="1" /&gt;&lt;circle cx="65" cy="181" r="1" /&gt;&lt;circle cx="159" cy="137" r="1" /&gt;&lt;circle cx="212" cy="116" r="1" /&gt;&lt;circle cx="337" cy="86" r="1" /&gt;&lt;circle cx="215" cy="136" r="1" /&gt;&lt;circle cx="153" cy="137" r="1" /&gt;&lt;circle cx="390" cy="104" r="1" /&gt;&lt;circle cx="100" cy="180" r="1" /&gt;&lt;circle cx="76" cy="188" r="1" /&gt;&lt;circle cx="77" cy="181" r="1" /&gt;&lt;circle cx="69" cy="195" r="1" /&gt;&lt;circle cx="92" cy="186" r="1" /&gt;&lt;circle cx="275" cy="96" r="1" /&gt;&lt;circle cx="250" cy="147" r="1" /&gt;&lt;circle cx="34" cy="174" r="1" /&gt;&lt;circle cx="213" cy="134" r="1" /&gt;&lt;circle cx="186" cy="129" r="1" /&gt;&lt;circle cx="189" cy="154" r="1" /&gt;&lt;circle cx="361" cy="82" r="1" /&gt;&lt;circle cx="363" cy="89" r="1" /&gt;&lt;line x1="0" x2="403" y1="200.132272535582" y2="79.2498029303056" /&gt;&lt;/svg&gt;
</code></pre>

<h3>Notes</h3>

<p>I re-use the SVG code from Part 1 and add in the linear regression calculation. Continuing
a small habit from the past few weeks of these challenges I am making much use of <code>map</code> to
keep the code as small, and yet still readable, as possible. The linear regression 
calculation is fairly straightforward, as much as I hate having a terse writeup on this
I am not sure I have much more to say!</p>

<h2>References</h2>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-165/">Challenge 165</a></p>

<p><a href="https://www.learnbymarketing.com/tutorials/linear-regression-by-hand-in-excel/#:~:text=To%20calculate%20our%20regression%20coefficient%20we%20divide%20the,needs%20to%20make%20up%20for%20the%20average%20case.">Linear Regression Calculation</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_9">
            <div class="card-header">
              <h2 class="card-title"><a href="http://blogs.perl.org/users/laurent_r/2022/05/perl-weekly-challenge-165-scalable-vestor-graphics.html">Perl Weekly Challenge 165: Scalable Vector Graphics</a></h2>
<a href="http://blogs.perl.org/" class="badge badge-primary" style="float: left">blogs.perl.org</a>

              <p class="text-right"><small>Published by laurent_r
 on Sunday 22 May 2022 03:42</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
        <p>These are some answers to the Week 165 of the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-165/">Perl Weekly Challenge</a> organized by <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a>.</p>

<p>This week, Task 1 and part of Task 2 relate to Scalable Vector Graphics (SVG). I&#8217;d been using SVG a very long time ago and certainly didn&#8217;t remember any of the details. So, in my <a href="http://blogs.perl.org/users/laurent_r/2022/05/perl-weekly-challenge-165-line-of-best-fit.html">first blog relating to PWC 165</a>, I stated that I didn&#8217;t have time for that and covered only the part of the challenge not related to SVG. I also said that, in the event that I find some time over the weekend, I might come back and fulfill the SVG part. I thought at the time that this was rather unlikely, but I was finally able to cover the SVG part, at least in Raku.</p>

<h2>Task 1: Scalable Vector Graphics (SVG)</h2>

<p><em>Scalable Vector Graphics (SVG) are not made of pixels, but lines, ellipses, and curves, that can be scaled to any size without any loss of quality. If you have ever tried to resize a small JPG or PNG, you know what I mean by “loss of quality”! What many people do not know about SVG files is, they are simply XML files, so they can easily be generated programmatically.</em></p>

<p><em>For this task, you may use external library, such as Perl’s <a href="https://metacpan.org/pod/SVG">SVG</a> library, maintained in recent years by our very own Mohammad S Anwar. You can instead generate the XML yourself; it’s actually quite simple. The source for the example image for Task #2 might be instructive.</em></p>

<p><em>Your task is to accept a series of points and lines in the following format, one per line, in arbitrary order:</em></p>

<p><em>Point: x,y</em></p>

<p><em>Line: x1,y1,x2,y2</em></p>

<p><em>Example:</em></p>

<pre><code>53,10
53,10,23,30
23,30
</code></pre>

<p><em>Then, generate an SVG file plotting all points, and all lines. If done correctly, you can view the output .svg file in your browser.</em></p>

<h3>Scalable Vector Graphics (SVG) in Raku</h3>

<p>I created two subroutines, <code>make-point</code> and <code>make-line</code>, to create the necessary data structures. The last item of the <code>@input</code> has three parts and should generate a warning, since input items should have either 2 or 4 parts. </p>

<p>Note that SVG probably includes a scaling factor, but I couldn&#8217;t find any information about it. So I rolled out my own <code>\SCALE</code> scaling factor to make the output larger and more readable.</p>

<pre><code>use SVG;
my \SCALE = 5;

my ( @points, @lines);
my @input = &lt;53,10  53,10,23,30  23,30  34,35,36&gt;;
for @input -&gt; $val {
    my @items = split /','/, $val;
    if @items.elems == 2 {
        make-point(@items)
    } elsif @items.elems == 4 {
        make-line(@items);
    } else { 
        note "Error on item ", @items;
    }
}

say ( SVG.serialize(svg =&gt; [ width =&gt; 500, height =&gt; 500, |@points, |@lines ] ));

sub make-point (@dots) {
    @dots = map { $_ * SCALE }, @dots;
    my $point = circle =&gt;  
        [ cx =&gt; @dots[0],
          cy =&gt; @dots[1],
          r =&gt; 3,
          fill =&gt; 'forestgreen' ];
    push @points, $point;
}

sub make-line (@dots) {
    @dots = map { $_ * SCALE }, @dots;
    my $line = line =&gt; 
        [ x1 =&gt; @dots[0],
          y1 =&gt; @dots[1],
          x2 =&gt; @dots[2],
          y2 =&gt; @dots[3],
          stroke =&gt; 'navy' ];
    push @lines, $line;
}
</code></pre>

<p>The SVG output, slightly reformatted for better readability, is as follows:</p>

<pre><code>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" 
xmlns:xlink="http://www.w3.org/1999/xlink" width="500" height="500"&gt;
&lt;circle cx="265" cy="50" r="3" fill="forestgreen" /&gt;
&lt;circle cx="115" cy="150" r="3" fill="forestgreen" /&gt;
&lt;line x1="265" y1="50" x2="115" y2="150" stroke="navy" /&gt;&lt;/svg&gt;
</code></pre>

<p>And this is a graphical rendering of it:</p>

<p><img alt="svg1bis.png" src="http://blogs.perl.org/users/laurent_r/svg1bis.png" width="322" height="155" class="mt-image-none" style="" /></p>

<h3>Scalable Vector Graphics (SVG) in Perl</h3>

<p>In Perl, for a change, we will write directly the SVG data.</p>

<pre><code>use strict;
use warnings;
use feature "say";
use constant SCALE =&gt; 5;

my ( @points, @lines);
my $out = qq{&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" 
xmlns:xlink="http://www.w3.org/1999/xlink" width="500" height="500"&gt;\n};
my @input = qw&lt;53,10 53,10,23,30  23,30  34,35,36&gt;;
for my $val (@input) {
    my @items = split /,/, $val;
    # say "@items";
    if (@items == 2) {
        make_point(@items)
    } elsif (@items == 4) {
        make_line(@items);
    } else { 
        warn "Error on item ", @items;
    }
}
$out .= "&lt;/svg&gt;";
say $out;

sub make_point {
    my @dots = map $_ * SCALE, @_;
    my $point = qq{&lt;circle cx= "$dots[0]" cy="$dots[1]" r="3" fill="forestgreen"/&gt;\n};
    $out .= $point;
}

sub make_line {
    my @dots = map $_ * SCALE, @_;
    my $line = qq{&lt;line x1="$dots[0]" y1="$dots[1]" x2="$dots[2]" y2="$dots[3]" };
    $line .= qq{stroke="navy" /&gt;\n};
    $out .= $line
}
</code></pre>

<p>This program displays the following SVG output:</p>

<pre><code>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" width="500" height="500"&gt;
&lt;circle cx= "265" cy="50" r="3" fill="forestgreen"/&gt;
&lt;line x1="265" y1="50" x2="115" y2="150" stroke="navy" /&gt;
&lt;circle cx= "115" cy="150" r="3" fill="forestgreen"/&gt;
&lt;/svg&gt;
</code></pre>

<p>And this is the graphgical rendering:</p>

<p><img alt="svg1bis.png" src="http://blogs.perl.org/users/laurent_r/svg1bis.png" width="322" height="155" class="mt-image-none" style="" /></p>

<h3>Task 2: Line of Best Fit</h3>

<p><em>When you have a scatter plot of points, a line of best fit is the line that best describes the relationship between the points, and is very useful in statistics. Otherwise known as linear regression, here is an example of what such a line might look like:</em></p>

<p><img alt="line_of_best_fit.jpg" src="http://blogs.perl.org/users/laurent_r/line_of_best_fit.jpg" width="422" height="319" class="mt-image-none" style="" /></p>

<p><em>The method most often used is known as the <a href="https://www.mathsisfun.com/data/least-squares-regression.html">least squares method</a>, as it is straightforward and efficient, but you may use any method that generates the correct result.</em></p>

<p><em>Calculate the line of best fit for the following 48 points:</em></p>

<pre><code>333,129  39,189 140,156 292,134 393,52  160,166 362,122  13,193
341,104 320,113 109,177 203,152 343,100 225,110  23,186 282,102
284,98  205,133 297,114 292,126 339,112 327,79  253,136  61,169
128,176 346,72  316,103 124,162  65,181 159,137 212,116 337,86
215,136 153,137 390,104 100,180  76,188  77,181  69,195  92,186
275,96  250,147  34,174 213,134 186,129 189,154 361,82  363,89
</code></pre>

<p><em>Using your rudimentary graphing engine from Task #1, graph all points, as well as the line of best fit.</em></p>

<p>So, Task 2 is about line of best fit or linear regression.</p>

<p>If we consider a cloud of <code>n</code> points with coordinates <code>(x, y)</code>, the line of best fit is defined as follows:</p>

<p>The equation for the <em>slope</em> <code>m</code> is:</p>

<pre><code>    n * sum(xy) - sum(x) * sum(y)
m = -----------------------------
    n * sum(x²) - sum(x) * sum(x)
</code></pre>

<p>The <em>y-intercept</em> (i.e. value of <code>y</code> on the vertical axis, when <code>x</code> = 0) <code>b</code> is:</p>

<pre><code>    sum(y) - m * sum(x)
b = -------------------
           n
</code></pre>

<p>The equation of the line is:</p>

<pre><code>y = mx + b
</code></pre>

<h3>Line of Best Fit in Raku</h3>

<p>The following program is an application of the explanations above. We split the input string on spaces and on commas, to get an array of <code>(x, y)</code> values. The <code>lsm</code> subroutine applies the above least square method formulas to find the slope and intercept. Note that for displaying line of best fit equation, we had to handle two different cases, depending on whether the intercept is positive or negative. Otherwise, for a negative intercept, we would display the line equation as follows:</p>

<pre><code>The equation of the line of best fit is: y = 1.00 x + -1.00
</code></pre>

<p>which is not satisfactory. </p>

<p>Also note the use of the <code>»</code> <a href="https://docs.raku.org/syntax/%3C%3C">hyper operator</a> when reading the input data to apply the second <code>split</code> to each of the values returned by the first <code>split</code>.</p>

<p>Besides, we reuse the <code>make-point</code> and <code>make-line</code> subroutines created above (slightly modified) for preparing the SVG output.</p>

<pre><code>use SVG;
my \SCALE = 1;

my $input =
   '333,129  39,189 140,156 292,134 393,52  160,166 362,122  13,193
    341,104 320,113 109,177 203,152 343,100 225,110  23,186 282,102
    284,98  205,133 297,114 292,126 339,112 327,79  253,136  61,169
    128,176 346,72  316,103 124,162  65,181 159,137 212,116 337,86
    215,136 153,137 390,104 100,180  76,188  77,181  69,195  92,186
    275,96  250,147  34,174 213,134 186,129 189,154 361,82  363,89';

my @points = $input.split(/\s+/)&gt;&gt;.split(/','/);
my (@dots, @lines);
make-point($_) for @points;
my ($slope, $intercept) = lsm(@points);
say "Slope: $slope, intercept = $intercept";
my $sign = $intercept &lt; 0 ?? '-' !! '+';
printf "The equation of the line of best fit is: y = %.2f x %s %.2f \n\n", $slope, $sign, $intercept.abs;
# compute some arbitrary values for the line - say for x = 400
my $x = 400;
my $y = $slope * $x + $intercept;
make-line([0, $intercept, $x, $y]);
say ( SVG.serialize(svg =&gt; [ width =&gt; 500, height =&gt; 500, |@dots, |@lines ]));

sub lsm (@points) {
    my ($s-x, $s-y, $s-xy, $s-x2) = 0 xx 4;
    for @points -&gt; $point {
        my ($x, $y) = $point[0, 1];
        # say "$x $y";
        $s-x += $x;
        $s-y += $y;
        $s-xy += $x * $y;
        $s-x2 += $x ** 2;
    }
    my $n = @points.elems;
    my $slope = ($n * $s-xy - $s-x * $s-y) / ($n * $s-x2 - $s-x ** 2);
    my $intercept = ($s-y - $slope * $s-x) / $n;
    return $slope, $intercept;
}

sub make-point (@points is copy) {
    @points = map { $_ * SCALE }, @points;
    my $point = circle =&gt;  
        [ cx =&gt; @points[0],
          cy =&gt; @points[1],
          r =&gt; 3,
          fill =&gt; 'forestgreen' ];
    push @dots, $point;
}

sub make-line (@dots) {
    @dots = map { $_ * SCALE }, @dots;
    my $line = line =&gt; 
        [ x1 =&gt; @dots[0],
          y1 =&gt; @dots[1],
          x2 =&gt; @dots[2],
          y2 =&gt; @dots[3],
          stroke =&gt; 'navy' ];
    push @lines, $line;
}
</code></pre>

<p>This program displays the following output:</p>

<pre><code>$ ./raku lsm2.raku
Slope: -0.2999565, intercept = 200.132272536
The equation of the line of best fit is: y = -0.30 x + 200.13

&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" 
xmlns:xlink="http://www.w3.org/1999/xlink" width="500" height="500"&gt;
&lt;circle cx="333" cy="129" r="3" fill="forestgreen" /&gt;&lt;circle cx="39" cy="189" r="3" fill="forestgreen" /&gt;
&lt;circle cx="140" cy="156" r="3" fill="forestgreen" /&gt;&lt;circle cx="292" cy="134" r="3" fill="forestgreen" /&gt;
&lt;circle cx="393" cy="52" r="3" fill="forestgreen" /&gt;&lt;circle cx="160" cy="166" r="3" fill="forestgreen" /&gt;
&lt;circle cx="362" cy="122" r="3" fill="forestgreen" /&gt;&lt;circle cx="13" cy="193" r="3" fill="forestgreen" /&gt;
&lt;circle cx="341" cy="104" r="3" fill="forestgreen" /&gt;&lt;circle cx="320" cy="113" r="3" fill="forestgreen" /&gt;
&lt;circle cx="109" cy="177" r="3" fill="forestgreen" /&gt;&lt;circle cx="203" cy="152" r="3" fill="forestgreen" /&gt;
&lt;circle cx="343" cy="100" r="3" fill="forestgreen" /&gt;&lt;circle cx="225" cy="110" r="3" fill="forestgreen" /&gt;
&lt;circle cx="23" cy="186" r="3" fill="forestgreen" /&gt;&lt;circle cx="282" cy="102" r="3" fill="forestgreen" /&gt;
&lt;circle cx="284" cy="98" r="3" fill="forestgreen" /&gt;&lt;circle cx="205" cy="133" r="3" fill="forestgreen" /&gt;
&lt;circle cx="297" cy="114" r="3" fill="forestgreen" /&gt;&lt;circle cx="292" cy="126" r="3" fill="forestgreen" /&gt;
&lt;circle cx="339" cy="112" r="3" fill="forestgreen" /&gt;&lt;circle cx="327" cy="79" r="3" fill="forestgreen" /&gt;
&lt;circle cx="253" cy="136" r="3" fill="forestgreen" /&gt;&lt;circle cx="61" cy="169" r="3" fill="forestgreen" /&gt;
&lt;circle cx="128" cy="176" r="3" fill="forestgreen" /&gt;&lt;circle cx="346" cy="72" r="3" fill="forestgreen" /&gt;
&lt;circle cx="316" cy="103" r="3" fill="forestgreen" /&gt;&lt;circle cx="124" cy="162" r="3" fill="forestgreen" /&gt;
&lt;circle cx="65" cy="181" r="3" fill="forestgreen" /&gt;&lt;circle cx="159" cy="137" r="3" fill="forestgreen" /&gt;
&lt;circle cx="212" cy="116" r="3" fill="forestgreen" /&gt;&lt;circle cx="337" cy="86" r="3" fill="forestgreen" /&gt;
&lt;circle cx="215" cy="136" r="3" fill="forestgreen" /&gt;&lt;circle cx="153" cy="137" r="3" fill="forestgreen" /&gt;
&lt;circle cx="390" cy="104" r="3" fill="forestgreen" /&gt;&lt;circle cx="100" cy="180" r="3" fill="forestgreen" /&gt;
&lt;circle cx="76" cy="188" r="3" fill="forestgreen" /&gt;&lt;circle cx="77" cy="181" r="3" fill="forestgreen" /&gt;
&lt;circle cx="69" cy="195" r="3" fill="forestgreen" /&gt;&lt;circle cx="92" cy="186" r="3" fill="forestgreen" /&gt;
&lt;circle cx="275" cy="96" r="3" fill="forestgreen" /&gt;&lt;circle cx="250" cy="147" r="3" fill="forestgreen" /&gt;
&lt;circle cx="34" cy="174" r="3" fill="forestgreen" /&gt;&lt;circle cx="213" cy="134" r="3" fill="forestgreen" /&gt;
&lt;circle cx="186" cy="129" r="3" fill="forestgreen" /&gt;&lt;circle cx="189" cy="154" r="3" fill="forestgreen" /&gt;
&lt;circle cx="361" cy="82" r="3" fill="forestgreen" /&gt;&lt;circle cx="363" cy="89" r="3" fill="forestgreen" /&gt;
&lt;line x1="0" y1="200.132272536" x2="400" y2="80.149672431" stroke="navy" /&gt;
&lt;/svg&gt;
</code></pre>

<p>And this is a graphiical rendering of it:</p>

<p><img alt="svg2.png" src="http://blogs.perl.org/users/laurent_r/svg2.png" width="411" height="186" class="mt-image-none" style="" /></p>

<h2>Wrapping up</h2>

<p>The next week Perl Weekly Challenge will start soon. If you want to participate in this challenge, please check https://perlweeklychallenge.org/ and make sure you answer the challenge before 23:59 BST (British summer time) on May 29, 2022. And, please, also spread the word about the Perl Weekly Challenge if you can.</p>

        

           </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_10">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2022/05/cccxciii-7-great-cpan-modules-released.html">(cccxciii) 7 great CPAN modules released last week</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 21 May 2022 15:41</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Updates for <i>great CPAN modules</i> released last week. A module is considered <i>great</i> if its favorites count is greater or equal than 12.<br/><br/><ol><li><a href='https://metacpan.org/release/OLIVER/App-Netdisco-2.052006' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>App::Netdisco</span></b></a> - An open source web-based network management tool. <ul>  <li>Version: <strong>2.052006</strong> on 2022-05-17</li>  <li>Votes: 14</li>  <li>Previous version: 2.052005 was 25 days before</li></ul></li><li><a href='https://metacpan.org/release/GUGOD/App-perlbrew-0.95' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>App::perlbrew</span></b></a> - Manage perl installations in your $HOME <ul>  <li>Version: <strong>0.95</strong> on 2022-05-15</li>  <li>Votes: 168</li>  <li>Previous version: 0.94 was 5 months, 11 days before</li></ul></li><li><a href='https://metacpan.org/release/RIBASUSHI/DBIx-Class-0.082843' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>DBIx::Class</span></b></a> - Extensible and flexible object <-> relational mapper. <ul>  <li>Version: <strong>0.082843</strong> on 2022-05-17</li>  <li>Votes: 279</li>  <li>Previous version: 0.08271 was 5 years, 11 months before</li></ul></li><li><a href='https://metacpan.org/release/OALDERS/libwww-perl-6.66' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>LWP</span></b></a> - The World-Wide Web library for Perl <ul>  <li>Version: <strong>6.66</strong> on 2022-05-18</li>  <li>Votes: 156</li>  <li>Previous version: 6.65 was 9 days before</li></ul></li><li><a href='https://metacpan.org/release/CHROMATIC/Modern-Perl-1.20220515' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Modern::Perl</span></b></a> - enable all of the features of Modern Perl with one import <ul>  <li>Version: <strong>1.20220515</strong> on 2022-05-15</li>  <li>Votes: 47</li>  <li>Previous version: 1.20200211 was 2 years, 3 months, 4 days before</li></ul></li><li><a href='https://metacpan.org/release/KIMOTO/SPVM-0.9517' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>SPVM</span></b></a> - SPVM Language <ul>  <li>Version: <strong>0.9517</strong> on 2022-05-19</li>  <li>Votes: 26</li>  <li>Previous version: 0.9516 was 8 days before</li></ul></li><li><a href='https://metacpan.org/release/MANWAR/SVG-2.87' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>SVG</span></b></a> - Perl extension for generating Scalable Vector Graphics (SVG) documents. <ul>  <li>Version: <strong>2.87</strong> on 2022-05-19</li>  <li>Votes: 18</li>  <li>Previous version: 2.86 was 1 year, 27 days before</li></ul></li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_11">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2022/05/dvii-metacpan-weekly-report.html">(dvii) metacpan weekly report </a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 21 May 2022 15:38</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>This is the weekly favourites list of CPAN distributions. Votes count: 54</p><p>This week there isn't any remarkable distribution<br /></p><p>Build date: 2022/05/21 13:37:15 GMT</p><br /><p>Clicked for <u>first time</u>:</p><ul><li><a href="https://metacpan.org/module/Addr::MyIP" target="_blank">Addr::MyIP</a> - Get your public facing IPv4 or IPv6 address</li><li><a href="https://metacpan.org/module/App::Pod" target="_blank">App::Pod</a> - The great new App::Pod!</li><li><a href="https://metacpan.org/module/App::ProxyThat" target="_blank">App::ProxyThat</a> - Proxy an URL from the command line</li><li><a href="https://metacpan.org/module/Dancer2::Plugin::Auth::Extensible::Provider::DBIC" target="_blank">Dancer2::Plugin::Auth::Extensible::Provider::DBIC</a> - authenticate via the Dancer2::Plugin::DBIC plugin</li><li><a href="https://metacpan.org/module/Stat::lsMode" target="_blank">Stat::lsMode</a> - format file modes like the ls -l command does</li><li><a href="https://metacpan.org/module/Text::Abbrev" target="_blank">Text::Abbrev</a> - abbrev - create an abbreviation table from a list</li><li><a href="https://metacpan.org/module/WebService::HashiCorp::Vault" target="_blank">WebService::HashiCorp::Vault</a> - Perl API for HashiCorp's Vault</li></ul><br /><p><u>Increasing</u> its reputation:</p><ul><li><a href="https://metacpan.org/module/ack" target="_blank">ack</a> (+1=126)</li><li><a href="https://metacpan.org/module/App::cpanminus" target="_blank">App::cpanminus</a> (+1=264)</li><li><a href="https://metacpan.org/module/App::MultiSsh" target="_blank">App::MultiSsh</a> (+1=3)</li><li><a href="https://metacpan.org/module/App::perlbrew" target="_blank">App::perlbrew</a> (+1=168)</li><li><a href="https://metacpan.org/module/App::Uni" target="_blank">App::Uni</a> (+1=15)</li><li><a href="https://metacpan.org/module/Archive::Tar" target="_blank">Archive::Tar</a> (+1=16)</li><li><a href="https://metacpan.org/module/Carmel" target="_blank">Carmel</a> (+1=24)</li><li><a href="https://metacpan.org/module/Carp::Always" target="_blank">Carp::Always</a> (+1=34)</li><li><a href="https://metacpan.org/module/Carton" target="_blank">Carton</a> (+1=114)</li><li><a href="https://metacpan.org/module/CPAN" target="_blank">CPAN</a> (+1=34)</li><li><a href="https://metacpan.org/module/Data::Dumper" target="_blank">Data::Dumper</a> (+1=95)</li><li><a href="https://metacpan.org/module/DateTime::Format::Natural" target="_blank">DateTime::Format::Natural</a> (+1=16)</li><li><a href="https://metacpan.org/module/DBI" target="_blank">DBI</a> (+1=253)</li><li><a href="https://metacpan.org/module/DBIx::Class::AuditAny" target="_blank">DBIx::Class::AuditAny</a> (+1=2)</li><li><a href="https://metacpan.org/module/Deep::Hash::Utils" target="_blank">Deep::Hash::Utils</a> (+1=6)</li><li><a href="https://metacpan.org/module/Devel::NYTProf" target="_blank">Devel::NYTProf</a> (+1=175)</li><li><a href="https://metacpan.org/module/Devel::PatchPerl" target="_blank">Devel::PatchPerl</a> (+1=7)</li><li><a href="https://metacpan.org/module/Devel::Profile" target="_blank">Devel::Profile</a> (+1=5)</li><li><a href="https://metacpan.org/module/Excel::Grinder" target="_blank">Excel::Grinder</a> (+1=2)</li><li><a href="https://metacpan.org/module/File::Fetch" target="_blank">File::Fetch</a> (+1=4)</li><li><a href="https://metacpan.org/module/Getopt::Long" target="_blank">Getopt::Long</a> (+1=110)</li><li><a href="https://metacpan.org/module/Getopt::Mini" target="_blank">Getopt::Mini</a> (+1=7)</li><li><a href="https://metacpan.org/module/Import::Into" target="_blank">Import::Into</a> (+1=36)</li><li><a href="https://metacpan.org/module/Inline::Files" target="_blank">Inline::Files</a> (+1=3)</li><li><a href="https://metacpan.org/module/JavaScript::QuickJS" target="_blank">JavaScript::QuickJS</a> (+1=2)</li><li><a href="https://metacpan.org/module/lib::relative::to" target="_blank">lib::relative::to</a> (+1=3)</li><li><a href="https://metacpan.org/module/Linux::ACL" target="_blank">Linux::ACL</a> (+1=2)</li><li><a href="https://metacpan.org/module/List::UtilsBy" target="_blank">List::UtilsBy</a> (+1=36)</li><li><a href="https://metacpan.org/module/Log::ger::App" target="_blank">Log::ger::App</a> (+1=2)</li><li><a href="https://metacpan.org/module/Map::Tube" target="_blank">Map::Tube</a> (+1=6)</li><li><a href="https://metacpan.org/module/Modern::Perl" target="_blank">Modern::Perl</a> (+1=47)</li><li><a href="https://metacpan.org/module/Module::CoreList" target="_blank">Module::CoreList</a> (+1=38)</li><li><a href="https://metacpan.org/module/MooX::Private::Attribute" target="_blank">MooX::Private::Attribute</a> (+1=2)</li><li><a href="https://metacpan.org/module/MooX::Struct" target="_blank">MooX::Struct</a> (+1=7)</li><li><a href="https://metacpan.org/module/MooX::TO_JSON" target="_blank">MooX::TO_JSON</a> (+1=3)</li><li><a href="https://metacpan.org/module/Net::Server" target="_blank">Net::Server</a> (+1=30)</li><li><a href="https://metacpan.org/module/Object::Pad" target="_blank">Object::Pad</a> (+1=28)</li><li><a href="https://metacpan.org/module/Path::Tiny" target="_blank">Path::Tiny</a> (+1=170)</li><li><a href="https://metacpan.org/module/Perinci::CmdLine" target="_blank">Perinci::CmdLine</a> (+1=3)</li><li><a href="https://metacpan.org/module/Perinci::CmdLine::Lite" target="_blank">Perinci::CmdLine::Lite</a> (+1=5)</li><li><a href="https://metacpan.org/module/Pod::Perldoc" target="_blank">Pod::Perldoc</a> (+1=8)</li><li><a href="https://metacpan.org/module/Scalar::List::Utils" target="_blank">Scalar::List::Utils</a> (+1=159)</li><li><a href="https://metacpan.org/module/Test::Output" target="_blank">Test::Output</a> (+1=13)</li><li><a href="https://metacpan.org/module/Win32::GUI" target="_blank">Win32::GUI</a> (+1=8)</li><li><a href="https://metacpan.org/module/XML::XPath" target="_blank">XML::XPath</a> (+1=7)</li><li><a href="https://metacpan.org/module/XS::Parse::Keyword" target="_blank">XS::Parse::Keyword</a> (+1=6)</li></ul>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_12">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2022/05/dxxxv-stackoverflow-perl-report.html">(dxxxv) stackoverflow perl report</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 21 May 2022 15:36</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>These are the five most rated questions at <a href="http://www.stackoverflow.com">Stack Overflow</a> last week.<br />Between brackets: [<b>question score</b> / answers count]<br />Build date: 2022-05-21 13:35:54 GMT</p><hr /><ol><li><a href="http://stackoverflow.com/questions/72252537" target="_blank">How do you match \'</a> - [<b>3</b>/2]</li><li><a href="http://stackoverflow.com/questions/72295952" target="_blank">Problem accessing hash imported from CSV in Perl</a> - [<b>2</b>/2]</li><li><a href="http://stackoverflow.com/questions/72268196" target="_blank">Perl Split Function - How to assign a specify array value to a variable in one line</a> - [<b>1</b>/1]</li><li><a href="http://stackoverflow.com/questions/72272318" target="_blank">Perl - substring keywords</a> - [<b>1</b>/1]</li><li><a href="http://stackoverflow.com/questions/72283618" target="_blank">Perl print does not output to screen (when using Socket)</a> - [<b>1</b>/1]</li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_13">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/davorg/cpan-module-tutorials-2be9">CPAN Module Tutorials</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Dave Cross
 on Friday 20 May 2022 13:45</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Here's a nice little project that went from a good idea to something useable in a couple of hours.</p>

<p>We all know (I hope) that there are lots of great libraries available on <a href="https://metacpan.org/">MetaCPAN</a>. What isn't sometimes quite as obvious is how to use those libraries. The documentation is usually a pretty good reference but in many cases, what you really want is a good tutorial. And they seem pretty rare on CPAN.</p>

<p>There are, however, hundreds of good tutorials out there on the web. But that doesn't really help the people looking for documentation on MetaCPAN.</p>

<p>Yesterday there was a discussion on the TPF Slack about this very problem. Olaf Alders (who leads the team behind MetaCPAN) said that he would be happy to link to quality posts about modules that are on other sites.</p>

<p>This sounded interesting to me. And I started thinking about a web app where users could submit links to tutorials. The site would then produce an API which MetaCPAN (or, indeed, anyone else) could use to add links to those sites.</p>

<p>I was thinking about a Dancer2 app. Which would require users and authentication and hosting and all the stuff that comes with a web app. But then we realised that (at least as a proof of concept) none of that was actually needed. We could do it all on GitHub.</p>

<p>So now we have <a href="https://github.com/davorg/learncpan/">LearnCPAN</a>. It's just a CSV file with three columns (distribution name, tutorial URL and tutorial title). If you want to submit a new tutorial, then you can simply create a pull request against the repo. Once your PR is merged, there's a simple GitHub Action which parses the CSV file and produces <a href="https://davorg.dev/learncpan/tutorials.json">a JSON file</a> which MetaCPAN can use to add tutorials to a distribution's page.</p>

<p>I've seeded the CSV with a couple of years of examples from the <a href="https://perladvent.org/">Perl Advent Calendar</a>. But it's ready to take your submissions now.</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_14">
            <div class="card-header">
              <h2 class="card-title"><a href="https://blog.perl-academy.de/2022-05-20-auf-dem-weg-zu-perl-536-builtin">Auf dem Weg zu Perl 5.36 - builtin</a></h2>
<a href="https://blog.perl-academy.de/" class="badge badge-primary" style="float: left">Perl-Academy.de</a>

              <p class="text-right"><small>Published
 on Friday 20 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Mit Perl 5.36 gibt es ein neues Pragma: `builtin`. Damit lassen sich neue Hilfsfunktionen in das Skript/Modul importieren. Derzeit bietet das Pragma folgende Hilfsfunktionen:       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_15">
            <div class="card-header">
              <h2 class="card-title"><a href="http://domm.plix.at/perl/2022_05_use_multiple_gmail_accounts_via_mutt_and_offlineimap.html">Use multiple gmail accounts via mutt and (offline) IMAP</a></h2>
<a href="https://domm.plix.at/perl.html" class="badge badge-primary" style="float: left">domm (Perl and other tech)</a>

              <p class="text-right"><small>Published
 on Thursday 19 May 2022 14:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>I started with a <a href="https://balloon-events.com/">new project</a> recently, which means I have to use yet another Google Workspace (i.e. gmail for businesses). While having the gmail webapp open in multiple <a href="https://support.mozilla.org/en-US/kb/containers">Firefox Multi-Account Containers</a> is an option, it's not something I like to do. And I don't really like the gmail web interface anyway. I prefer <a href="http://www.mutt.org/">mutt</a> (and use it since forever,,,). Some years ago I sort of managed to read gmail mails via <span class="caps">IMAP, </span>but couldn't get sending to work. So I decided to give this another try. And it worked!</p>

<h4>Overview</h4>

<ul>
<li>I have multiple separate gmail accounts</li>
<li>I use mutt to read and write email</li>
<li>I use <a href="http://www.offlineimap.org/">offlineimap</a> to download mails via <span class="caps">IMAP </span>onto my laptop (so I can read my mails while offline, and search through them on my disk)</li>
<li>To send mails, I drop them into an exim running on my laptop, which then sends them via the mail service I use<ul>
<li>This did not work for gmail, but I found something that works (see below)</li>
</ul></li>
</ul>

<h4>Syncing gmail via offlineimap and an "app password"</h4>

<p>This seems rather easy, but google does not really like you to use your regular password in automated tools. One solution is to use OAuth2, as described <a href="https://hobo.house/2017/07/17/using-offlineimap-with-the-gmail-imap-api/">here</a>. But this seems a bit to much hassle, so I choose the other route, i.e. setting up an "app password". An "app password" is a password that google generates for you so you can use it in various apps (of dubious security).</p>

<p>To get such an app password, you first have to secure your account with Two Factor Authentication (2FA) (if you haven't already done that):</p>

<ul>
<li>Go to https://myaccount.google.com</li>
<li>Find "2-Step Verification" under the <strong>Security</strong> headline</li>
<li>Go through the process. I use the "Google Authenticator" app on my mobile phone</li>
<li>After you've set this up, you'll find the new option "App passwords" under "Security" / "Signing into Google"</li>
<li>Select an app ("Mail") and give it a custom name (eg "offlineimap"), click on "generate" and copy the password (you'll never see it again!)</li>
</ul>

<p>Now you can add a new Account to your <code>.offlineimaprc</code>:</p>

<pre><code>[Account FOO]
localrepository = LocalFoo
remoterepository = RemoteFoo
synclabels = yes

[Repository LocalFoo]
type = Maildir
localfolders = /path/to/mails/Foo

[Repository RemoteFoo]
type = IMAP
remotehost = imap.gmail.com
# if you have a custom domain set up:
remoteuser = foo@example.com
# if you use a plain gmail account:
# remoteuser = foo@gmail.com
remotepass = your-app-password
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt</code></pre>

<p>Before you run <code>offlineimap</code> you might want to consider configuring your gmail labels (i.e. what google uses for mail folders). Google sets up a bunch of (IMO stupid) default labels. It will also duplicate mails, because all mails stay in the Inbox and will be sort-of-copied into folders (if the label matches). So go to your gmail settings (click on the gear-wheel, then "See all settings"), go to "Labels" and uncheck the "Show in <span class="caps">IMAP</span>" box on all labels (except Inbox, which you cannot uncheck anyway..). If you have set up mail filters, make sure they have the "Skip Inbox" flag set, otherwise you'll get them twice.</p>

<p>Now is also a good time to clean up your Inbox (or you'll wait a long time on the first sync..)</p>

<h4>Configuring mutt</h4>

<p>The first thing we need to do is to tell mutt about the new folder / labels / <code>mailboxes</code> (in mutt language..):</p>

<pre><code>+mailboxes =Foo/INBOX +Foo/'[Gmail].Sent Mail' +Foo/some_label</code></pre>

<p><code>Foo</code> here is the actual directory name of the maildir you specified in offlineimap: <code>localfolders = /path/to/mails/Foo</code>. You can list all the labels you enabled for <span class="caps">IMAP </span>here, and mutt will automatically jump to the mail folder if there is new mail after an offlineimap run.</p>

<p>Another thing I like to do is to set up a separate "profile" for each account, using a different color and sender for each project. For this I set up a file like this in my <code>~/.mutt/</code>:</p>

<pre><code># file: ~/.mutt/profile_foo
set from=&quot;Thomas Klausner &lt;domm@example.net&gt;&quot;
set use_from
set envelope_from
set signature=~/.foo_signature
color indicator black brightgreen</code></pre>

<p>This will make sure I use the right sender, and will also alert me as who I am currently writing by setting the indicator to a specific color.</p>

<p>But how do we enable this profile? Via a <code>folder-hook</code>:</p>

<pre><code>folder-hook =Foo &quot;source ~/.mutt/profile_foo\n&quot;</code></pre>

<p>Anytime we enter a folder under <code>Foo</code>, we source this profile. Nice!</p>

<h4>Sending mail</h4>

<p>But how can we now actually send mail using the gmail sender? Thanks to spammers, you cannot just use any sender address with any <span class="caps">SMTP </span>server anymore, they are much stricter now (and gmail even more so). So we need to send mails via gmail, using the correct set of credentials. I assume that exim has some setting to do this, but I found an easier way:</p>

<p>Mutt can send mail not only via localhost, but also directly via <span class="caps">SMTP</span>!</p>

<p>All we have to do is add something like this to our <code>~/.mutt/profile_foo</code></p>

<pre><code>set smtp_url = &quot;smtps://foo@example.com:your-app-password@smtp.gmail.com:465&quot;</code></pre>

<p>And we also need to unset <code>smtp_url</code> for the default account (which uses the local exim). So in the <code>default_profile</code> just add <code>unset smtp_url</code>. And load the default profile via another folder hook:</p>

<pre><code>folder-hook . &quot;source ~/.mutt/profile_default\n&quot;</code></pre>

<p>And that's how I prevented going crazy having to juggle multiple gmail accounts!</p>

<p>One downside of this approach is that the app passwords are now lying around on my disk, so anybody with access to my disk can read/send mails. In case I know my disk has been compromised, I could disable the app passwords in my google account settings. But a nicer approach would be to store them in some password store (I use <a href="https://github.com/gopasspw/gopass">gopass</a>) and somehow inject them after unlocking them. This will have to wait for another time...</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_16">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/victoriabispo/mojolicious-12j">Mojolicious</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by Victoria Ricarte Bispo Beserra
 on Monday 16 May 2022 22:45</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">

<p>Durante um ano e meio trabalhei com o <em>mojolicious</em> em um projeto legado dentro de uma empresa de telecomunicações. Aprendi a fazer diversas coisas com ele e hoje vim contar para vocês como ele funciona.</p>

<h2>
  
  
  O que é?
</h2>

<p>O <em>mojolicious</em> é um <em>framework</em> composto de um conjunto de componentes para desenvolvimento Web em tempo real com <em>Perl</em> usando um MVC bem estruturado. Abaixo podemos observar alguns dos seus recursos disponíveis:</p>

<ul>
<li>Implementação cliente/servidor HTTP e <em>WebSocket</em> com IPv6, TLS, SNI, IDNA, <em>proxy</em> HTTP/SOCKS5, <em>socket</em> de domínio UNIX, <em>Comet (long polling), Promises</em>/A+, <em>async/await</em>, <em>keep-alive</em>, <em>timeout</em>, suporte a compressão <em>cookie</em>, <em>multipart</em> e <em>gzip</em>.</li>
<li>Servidor da Web de E/S sem bloqueio integrado, com suporte a vários <em>loops</em> de eventos, bem como pré-bifurcação opcional, perfeito para criar serviços da <em>Web</em> altamente escaláveis.</li>
<li>Analisador JSON e HTML/XML com suporte a seletores CSS.</li>
</ul>

<h2>
  
  
  Como usar?
</h2>

<h3>
  
  
  Perlbrew
</h3>

<p>Recomendo que como primeiro passo para programar em <em>Perl</em> baixem o gerenciador de instalação <a href="https://perlbrew.pl/"><em>Perlbrew</em></a>. Ele vai te ajuda-los a ter várias versões do <em>perl</em> instaladas no seu computador e te auxiliar a administra-las de maneira bem simples.</p>

<p>Para instalar o <em>Perlbrew</em> basta executar o seguinte comando no terminal:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>curl <span class="nt">-L</span> https://install.perlbrew.pl | bash
</code></pre>

</div>



<p>Para instalar a versão estável mais recente e usá-la a partir de agora:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>perlbrew <span class="nb">install </span>perl-5.34.0
<span class="nv">$ </span>perlbrew switch perl-5.34.0
</code></pre>

</div>



<p>Para programar com a versão mais atualizada, mas apenas no terminal atual:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>perlbrew <span class="nb">install </span>perl-blead
<span class="nv">$ </span>perlbrew use perl-blead
</code></pre>

</div>



<p>Para executar <em>meuprograma.pl</em> em todas as instalações do perl, muito útil ao fazer testes:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>perlbrew <span class="nb">exec </span>perl meuprograma.pl

</code></pre>

</div>



<p>Para a folha de dicas de uso básico:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>perlbrew <span class="nt">-h</span>

</code></pre>

</div>



<p>Para mais descrições sobre comandos:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>perlbrew <span class="nb">help</span>
</code></pre>

</div>



<h3>
  
  
  Instalação
</h3>

<p>A instalação do <em>mojolicious</em> pode ser feita de maneira rápida no terminal por meio de apenas uma linha:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>curl <span class="nt">-L</span> https://cpanmin.us | perl - <span class="nt">-M</span> https://cpan.metacpan.org <span class="nt">-n</span> Mojolicious
</code></pre>

</div>



<h3>
  
  
  Hello Word!
</h3>

<p>Como prometido, abaixo mostro a vocês como é simples escrever uma aplicação Web completa com o <em>mojolicious</em> utilizando apenas as linhas a seguir:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight perl"><code><span class="c1">#!/usr/bin/env perl</span>
<span class="k">use</span> <span class="nn">Mojolicious::</span><span class="nv">Lite</span><span class="p">;</span>

<span class="nv">get</span> <span class="p">'</span><span class="s1">/</span><span class="p">'</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s">text</span> <span class="o">=&gt;</span> <span class="p">'</span><span class="s1">Hello Word!</span><span class="p">'};</span>

<span class="nv">app</span><span class="o">-&gt;</span><span class="nv">start</span><span class="p">;</span>
</code></pre>

</div>



<p>Basta salvar o arquivo com a extensão .pl e executa-lo usando <em>morbo</em> para inicia-lo com servidor web integrado.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>morbo hello.pl
Web application available at http://127.0.0.1:3000

</code></pre>

</div>





<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>curl http://127.0.0.1:3000/
Hello Word!
</code></pre>

</div>



<p>👋🏻 Então pessoal, como viram a cima usar o <em>mojolícious</em> não é tão difícil, e como disse no começo ele pode nos ajudar em diversas coisas. Nos próximos posts irei ensinar a vocês todos os principais recursos desse <em>framework</em> e as classes que o compõem. fiquem ligados para os próximos posts. Até a próxima.</p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_17">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/564.html">#564 - Issues with OOP?</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 16 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi there,</p>
<p>I am a big fan OOP and can't wait to see Modern Object in Perl, <strong>Corinna</strong>, to be part of core Perl. Last update I had was in early January by <strong>Curtis</strong>. You can checkout the <a href="https://www.nntp.perl.org/group/perl.perl5.porters/2022/01/msg262335.html">details here</a>.</p>
<p>If you are new to <strong>Corinna</strong> then I would recommend you checkout <a href="https://github.com/Ovid/Cor/wiki/Porting-from-Moose-or-Moo">this post</a> by <strong>Curtis</strong>. Those who don't know, <strong>Curtis</strong> is leading the team working on <strong>Corinna</strong>.</p>
<p>Talking about OOP, I came across another <a href="https://ovid.github.io/articles/common-problems-in-object-oriented-code.html">post</a> by none other than <strong>Curtis</strong> himself sharing the common issues with OO code. This should be taught to anyone starting OO in any language and not just Perl, in my humble opinion. Having read it few times already from start to end in one go, I keep going back to it to keep myself reminded about it all the time. You would definitely want to bookmark it for future reference.</p>
<p>Few weeks ago, I shared post <a href="https://ovid.github.io/articles/why-is-object-oriented-programming-bad.html">Why is Object-Oriented Programming Bad?</a> by Curtis. My favourite line in the post, <strong>"I think there’s a good case to be made that OOP is not nearly as useful as it’s claimed."</strong>. Mind you, this is coming from <strong>Curtis</strong>.</p>
<p>Enough of OO, lets talk about <strong>Exceptions in Perl</strong>, I would like to share the <a href="https://gist.github.com/Ovid/5205534f7dcc52e4d931aaff301b39aa">blog post</a> by <strong>Curtis</strong> (once again), where he points out the common issue in Perl. It reminded me about my recent <a href="https://github.com/manwar/perl-cool-snippets/blob/main/v534/try-catch.pl">post</a> sharing the new try/catch block in <strong>Perl v5.34</strong>.</p>
<p>Last but not the least, please find this <a href="https://gist.github.com/Ovid/0ef90f9f48f04fdad5d2ee8204fab776">gem</a> by <strong>Curtis</strong> talking about testing database operations with a fresh instance of SQLite everytime. I wonder, if this can be shared as <strong>CPAN module</strong>. Just thinking out loud, I know.</p>
<p>Enjoy the rest of the newsletter.</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_18">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/dancer2-exercise-1">Dancer2: Exercise 1 - Calculator, Counter</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Monday 16 May 2022 07:30</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>
Part of the Dancer2 video course available both to <a href="/pro">Pro</a> subscribers and attendees of the <a href="https://leanpub.com/c/dancer">Perl Dancer course</a> on Leanpub.
<p>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_19">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2022/05/15#pwc164">Happily Computing Prime Palindrome Numbers</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 15 May 2022 23:58</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from the weekly challenge problem statement and demonstrate 
the working solution.</em></p>

<h2>Part 1</h2>

<p><em>Write a script to find all prime numbers less than 1000, which are also palindromes in base 10.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
use Math::Primality qw/is_prime/;

sub palindrome_primes_under{
    my($n) = shift;
    my @palindrome_primes;
    {
        $n--;
        unshift @palindrome_primes, $n if(is_prime($n) && join("", reverse(split(//, $n))) == $n);
        redo if $n > 1;  
    }
    return @palindrome_primes;
}

MAIN:{
    print join(", ", palindrome_primes_under(1000));
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
2, 3, 5, 7, 11, 101, 131, 151, 181, 191, 313, 353, 373, 383, 727, 757, 787, 797, 919, 929
</code></pre>

<h3>Notes</h3>

<p>I have become incorrigible in my use of <code>redo</code>! The novelty just hasn't worn off I 
suppose. There is nothing really wrong with it, of course, it's just not  particularly
modern convention what with it's vaguely <code>goto</code> like behavior. Anyway, there's not a whole
lot to cover here. All the real work is done in the one line which tests both primality 
and, uh, <em>palindromedary</em>. </p>

<h2>Part 2</h2>

<p><em>Write a script to find the first 8 Happy Numbers in base 10.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;
use boolean;
use constant N => 8;

sub happy{
    my $n = shift;
    my @seen;
    my $pdi = sub{
        my $n = shift;
        my $total = 0;
        {
            $total += ($n % 10)**2;
            $n = int($n / 10);
            redo if $n > 0;
        }
        return $total;
    };
    {
        push @seen, $n;
        $n = $pdi->($n);
        redo if $n > 1 && (grep {$_ == $n} @seen) == 0; 
    }
    return boolean($n == 1);
}

MAIN:{
    my $i = 0;
    my @happy;
    {
        $i++;
        push @happy, $i if happy($i);
        redo if @happy < N;
    }
    print join(", ", @happy) . "\n";
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-2.pl
1, 7, 10, 13, 19, 23, 28, 31
</code></pre>

<h3>Notes</h3>

<p>This solution has even more <code>redo</code>, huzzah! Again, fairly straightforward bit of code 
which follows the definitions. The happiness check is done using a <em>perfect digit 
invariant</em> (PDI) function, here rendered as an anonymous inner subroutine. A good chance 
here when looking at this code to remind ourselves that <code>$n</code> inside that anonymous 
subroutine is in a different scope and does not effect the outer <code>$n</code>! </p>

<h2>References</h2>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-164/">Challenge 164</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_20">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2022/05/cccxcii-7-great-cpan-modules-released.html">(cccxcii) 7 great CPAN modules released last week</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 14 May 2022 15:13</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Updates for <i>great CPAN modules</i> released last week. A module is considered <i>great</i> if its favorites count is greater or equal than 12.<br/><br/><ol><li><a href='https://metacpan.org/release/PERLANCAR/App-lcpan-1.070' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>App::lcpan</span></b></a> - Manage your local CPAN mirror <ul>  <li>Version: <strong>1.070</strong> on 2022-05-09</li>  <li>Votes: 14</li>  <li>Previous version: 1.069 was 3 days before</li></ul></li><li><a href='https://metacpan.org/release/MIYAGAWA/Carmel-v0.1.56' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Carmel</span></b></a> - CPAN Artifact Repository Manager <ul>  <li>Version: <strong>v0.1.56</strong> on 2022-05-11</li>  <li>Votes: 23</li>  <li>Previous version: v0.1.46 was 4 days before</li></ul></li><li><a href='https://metacpan.org/release/BRTASTIC/Kelp-1.06' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Kelp</span></b></a> - A web framework light, yet rich in nutrients. <ul>  <li>Version: <strong>1.06</strong> on 2022-05-09</li>  <li>Votes: 44</li>  <li>Previous version: 1.05 was 1 year, 3 months, 19 days before</li></ul></li><li><a href='https://metacpan.org/release/OALDERS/libwww-perl-6.65' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>LWP</span></b></a> - The World-Wide Web library for Perl <ul>  <li>Version: <strong>6.65</strong> on 2022-05-09</li>  <li>Votes: 156</li>  <li>Previous version: 6.64 was 13 days before</li></ul></li><li><a href='https://metacpan.org/release/SKAJI/Minilla-v3.1.18' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Minilla</span></b></a> - CPAN module authoring tool <ul>  <li>Version: <strong>v3.1.18</strong> on 2022-05-10</li>  <li>Votes: 54</li>  <li>Previous version: v3.1.17 was 9 days before</li></ul></li><li><a href='https://metacpan.org/release/PEVANS/Object-Pad-0.65' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>Object::Pad</span></b></a> - a simple syntax for lexical field-based objects <ul>  <li>Version: <strong>0.65</strong> on 2022-05-10</li>  <li>Votes: 27</li>  <li>Previous version: 0.64 was 1 month, 8 days before</li></ul></li><li><a href='https://metacpan.org/release/KIMOTO/SPVM-0.9516' target='_blank'><b><span style='font-family: Courier New, Courier, monospace;'>SPVM</span></b></a> - SPVM Language <ul>  <li>Version: <strong>0.9516</strong> on 2022-05-11</li>  <li>Votes: 26</li>  <li>Previous version: 0.9514 was 10 days before</li></ul></li></ol>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_21">
            <div class="card-header">
              <h2 class="card-title"><a href="https://niceperl.blogspot.com/2022/05/dvi-metacpan-weekly-report-carmel.html">(dvi) metacpan weekly report - Carmel</a></h2>
<a href="https://niceperl.blogspot.com/" class="badge badge-primary" style="float: left">Niceperl</a>

              <p class="text-right"><small>Published by Unknown
 on Saturday 14 May 2022 15:09</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>This is the weekly favourites list of CPAN distributions. Votes count: 37</p><p>Week's winner: <b><a href="https://metacpan.org/module/Carmel" target="_blank">Carmel (+5)</a></b></p><p>Build date: 2022/05/14 13:08:54 GMT</p><br/><p>Clicked for <u>first time</u>:</p><ul><li><a href="https://metacpan.org/module/Devel::DTrace::Provider" target="_blank">Devel::DTrace::Provider</a> - Create DTrace providers for Perl programs.</li><li><a href="https://metacpan.org/module/Net::OpenSRS" target="_blank">Net::OpenSRS</a> - Domain registration via the Tucows OpenSRS HTTPS XML API</li><li><a href="https://metacpan.org/module/OO::DateTime" target="_blank">OO::DateTime</a> - Lightweight normalised datetime data type</li><li><a href="https://metacpan.org/module/Quantum::Superpositions::Lazy" target="_blank">Quantum::Superpositions::Lazy</a> - Weighted QM-like superpositions with lazy evaluation</li><li><a href="https://metacpan.org/module/Sys::Utmp" target="_blank">Sys::Utmp</a> - Object(ish) Interface to UTMP files.</li></ul><br/><p><u>Increasing</u> its reputation:</p><ul><li><a href="https://metacpan.org/module/App::ModuleBuildTiny" target="_blank">App::ModuleBuildTiny</a> (+1=11)</li><li><a href="https://metacpan.org/module/Carmel" target="_blank">Carmel</a> (+5=23)</li><li><a href="https://metacpan.org/module/Carton" target="_blank">Carton</a> (+2=113)</li><li><a href="https://metacpan.org/module/CPAN::Meta" target="_blank">CPAN::Meta</a> (+1=24)</li><li><a href="https://metacpan.org/module/Dancer2::Plugin::CSRF" target="_blank">Dancer2::Plugin::CSRF</a> (+1=2)</li><li><a href="https://metacpan.org/module/Dist::Zilla" target="_blank">Dist::Zilla</a> (+1=176)</li><li><a href="https://metacpan.org/module/Domain::PublicSuffix" target="_blank">Domain::PublicSuffix</a> (+1=6)</li><li><a href="https://metacpan.org/module/Feature::Compat::Try" target="_blank">Feature::Compat::Try</a> (+1=9)</li><li><a href="https://metacpan.org/module/Getopt::Long" target="_blank">Getopt::Long</a> (+2=110)</li><li><a href="https://metacpan.org/module/HTTP::CookieJar" target="_blank">HTTP::CookieJar</a> (+1=7)</li><li><a href="https://metacpan.org/module/Import::Base" target="_blank">Import::Base</a> (+1=16)</li><li><a href="https://metacpan.org/module/IO" target="_blank">IO</a> (+1=57)</li><li><a href="https://metacpan.org/module/IPTables::ChainMgr" target="_blank">IPTables::ChainMgr</a> (+1=2)</li><li><a href="https://metacpan.org/module/Keyword::Simple" target="_blank">Keyword::Simple</a> (+1=15)</li><li><a href="https://metacpan.org/module/lib::relative::to" target="_blank">lib::relative::to</a> (+1=2)</li><li><a href="https://metacpan.org/module/Moo" target="_blank">Moo</a> (+1=286)</li><li><a href="https://metacpan.org/module/Moose" target="_blank">Moose</a> (+1=320)</li><li><a href="https://metacpan.org/module/Net::DRI" target="_blank">Net::DRI</a> (+1=3)</li><li><a href="https://metacpan.org/module/Net::Whois::Parser" target="_blank">Net::Whois::Parser</a> (+1=2)</li><li><a href="https://metacpan.org/module/Net::Whois::Raw" target="_blank">Net::Whois::Raw</a> (+1=8)</li><li><a href="https://metacpan.org/module/perl" target="_blank">perl</a> (+1=392)</li><li><a href="https://metacpan.org/module/Template::Toolkit" target="_blank">Template::Toolkit</a> (+1=136)</li><li><a href="https://metacpan.org/module/Text::ANSITable" target="_blank">Text::ANSITable</a> (+1=18)</li><li><a href="https://metacpan.org/module/Time::Date" target="_blank">Time::Date</a> (+1=2)</li><li><a href="https://metacpan.org/module/Win32" target="_blank">Win32</a> (+1=11)</li><li><a href="https://metacpan.org/module/XML::XPath" target="_blank">XML::XPath</a> (+1=6)</li></ul>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_22">
            <div class="card-header">
              <h2 class="card-title"><a href="https://blog.perl-academy.de/2022-05-12-auf-dem-weg-zu-perl-536-trycatchfinally">Auf dem Weg zu Perl 5.36 - try/catch/finally</a></h2>
<a href="https://blog.perl-academy.de/" class="badge badge-primary" style="float: left">Perl-Academy.de</a>

              <p class="text-right"><small>Published
 on Thursday 12 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Es ist nicht schön, wenn man eine Anwendung hat, die vielleicht mittendrin einfach aufhört zu laufen. Vielleicht ist die Anwendung in einen Fehler gelaufen und vielleicht gibt es keine ordentliche Fehlermeldung. Woran hat es gelegen? An welcher Stelle ist der Fehler aufgetreten?       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_23">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/563.html">#563 - Shall we continue the newsletter?</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 09 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi,</p>
<p>Two weeks ago I switched the email sending from an old mailman installation on my own server to Sendgrid. I was hoping to fix the delivery issues, but that did not happen. Some subscribers who have not received the newsletter earlier started to receive it, others stopped receiving it. The big difference is that now I see a report of who has not received it. For example I see many @cpan.org addresses in the bounce list. That's just sad. I got some offers to use other services, free of charge, but frankly I am quite tired of fighting the SPAM filters.</p>
<p>In other news, we really hardly have any items to include in the newsletter. Well, except of the responsed to <a href="https://theweeklychallenge.org/">The Weekly Challenge</a>, the job posts, and the posts of Flavio Poletti.</p>
<p>These two issues together, and I really started to wonder if we should continue publishing the newsletter. What do you think?</p>
<p>Enjoy your week!</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_24">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlmaven.com/dancer2-process-get-and-post-requests">Dancer2: Process GET and POST requests</a></h2>
<a href="https://perlmaven.com/" class="badge badge-primary" style="float: left">Perl Maven</a>

              <p class="text-right"><small>Published by Gabor Szabo
 on Monday 09 May 2022 07:30</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>
Part of the Dancer2 video course available both to <a href="/pro">Pro</a> subscribers and attendees of the <a href="https://leanpub.com/c/dancer">Perl Dancer course</a> on Leanpub.
<p>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_25">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2022/05/08#pwc163">Bitwise AndSums and Skip Summations: Somewhat Complicated Uses of Map</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 08 May 2022 13:52</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from The Weekly Challenge problem statement and demonstrate the working solution.</em></p>

<h2>Part 1</h2>

<p><em>You are given a list of numbers. Write a script to calculate the sum of the bitwise & operator for all unique pairs.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings; 

sub sum_bitwise{
    my $sum = 0;
    for my $i (0 .. @_ - 2){
        my $x = $_[$i];
	map {$sum += ($x & $_)} @_[$i + 1 .. @_ - 1];
    }
    return $sum; 
}

MAIN:{
    print sum_bitwise(1, 2, 3) . "\n";  
    print sum_bitwise(2, 3, 4) . "\n";
}  
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
3
2
</code></pre>

<h3>Notes</h3>
Since most of the code for both parts of the challenge was fairly straightforward I thought it was worthwhile to concentrate on how I use map. In both cases are somewhat non-trivial.

Here map is used in lieu of a nested loop. Effectively it is equivalent but the resulting code is more compact. The for loop iterates over the array of numbers. At each iteration the current number is saved as $x. We then need to work pairwise through the rest of the array. To do this we use map over the slice of the array representing the elements after $x. Within the for loop/map $sum is continuously updated with the bitwise & results as required.   

<h2>Part 2</h2>
<p><em>Given a list of numbers @n, generate the skip summations.</em><p>
<pre><code class="perl">
use strict;
use  warnings;

sub skip_summations{
    my @lines = ([@_]);
    for my $i (1 .. @_ - 1){
        my @skip = @{$lines[$i - 1]}[1 .. @{$lines[$i - 1]} - 1];
        my $line = [map {my $j = $_; $skip[$j] + unpack("%32I*", pack("I*", @skip[0 .. $j - 1]))} 0 .. @skip - 1];
        push @lines, $line;
    }
    return @lines;
}

MAIN:{
    for my $line (skip_summations(1, 2, 3, 4, 5)){
        print join(" ", @{$line}) . "\n";
    }
    print "\n";
    for my $line (skip_summations(1, 3, 5, 7, 9)){
        print join(" ", @{$line}) . "\n";
    }
}
</code></pre>

<h3>Sample Run</h3>
<pre><code class="shell">
$ perl perl/ch-2.pl
1 2 3 4 5
2 5 9 14
5 14 28
14 42
42

1 3 5 7 9
3 8 15 24
8 23 47
23 70
70
</code></pre>

<h3>Notes</h3>
Again map is used in place of a nested loop. With the use of pack/unpack we further replace work that would take place inside yet another loop. While much more concise it is reasonable to concede a slight loss of readability, for the untrained eye anyway.

The map in the code above works over a list of numbers representing array indices of the previously computed line of summations. For each element we get the slice of the array representing the ones before it and then use pack/unpack to get the sum which is then added to the current element.

Each use of map here generates the next line and so we enclose the map in square brackets [] to place bthe results in an array reference which is the pushed onto the array of alllines to be returned.

<h2>References</h2>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-163/">Challenge 163</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_26">
            <div class="card-header">
              <h2 class="card-title"><a href="https://blog.perl-academy.de/2022-05-06-auf-dem-weg-zu-perl-536-a-anderungen-mit-use-v536">Auf dem Weg zu Perl 5.36 – Änderungen mit &quot;use v5.36&quot;</a></h2>
<a href="https://blog.perl-academy.de/" class="badge badge-primary" style="float: left">Perl-Academy.de</a>

              <p class="text-right"><small>Published
 on Friday 06 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Mittels `use v5.<version>` können Features und Standardeinstellungen für die angegebene Perl-Version geladen werden. Und es ist die minimal notwendige Perl-Version. Ein `use v5.10` verlangt, dass das Programm mindestens mit Perl 5.10 ausgeführt wird. Darüber hinaus wird zum Beispiel das Feature `say` aktiviert.       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_27">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/jonasbn/release-1914-of-perl-distribution-cryptopensslx509-296h">Release 1.9.14 of Perl distribution Crypt::OpenSSL::X509</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by jonasbn
 on Tuesday 03 May 2022 18:20</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>A new release of the Perl distribution <a href="https://metacpan.org/dist/Crypt-OpenSSL-X509">Crypt::OpenSSL::X509</a> have been uploaded to CPAN.</p>

<p>The release contains contributions from 5 separate people including myself. </p>

<ul>
<li>9 PRs merged</li>
<li>4 issues addressed</li>
</ul>

<p>The PRs had been building up for some time, so I am very happy I was able to find the time to go through them all. There are still 10 open issues and I hope they can get some attention too. </p>

<p>The biggest challenge is OpenSSL 3 support, where we are not exactly there, but I believe we are at a more stable point now, which is a good starting point for this work.</p>

<p>From the trial release was made (2022-04-26) to now, two bugs were addressed and fixed. Both where introduced with 1.9.14-TRIAL.</p>

<ul>
<li>One should have been caught by me in my review </li>
<li>Another was introduced by me in an attempt to streamline some code</li>
</ul>

<p>So in retrospect, just like with the improvements to the CI work and use of the trial release process, I will work to improve in this area - I am thankful for the PRs, which corrected my errors, but the issues where... obvious and should never have been there.</p>

<p>Luckily the contributors, were quick in addressing these and PRs where received an processed, making it into the final release.</p>

<p>Thanks to all who contributed:</p>

<ul>
<li><a href="https://github.com/ikedas">@ikedas</a></li>
<li>
<a class="mentioned-user" href="https://dev.to/timlegge">@timlegge</a> </li>
<li><a href="https://github.com/michal-josef-spacek">@michal-josef-spacek</a></li>
<li><a href="https://github.com/skaji">@skaji</a></li>
</ul>

<h2>
  
  
  Change log
</h2>

<h3>
  
  
  1.9.14 2022-05-03
</h3>

<ul>
<li><p>Applied PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/108">#109</a> from @ikedas fixing a bug found in 1.9.14-TRIAL, where the wrong API was called, propably due to a typo in the name</p></li>
<li><p>Applied PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/108">#108</a> from @skaji a bug found in 1.9.14-TRIAL, where a possible interpolatation was probibited due to quoting</p></li>
<li><p>Applied patch from @ikedas PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/105">#105</a> make the pattern match for LLVM version number in the 12 series a bit more liberal. This was followed up by PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/107">#107</a> by <a class="mentioned-user" href="https://dev.to/jonasbn">@jonasbn</a></p></li>
<li><p>Applied patch from <a class="mentioned-user" href="https://dev.to/timlegge">@timlegge</a> PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/102">#102</a> adressing issues: <a href="https://github.com/dsully/perl-crypt-openssl-x509/issues/45">#45</a> and <a href="https://github.com/dsully/perl-crypt-openssl-x509/issues/95">#95</a> with only a more strict use of compiler flags if environment variable <code>AUTHOR_TESTING</code> is set to true</p></li>
<li><p>Added enhancement from @michal-josef-spacek introducing use of <a href="https://metacpan.org/pod/Crypt::OpenSSL::Guess">Crypt::OpenSSL::Guess</a>, which can be used to determine placement of OpenSSL libraries via PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/104">#104</a>. The idea originates from issue <a href="https://github.com/dsully/perl-crypt-openssl-x509/issues/97">#97</a> raised by @ikedas and addresses: <a href="https://github.com/dsully/perl-crypt-openssl-x509/issues/94">#94</a> also from @ikedas</p></li>
<li><p>The above was followed up by a PR from <a class="mentioned-user" href="https://dev.to/jonasbn">@jonasbn</a> <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/106">#106</a> enabling installation of <code>configure</code> section for CI jobs for both <code>cpanm</code> and <code>cpm</code></p></li>
<li><p>Metadata on bug tracker was updated with release 1.9.13, documentation updated with this release. Addressing issue <a href="https://github.com/dsully/perl-crypt-openssl-x509/issues/80">#80</a> raised by @skaji, update by <a class="mentioned-user" href="https://dev.to/jonasbn">@jonasbn</a></p></li>
<li><p>Patch from <a class="mentioned-user" href="https://dev.to/timlegge">@timlegge</a> via PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/103">#103</a> improving handling of OpenSSL API versions</p></li>
<li><p>Patch from @skaji via PR <a href="https://github.com/dsully/perl-crypt-openssl-x509/pull/100">#100</a> making use of constants in XS code</p></li>
</ul>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_28">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlweekly.com/archive/562.html">#562 - Perl Conference</a></h2>
<a href="https://perlweekly.com/" class="badge badge-primary" style="float: left">Perl Weekly</a>

              <p class="text-right"><small>Published
 on Monday 02 May 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>Hi there,</p>
<p>I wish all the readers of the weekly newsletter, a very <strong>Happy Idd</strong>. We are celebrating Idd today in England and luckily it is a <strong>Bank Holiday</strong> as well.</p>
<p>I have seen Facebook post about the upcoming <a href="https://perlconference.us/tprc-2022-hou">The Perl and Raku Conference 2022, Houston, TX</a>. With this, I kept wondering why not have <strong>London Perl Workshop 2022</strong> too? Being member of the LPW organizing team, I discussed it with fellow member, <strong>Julien</strong>. Good news is he seems positive about it as well. I don't know whether we have enough time to kickstart the process. Just hoping we get the opportunity to organize the conference. It has been a long time since we last had the gatherings in London. We had German Perl Workshop organized successfully only recently. Although I didn't see a single event report published by attending members unfortunately. I remember last time when I attended the <strong>German Perl Workshop</strong>, there were plenty of post event reports published as per the tradition.</p>
<p>Enjoy rest of the newsletter.</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_29">
            <div class="card-header">
              <h2 class="card-title"><a href="http://www.rabbitfarm.com/cgi-bin/blosxom/2022/05/01#pwc162">The Weekly Challenge 162</a></h2>
<a href="http://www.rabbitfarm.com/cgi-bin/blosxom/perl" class="badge badge-primary" style="float: left">RabbitFarm Perl</a>

              <p class="text-right"><small>Published
 on Sunday 01 May 2022 14:34</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">
<p><em>The examples used here are from The Weekly Challenge problem statement and demonstrate 
the working solution.</em></p>

<h2>Part 1</h2>

<p><em>Write a script to generate the check digit of a given ISBN-13 code.</em></p>

<h3>Solution</h3>

<pre><code class="perl">
use strict;
use warnings;

sub isbn_check_digit{
    my($isbn) = @_;
    my $i = 0;
    my @weights = (1, 3);
    my $check_sum = 0;
    my $check_digit;
    map {$check_sum += $_ * $weights[$i]; $i = $i == 0 ? 1 : 0} split(//, $isbn);
    $check_digit = $check_sum % 10;
    return 10 - $check_digit;
}

MAIN:{
    print isbn_check_digit(978030640615) . "\n";
}
</code></pre>

<h3>Sample Run</h3>

<pre><code class="shell">
$ perl perl/ch-1.pl
7   
</code></pre>

<h2>References</h2>

<p><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-162/">Challenge 162</a></p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_30">
            <div class="card-header">
              <h2 class="card-title"><a href="https://perlancar.wordpress.com/2022/05/01/list-of-new-cpan-distributions-apr-2022/">List of new CPAN distributions – Apr 2022</a></h2>
<a href="https://perlancar.wordpress.com/" class="badge badge-primary" style="float: left">Perlancar</a>

              <p class="text-right"><small>Published by perlancar
 on Sunday 01 May 2022 09:06</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><table>
<tr>
<th>dist</th>
<th>author</th>
<th>first_version</th>
<th>latest_version</th>
<th>abstract</th>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Acme-CPANModules-Set">Acme-CPANModules-Set</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>List of modules that deal with sets</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Acme-CPANModules-Symlink">Acme-CPANModules-Symlink</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>List of modules that deal with symbolic links (symlinks)</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Acme-Inabajun-Utils">Acme-Inabajun-Utils</a></td>
<td><a href="https://metacpan.org/author/INABAJUN">INABAJUN</a></td>
<td>0</td>
<td>0.01</td>
<td>The great new Acme::Inabajun::Utils!</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-FizzBuzz">App-FizzBuzz</a></td>
<td><a href="https://metacpan.org/author/TTKCIAR">TTKCIAR</a></td>
<td>1.00</td>
<td>1.00</td>
<td>Maximally codegolfed FizzBuzz</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-Greple-git">App-Greple-git</a></td>
<td><a href="https://metacpan.org/author/UTASHIRO">UTASHIRO</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Greple git module</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-Greple-subst-desumasu">App-Greple-subst-desumasu</a></td>
<td><a href="https://metacpan.org/author/UTASHIRO">UTASHIRO</a></td>
<td>0.01</td>
<td>0.02</td>
<td>Japanese DESU/MASU dictionary for App::Greple::subst</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-PDF-Overlay">App-PDF-Overlay</a></td>
<td><a href="https://metacpan.org/author/JV">JV</a></td>
<td>0.001</td>
<td>0.002</td>
<td>pdfolay &#8211; insert a PDF document over/under another document</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-RunStopRun">App-RunStopRun</a></td>
<td><a href="https://metacpan.org/author/GRAY">GRAY</a></td>
<td>0.01</td>
<td>0.03</td>
<td>limit CPU usage of processes</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-Timer">App-Timer</a></td>
<td><a href="https://metacpan.org/author/MANWAR">MANWAR</a></td>
<td>0.01</td>
<td>0.02</td>
<td>Timer for your application.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-dirdim">App-dirdim</a></td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>0.031</td>
<td>0.031</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-dufolder">App-dufolder</a></td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>0.030</td>
<td>0.031</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-filedays">App-filedays</a></td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>0.203</td>
<td>0.203</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-pltest">App-pltest</a></td>
<td><a href="https://metacpan.org/author/PFEIFFER">PFEIFFER</a></td>
<td>v0.63.1</td>
<td>v0.63.1</td>
<td>Swiss Army Knife of Perl One-Liners</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-pq">App-pq</a></td>
<td><a href="https://metacpan.org/author/SYMKAT">SYMKAT</a></td>
<td>1</td>
<td>1</td>
<td>pq is like jq and gq, but with Perl</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/App-zipdetails">App-zipdetails</a></td>
<td><a href="https://metacpan.org/author/PMQS">PMQS</a></td>
<td>2.101</td>
<td>2.107</td>
<td>display the internal structure of zip files</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenario-Data-Cmp">Bencher-Scenario-Data-Cmp</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.002</td>
<td>0.002</td>
<td>Benchmark Data::Cmp against similar solutions</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenario-Data-Undump">Bencher-Scenario-Data-Undump</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.003</td>
<td>0.003</td>
<td>Benchmark Data::Undump against eval() for loading a Data::Dumper output</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Bencher-Scenarios-Games-Wordlist">Bencher-Scenarios-Games-Wordlist</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.050</td>
<td>0.050</td>
<td>Benchmark startup overhead of Games::Word::Wordlist::* modules</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Browser-Find-Windows">Browser-Find-Windows</a></td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>0.001</td>
<td>0.001</td>
<td>Find available browser on Windows</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/CXC-Exporter-Util">CXC-Exporter-Util</a></td>
<td><a href="https://metacpan.org/author/DJERIUS">DJERIUS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Tagged Based Exporting</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Crypt-OPAQUE">Crypt-OPAQUE</a></td>
<td><a href="https://metacpan.org/author/ABBYPAN">ABBYPAN</a></td>
<td>0.01</td>
<td>0.011</td>
<td>OPAQUE protocol</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Crypt-OPRF">Crypt-OPRF</a></td>
<td><a href="https://metacpan.org/author/ABBYPAN">ABBYPAN</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Oblivious Pseudorandom Functions (OPRFs) using Prime-Order Groups</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Crypt-SIGMA">Crypt-SIGMA</a></td>
<td><a href="https://metacpan.org/author/ABBYPAN">ABBYPAN</a></td>
<td>0.01</td>
<td>0.011</td>
<td>SIGMA protocol</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Dancer2-Plugin-FormValidator-Extension-DBIC">Dancer2-Plugin-FormValidator-Extension-DBIC</a></td>
<td><a href="https://metacpan.org/author/ALEXPAN">ALEXPAN</a></td>
<td>0.80</td>
<td>0.82</td>
<td>Dancer2 FormValidator extension for checking field present in table row using DBIC.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Dancer2-Plugin-FormValidator-Extension-Password">Dancer2-Plugin-FormValidator-Extension-Password</a></td>
<td><a href="https://metacpan.org/author/ALEXPAN">ALEXPAN</a></td>
<td>0.80</td>
<td>0.82</td>
<td>Dancer2 FormValidator extension for validating passwords.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Devel-MAT-Tool-Object-Pad">Devel-MAT-Tool-Object-Pad</a></td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>extend Devel::MAT to analyse Object::Pad-based programs</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Device-Chip-Si5351">Device-Chip-Si5351</a></td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>0.01</td>
<td>0.01</td>
<td>chip driver for Si5351</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Electronics-PSU-DPSxxxx">Electronics-PSU-DPSxxxx</a></td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>0.01</td>
<td>0.02</td>
<td>control a DPS power supply</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Game-CharacterSheetGenerator">Game-CharacterSheetGenerator</a></td>
<td><a href="https://metacpan.org/author/SCHROEDER">SCHROEDER</a></td>
<td>1</td>
<td>1</td>
<td>a web app to generate character sheets</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Getopt-App">Getopt-App</a></td>
<td><a href="https://metacpan.org/author/JHTHORSEN">JHTHORSEN</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Write and test your script with ease</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Getopt-optparse">Getopt-optparse</a></td>
<td><a href="https://metacpan.org/author/MHEARSE">MHEARSE</a></td>
<td>v0.0.2</td>
<td>v1.6.0</td>
<td>optparse style processing of command line options</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/HTTP-CSPHeader">HTTP-CSPHeader</a></td>
<td><a href="https://metacpan.org/author/RRWO">RRWO</a></td>
<td>v0.1.0</td>
<td>v0.1.2</td>
<td>manage dynamic content security policy headers</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Imager-File-QOI">Imager-File-QOI</a></td>
<td><a href="https://metacpan.org/author/TONYC">TONYC</a></td>
<td>0.010</td>
<td>0.010</td>
<td>QOI image file support for Imager</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/LWP-Authen-OAuth2-ServiceProvider-MediaWiki">LWP-Authen-OAuth2-ServiceProvider-MediaWiki</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>MediaWiki OAuth2 provider for LWP::Authen::OAuth2.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/LWP-Authen-OAuth2-ServiceProvider-Wikimedia">LWP-Authen-OAuth2-ServiceProvider-Wikimedia</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Wikimedia OAuth2 provider for LWP::Authen::OAuth2.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Log-OK">Log-OK</a></td>
<td><a href="https://metacpan.org/author/DRCLAW">DRCLAW</a></td>
<td>v0.1.0</td>
<td>v0.1.1</td>
<td>Disable inactive logging statements from the command line</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Monitoring-Sneck">Monitoring-Sneck</a></td>
<td><a href="https://metacpan.org/author/VVELOX">VVELOX</a></td>
<td>v0.0.1</td>
<td>v0.0.1</td>
<td>a boopable LibreNMS JSON style SNMP extend for remotely running nagios style checks</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/OPM-Installer">OPM-Installer</a></td>
<td><a href="https://metacpan.org/author/PERLSRVDE">PERLSRVDE</a></td>
<td>1.0.0</td>
<td>1.0.1</td>
<td>Install ticketsystem (Znuny/OTOBO) add ons</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/OPM-Parser">OPM-Parser</a></td>
<td><a href="https://metacpan.org/author/PERLSRVDE">PERLSRVDE</a></td>
<td>1.06</td>
<td>1.06</td>
<td>Parser for the .opm file</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/OPM-Repository">OPM-Repository</a></td>
<td><a href="https://metacpan.org/author/PERLSRVDE">PERLSRVDE</a></td>
<td>1.0.0</td>
<td>1.0.0</td>
<td>parse OPM repositories&#039; framework.xml files to search for add ons</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Option-Option">Option-Option</a></td>
<td><a href="https://metacpan.org/author/LSKATZ">LSKATZ</a></td>
<td>v0.1</td>
<td>v0.1</td>
<td></td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Plack-App-Data-Printer">Plack-App-Data-Printer</a></td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>0.01</td>
<td>0.03</td>
<td>Plack Data::Printer application.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/RPC-Switch-Client-Tiny">RPC-Switch-Client-Tiny</a></td>
<td><a href="https://metacpan.org/author/BDZ">BDZ</a></td>
<td>1.52_01</td>
<td>1.55</td>
<td>Lightweight client for the RPC-Switch.</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/SPVM-Math-Complex">SPVM-Math-Complex</a></td>
<td><a href="https://metacpan.org/author/KIMOTO">KIMOTO</a></td>
<td>0.01</td>
<td>0.01</td>
<td>Math Functions</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Suricata-Monitoring">Suricata-Monitoring</a></td>
<td><a href="https://metacpan.org/author/VVELOX">VVELOX</a></td>
<td>v0.0.1</td>
<td>v0.1.3</td>
<td>LibreNMS JSON SNMP extend and Nagios style check for Suricata stats</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Sys-OsRelease">Sys-OsRelease</a></td>
<td><a href="https://metacpan.org/author/IKLUFT">IKLUFT</a></td>
<td>0.0.1</td>
<td>0.2.0</td>
<td>read operating system details from FreeDesktop.Org standard /etc/os-release file</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Telegram-JsonAPI">Telegram-JsonAPI</a></td>
<td><a href="https://metacpan.org/author/CINDY">CINDY</a></td>
<td>1.00</td>
<td>1.02</td>
<td>Telegram TDLib&#039;s JSON API</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Template-Plugin-CGI">Template-Plugin-CGI</a></td>
<td><a href="https://metacpan.org/author/TODDR">TODDR</a></td>
<td>3.100</td>
<td>3.101</td>
<td>Simple Template Toolkit plugin interfacing to the CGI.pm module</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Types-Self">Types-Self</a></td>
<td><a href="https://metacpan.org/author/TOBYINK">TOBYINK</a></td>
<td>0.001</td>
<td>0.001</td>
<td>provides a &quot;Self&quot; type constraint, referring to the caller class or role</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/UK-Vehicle">UK-Vehicle</a></td>
<td><a href="https://metacpan.org/author/IGIBBS">IGIBBS</a></td>
<td>0.1</td>
<td>0.4</td>
<td>Perl module to query the UK&#039;s Vehicle Enquiry Service API</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/Wasm-Wasm3">Wasm-Wasm3</a></td>
<td><a href="https://metacpan.org/author/FELIPE">FELIPE</a></td>
<td>0.01_01</td>
<td>0.02</td>
<td>Self-contained WebAssembly via wasm3</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/constant-more">constant-more</a></td>
<td><a href="https://metacpan.org/author/DRCLAW">DRCLAW</a></td>
<td>v0.1.0</td>
<td>v0.1.1</td>
<td>Assign values to constants from the command arguments</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/module">module</a></td>
<td><a href="https://metacpan.org/author/INABAJUN">INABAJUN</a></td>
<td>0</td>
<td>0</td>
<td>The great new Acme::Inabajun::Utils!</td>
</tr>
<tr>
<td><a href="https://metacpan.org/release/zipdetails">zipdetails</a></td>
<td><a href="https://metacpan.org/author/PMQS">PMQS</a></td>
<td>2.100</td>
<td>2.100</td>
<td>display the internal structure of zip files</td>
</tr>
</table>
<h3>Stats</h3>
<p>Number of new CPAN distributions this period: <b>54</b></p>
<p>Number of authors releasing new CPAN distributions this period: <b>33</b></p>
<p>Authors by number of new CPAN distributions this period: </p>
<table>
<tr>
<th>No</th>
<th>Author</th>
<th>Distributions</th>
</tr>
<tr>
<td>1</td>
<td><a href="https://metacpan.org/author/PERLANCAR">PERLANCAR</a></td>
<td>6</td>
</tr>
<tr>
<td>2</td>
<td><a href="https://metacpan.org/author/PERLSRVDE">PERLSRVDE</a></td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td><a href="https://metacpan.org/author/TULAMILI">TULAMILI</a></td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td><a href="https://metacpan.org/author/SKIM">SKIM</a></td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td><a href="https://metacpan.org/author/PEVANS">PEVANS</a></td>
<td>3</td>
</tr>
<tr>
<td>6</td>
<td><a href="https://metacpan.org/author/ABBYPAN">ABBYPAN</a></td>
<td>3</td>
</tr>
<tr>
<td>7</td>
<td><a href="https://metacpan.org/author/UTASHIRO">UTASHIRO</a></td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td><a href="https://metacpan.org/author/PMQS">PMQS</a></td>
<td>2</td>
</tr>
<tr>
<td>9</td>
<td><a href="https://metacpan.org/author/ALEXPAN">ALEXPAN</a></td>
<td>2</td>
</tr>
<tr>
<td>10</td>
<td><a href="https://metacpan.org/author/INABAJUN">INABAJUN</a></td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td><a href="https://metacpan.org/author/DRCLAW">DRCLAW</a></td>
<td>2</td>
</tr>
<tr>
<td>12</td>
<td><a href="https://metacpan.org/author/VVELOX">VVELOX</a></td>
<td>2</td>
</tr>
<tr>
<td>13</td>
<td><a href="https://metacpan.org/author/BDZ">BDZ</a></td>
<td>1</td>
</tr>
<tr>
<td>14</td>
<td><a href="https://metacpan.org/author/SCHROEDER">SCHROEDER</a></td>
<td>1</td>
</tr>
<tr>
<td>15</td>
<td><a href="https://metacpan.org/author/PFEIFFER">PFEIFFER</a></td>
<td>1</td>
</tr>
<tr>
<td>16</td>
<td><a href="https://metacpan.org/author/JV">JV</a></td>
<td>1</td>
</tr>
<tr>
<td>17</td>
<td><a href="https://metacpan.org/author/IKLUFT">IKLUFT</a></td>
<td>1</td>
</tr>
<tr>
<td>18</td>
<td><a href="https://metacpan.org/author/TODDR">TODDR</a></td>
<td>1</td>
</tr>
<tr>
<td>19</td>
<td><a href="https://metacpan.org/author/MANWAR">MANWAR</a></td>
<td>1</td>
</tr>
<tr>
<td>20</td>
<td><a href="https://metacpan.org/author/MHEARSE">MHEARSE</a></td>
<td>1</td>
</tr>
<tr>
<td>21</td>
<td><a href="https://metacpan.org/author/IGIBBS">IGIBBS</a></td>
<td>1</td>
</tr>
<tr>
<td>22</td>
<td><a href="https://metacpan.org/author/FELIPE">FELIPE</a></td>
<td>1</td>
</tr>
<tr>
<td>23</td>
<td><a href="https://metacpan.org/author/TOBYINK">TOBYINK</a></td>
<td>1</td>
</tr>
<tr>
<td>24</td>
<td><a href="https://metacpan.org/author/RRWO">RRWO</a></td>
<td>1</td>
</tr>
<tr>
<td>25</td>
<td><a href="https://metacpan.org/author/KIMOTO">KIMOTO</a></td>
<td>1</td>
</tr>
<tr>
<td>26</td>
<td><a href="https://metacpan.org/author/JHTHORSEN">JHTHORSEN</a></td>
<td>1</td>
</tr>
<tr>
<td>27</td>
<td><a href="https://metacpan.org/author/TTKCIAR">TTKCIAR</a></td>
<td>1</td>
</tr>
<tr>
<td>28</td>
<td><a href="https://metacpan.org/author/DJERIUS">DJERIUS</a></td>
<td>1</td>
</tr>
<tr>
<td>29</td>
<td><a href="https://metacpan.org/author/SYMKAT">SYMKAT</a></td>
<td>1</td>
</tr>
<tr>
<td>30</td>
<td><a href="https://metacpan.org/author/TONYC">TONYC</a></td>
<td>1</td>
</tr>
<tr>
<td>31</td>
<td><a href="https://metacpan.org/author/CINDY">CINDY</a></td>
<td>1</td>
</tr>
<tr>
<td>32</td>
<td><a href="https://metacpan.org/author/GRAY">GRAY</a></td>
<td>1</td>
</tr>
<tr>
<td>33</td>
<td><a href="https://metacpan.org/author/LSKATZ">LSKATZ</a></td>
<td>1</td>
</tr>
</table>
       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_31">
            <div class="card-header">
              <h2 class="card-title"><a href="http://domm.plix.at/perl/2022_04_more_mastodon_less_twitter.html">More Mastodon, less Twitter</a></h2>
<a href="https://domm.plix.at/perl.html" class="badge badge-primary" style="float: left">domm (Perl and other tech)</a>

              <p class="text-right"><small>Published
 on Friday 29 April 2022 16:05</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>I was getting more and more annoyed with twitter in the last few months (mostly because I had to click "See [some annoying feature] less often" several times a day) and the whole Musk-takeover finally pushed me over the edge. I've set up an account on <a href="https://mastodon.technology/@domm">Mastodon Technology</a> and plan to use this nice, open source, federated tool more and more, and leave twitter behind.</p>

<p>I never really used twitter as a primary platform, but used it to automatically "promote" some of the stuff that's happening on this website. So now I have to port this tools to use Mastodon. Which turned out to be quite easy:</p>

<h4>Mastodon <span class="caps">API</span></h4>

<p>Mastodon obviously has an <a href="https://docs.joinmastodon.org/client/intro/"><span class="caps">API</span></a> and a nice Perl client, <a href="https://metacpan.org/dist/Mastodon-Client">Mastodon::Client</a>. To access the <span class="caps">API</span> I had to set up an "app" and get an access token. Easy.</p>

<h4>Blio Integration</h4>

<p>This static website is generated using my static site generator, <a href="https://github.com/domm/Blio">Blio</a>. I run Blio via a <code>build.pl</code> script, that does various things besides just building the <span class="caps">HTML.</span> Among those things is auto-posting new posts to Twitter:</p>

<pre><code>sub tweet_new_post {
    my $node = shift;

    my $status = $node-&gt;stash-&gt;{tweet};
    if (!$status &amp;&amp; $node-&gt;stash-&gt;{autotweet}) {
        $status = &quot;New blog post: &quot;.$node-&gt;title;
    }
    return unless $status;
    return if $tweeted{$node-&gt;url};

    my $link = ' '.$blio-&gt;site_url.'/'.$node-&gt;url;

    my $tweet = length($status) &gt; 250  ? substr($status,0,145) : $status;
    $tweet.=$link;
    _tweet($tweet);

    my $fh = $index_file-&gt;opena;
    say $fh $node-&gt;url;
    close $fh;
}</code></pre>

<p>This checks if a node either contains an explicit <code>tweet</code> or has the <code>autotweet</code> flag set (in which case the status is generated from the node title). It checks in a very simple file-based database if this node (<code>$node-&gt;url</code>) has already been posted and aborts if it has (so I don't end up tweeting the same post multiple times).</p>

<p>Then I append the link to the new post to the tweet, after maybe shortening the status if it is too long. Now I call <code>_tweet($tweet)</code>, which uses <a href="https://metacpan.org/pod/Net::Twitter::Lite::WithAPIv1_1">Net::Twitter::Lite::WithAPIv1_1</a> to post the message. Finally I add the current node url to the file <span class="caps">DB.</span></p>

<h4>toot!</h4>

<p>Posting to Mastodon is called <code>tooting</code>, so let's do that:</p>

<pre><code>   my $toot = length($status) &gt; 450  ? substr($status,0,450) : $status;
   $toot.=$link;
   _toot($toot);</code></pre>

<p>Toots can be longer than tweets, so I've adapted the truncation a bit.</p>

<pre><code>sub _toot {
    my ( $status ) = @_;

    eval {
        my $conf = do $blio-&gt;output_dir-&gt;parent-&gt;file('mastodon.conf')-&gt;stringify;
        my $client = Mastodon::Client-&gt;new({
            %$conf,
            coerce_entities =&gt; 1,
        });

        my $post = $client-&gt;post_status( $status );
        return $post;
    };
    if (!$post || $@) {
        say &quot;error while tooting: &quot;.$@;
        return;
    }
    else {
        say &quot;successfully tooted: &quot;.$post-&gt;content;
        return 1;
    }
}</code></pre>

<p>The file <code>mastodon.conf</code> contains the instance <span class="caps">URL, </span>access token etc and is in fact a small Perl snippet which I just load using <code>do</code>. Using this config, I initiate a new <code>Mastodon::Client</code>, and call <code>post_status</code>. Very easy!</p>

<p>Now I'm very curious if it will work when I publish this post...</p>       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_32">
            <div class="card-header">
              <h2 class="card-title"><a href="https://dev.to/arslonga/likedislike-system-with-mojolicious-42ph">Like/Dislike system with Mojolicious</a></h2>
<a href="https://dev.to/t/perl" class="badge badge-primary" style="float: left">dev.to #perl</a>

              <p class="text-right"><small>Published by arslonga
 on Friday 29 April 2022 07:38</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text"><p>This post describes the actual Like/Dislike mechanism in the program based on Mojolicious. Web pages style is created using the Bootstrap framework. The full version of the Mojolicious <code>like-dislike</code> demo can be downloaded at: <a href="https://github.com/arslonga/like-dislike">https://github.com/arslonga/like-dislike</a></p>

<p>So, in the start package <strong>Vote.pm</strong> we create routers for the post with a certain ID in the section named <code>'first-section'</code> (for example), and also for <code>like</code> and <code>dislike</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>sub startup {
my $self = shift;

my $r = $self-&gt;routes;
...
$r-&gt;any('/first-section/:id' =&gt; [ id =&gt; qr/[0-9]+/ ] )-&gt;to('post#article');
...
$r-&gt;any('/likeartcl')-&gt;to('voting#like');
$r-&gt;any('/dislikeartcl')-&gt;to('voting#dislike');
...
}
</code></pre>

</div>



<p>A snippet of code in the <strong>Post.pm</strong> package that describes the <code>'article'</code> method:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package Vote::Controller::Post;
use Mojo::Base 'Mojolicious::Controller';
use Session;
use SessCheck;
...
#---------------------------------
sub article {
#---------------------------------
my $self = shift;
my $id = $self-&gt;stash('id');
my($nickname, $status, $client_check, $user_id, $title_alias);


eval{
$nickname = $self-&gt;session('client')-&gt;[0];
$user_id = $self-&gt;session('client')-&gt;[2]; 
};
$client_check = SessCheck-&gt;client( $self, $nickname );
if( !$client_check ){
    $status = ' disabled';
}
$title_alias = (split(/\//, $self-&gt;req-&gt;url))[1];
my $data = $self-&gt;db-&gt;select( 'posts', ['*'], {id =&gt; $id} )-&gt;hash;

$self-&gt;render( 
dat             =&gt; $data,
section_ident   =&gt; $title_alias,
id              =&gt; $id,
like_id         =&gt; 'like_'.$title_alias.'_'.$id,
unlike_id       =&gt; 'unlike_'.$title_alias.'_'.$id,
client_id       =&gt; $user_id,
unlike_btn_name =&gt; 'unlike'.$title_alias.'_'.$id,
like_btn_name   =&gt; 'like'.$title_alias.'_'.$id,
status          =&gt; $status,
liked_cnt       =&gt; $data-&gt;{liked} || 0,
unliked_cnt     =&gt; $data-&gt;{unliked} || 0
);
}#---------------
...
1;
</code></pre>

</div>



<p>Template <strong>article.html.ep</strong> in <strong>/templates/post</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>% layout 'vote';

&lt;hr&gt;
&lt;a class="btn btn-info" href="/first-section" role="button"&gt;
&lt;span class="glyphicon glyphicon-arrow-left"&gt;&lt;/span&gt;
&lt;/a&gt;
&lt;hr&gt;
&lt;div&gt;
    &lt;h2&gt;&lt;%= $dat-&gt;{title} %&gt;&lt;/h2&gt;
    &lt;%= $dat-&gt;{body} %&gt;
&lt;/div&gt;
&lt;hr&gt;
&lt;div class="ld-box text-right"&gt;

%# Rendering a template that describes a block of code
%# that contains two buttons:
%# 'like' and 'dislike'

&lt;%= include 'voting/vote' %&gt;
&lt;/div&gt;

&lt;script&gt;
//---------- Like/Dislike block ---
async function LikeArtcl(titleAlias, articleId, vote_span, user_id) {
let likedislikeBox = document.querySelector('.ld-box');

  let response = await fetch("/likeartcl?title_alias=" + 
  titleAlias + 
  '&amp;article_id=' + 
  articleId + 
  '&amp;vote_span=' + 
  vote_span + 
  '&amp;user_id=' + 
  user_id);

  if (response.ok) {
    let respRendr = await response.text(); 
    likedislikeBox.innerHTML = respRendr;
  }else {
    alert("Error HTTP: " + response.status);
  }
}

async function UnlikeArtcl(titleAlias, articleId, vote_span, user_id) {
let likedislikeBox = document.querySelector('.ld-box');

  let response = await fetch("/dislikeartcl?title_alias=" + 
  titleAlias + 
  '&amp;article_id=' + 
  articleId + 
  '&amp;vote_span=' + 
  vote_span + 
  '&amp;user_id=' + 
  user_id);

  if (response.ok) {
    let respRendr = await response.text(); 
    likedislikeBox.innerHTML = respRendr;
  }else {
    alert("Error HTTP: " + response.status);
  }
}
//---------- Like/Dislike block END ---
&lt;/script&gt;
</code></pre>

</div>



<p>Package <strong>Session.pm</strong>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package Session;
use Mojo::Base -base;

#---------------------------------
sub user {
#---------------------------------
my($self, $c, $login, $password, $id) = @_;

$c-&gt;session( client =&gt; [$login, $password, $id], expiration =&gt; 120);
return 1;
}#---------------

# 'voting' method of Session called in 'Voting.pm' package (see code fragment below)
#---------------------------------
sub voting {
#---------------------------------
my($self, $c, $user_vote_id, $title_alias_and_id) = @_;
$c-&gt;signed_cookie( $user_vote_id =&gt; $title_alias_and_id, {expires =&gt; time + 120});
return 1;
}#---------------

#---------------------------------
sub client_expire {
#---------------------------------
my($self, $c) = @_;
delete $c-&gt;session-&gt;{'client'};
return 1;
}#---------------
1;
</code></pre>

</div>



<p>Package <strong>Vote/Voting.pm</strong><br>
Here we render template <code>'voting/vote.html.ep'</code> that describes code block with <code>'like'</code> and <code>'dislike'</code> buttons and <code>'like'</code> and <code>'dislike'</code> counts<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package Vote::Voting;
use Mojo::Base 'Mojolicious::Controller';
use Mojo::Util qw(trim encode decode);
use Mojo::Cookie;
use Session;

#---------------------------------
sub like {
#---------------------------------
my $self = shift;
my($nickname, $status);
eval{
$nickname = $self-&gt;session('client')-&gt;[0];  
};
my $client_check = SessCheck-&gt;client( $self, $nickname );

my $title_alias = $self-&gt;param('title_alias');
my $article_id  = $self-&gt;param('article_id');
my $user_id     = $self-&gt;param('user_id');

$status = !$client_check ? ' disabled' : '';

my $like_count = $self-&gt;db-&gt;select( 'posts', 
                                  ['liked'], 
                                  {id =&gt; $article_id} )
                                  -&gt;hash-&gt;{liked};
my $unlike_count = $self-&gt;db-&gt;select( 'posts', 
                                    ['unliked'], 
                                    {id =&gt; $article_id} )
                                    -&gt;hash-&gt;{unliked};
my $like_cookie_name = 'like_user'.$user_id.'_'.$title_alias.'_'.$article_id;
my $unlike_cookie_name = 'unlike_user'.$user_id.'_'.$title_alias.'_'.$article_id;

if( !$self-&gt;signed_cookie( $like_cookie_name ) &amp;&amp; $client_check ){
    ++$like_count;
    $self-&gt;db-&gt;update( 'posts', 
                     {'liked' =&gt; $like_count}, 
                     {'id' =&gt; $article_id} );
}

if( $self-&gt;signed_cookie( $unlike_cookie_name ) ){
    --$unlike_count;
    $self-&gt;db-&gt;update( 'posts', 
                     {'unliked' =&gt; $unlike_count}, 
                     {'id' =&gt; $article_id} );
    $self-&gt;signed_cookie( $unlike_cookie_name =&gt; '', {expires =&gt; 1});
}

# Store session for 'like' action where key is 
#'like_user'.$user_id.'_'.$title_alias.'_'.$article_id
# and value is $title_alias.'_'.$article_id
Session-&gt;voting( $self, 
                 'like_user'.$user_id.'_'.$title_alias.'_'.$article_id, 
                 $title_alias.'_'.$article_id 
               );

$self-&gt;render(
template        =&gt; 'voting/vote',
section_ident   =&gt; $title_alias,
id              =&gt; $article_id,
like_id         =&gt; 'like_'.$title_alias.'_'.$article_id,
unlike_id       =&gt; 'unlike_'.$title_alias.'_'.$article_id,
client_id       =&gt; $user_id,
unlike_btn_name =&gt; 'unlike'.$title_alias.'_'.$article_id,
like_btn_name   =&gt; 'like'.$title_alias.'_'.$article_id,
status          =&gt; $status,
liked_cnt       =&gt; $like_count,
unliked_cnt     =&gt; $unlike_count
);
}#---------------

#---------------------------------
sub dislike {
#---------------------------------
my $self = shift;
my($nickname, $status);
eval{
$nickname = $self-&gt;session('client')-&gt;[0];  
};
my $client_check = SessCheck-&gt;client( $self, $nickname );

my $title_alias = $self-&gt;param('title_alias');
my $article_id  = $self-&gt;param('article_id');
my $user_id     = $self-&gt;param('user_id');

$status = !$client_check ? ' disabled' : '';

my $unlike_count = $self-&gt;db-&gt;select( 'posts', 
                                    ['unliked'], 
                                    {id =&gt; $article_id} )
                                    -&gt;hash-&gt;{unliked};
my $like_count = $self-&gt;db-&gt;select( 'posts', 
                                  ['liked'], 
                                  {id =&gt; $article_id} )
                                  -&gt;hash-&gt;{liked};
my $like_cookie_name = 'like_user'.$user_id.'_'.$title_alias.'_'.$article_id;
my $unlike_cookie_name = 'unlike_user'.$user_id.'_'.$title_alias.'_'.$article_id;

if( !$self-&gt;signed_cookie( $unlike_cookie_name ) &amp;&amp; $client_check ){
    ++$unlike_count;
    $self-&gt;db-&gt;update( 'posts', 
                     {'unliked' =&gt; $unlike_count}, 
                     {'id' =&gt; $article_id} );
}

if( $self-&gt;signed_cookie( $like_cookie_name ) ){
    --$like_count;
    $self-&gt;db-&gt;update( 'posts', 
                     {'liked' =&gt; $like_count}, 
                     {'id' =&gt; $article_id} );
    $self-&gt;signed_cookie( $like_cookie_name =&gt; '', {expires =&gt; 1});
}

# Store session for 'dislike' action where key is 
#'unlike_user'.$user_id.'_'.$title_alias.'_'.$article_id
# and value is $title_alias.'_'.$article_id
Session-&gt;voting( $self, 
                 'unlike_user'.$user_id.'_'.$title_alias.'_'.$article_id, 
                 $title_alias.'_'.$article_id );

$self-&gt;render(
template        =&gt; 'voting/vote',
section_ident   =&gt; $title_alias,
id              =&gt; $article_id,
like_id         =&gt; 'like_'.$title_alias.'_'.$article_id,
unlike_id       =&gt; 'unlike_'.$title_alias.'_'.$article_id,
client_id       =&gt; $user_id,
unlike_btn_name =&gt; 'unlike'.$title_alias.'_'.$article_id,
like_btn_name   =&gt; 'like'.$title_alias.'_'.$article_id,
status          =&gt; $status,
unliked_cnt     =&gt; $unlike_count,
liked_cnt       =&gt; $like_count
);
}#---------------
1;

</code></pre>

</div>



<p>Template <strong>voting/vote.html.ep</strong><br>
Use it for both rendering <code>'like'</code> and <code>'dislike'</code> actions<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>%# voting/vote.html.ep

&lt;button type="button" name="&lt;%= $like_btn_name %&gt;" 
onclick="Voting('&lt;%= $section_ident %&gt;', 
                   '&lt;%= $id %&gt;', 
                   '&lt;%= $like_id %&gt;', 
                   '&lt;%= $client_id %&gt;'); 
                   this.disabled='disabled';" 
                   id="chevron_stl"&lt;%= $status %&gt;&gt;
&lt;span id="&lt;%= $section_ident.'_'.$client_id.'-up' %&gt;" 
class="glyphicon glyphicon-chevron-up" aria-hidden="true"&gt;&lt;/span&gt;
&lt;/button&gt;
&lt;span id="&lt;%= $like_id %&gt;" class="like_unlike"&gt;&lt;%= $liked_cnt %&gt;&lt;/span&gt;

&lt;button type="button" name="&lt;%= $unlike_btn_name %&gt;" 
onclick="Voting('&lt;%= $section_ident %&gt;', 
                     '&lt;%= $id %&gt;', 
                     '&lt;%= $unlike_id %&gt;', 
                     '&lt;%= $client_id %&gt;'); 
                     this.disabled='disabled';" 
                     id="chevron_stl"&lt;%= $status %&gt;&gt;
&lt;span id="&lt;%= $section_ident.'_'.$client_id.'-down' %&gt;" 
class="glyphicon glyphicon-chevron-down" aria-hidden="true"&gt;&lt;/span&gt;
&lt;/button&gt;
&lt;span id="&lt;%= $unlike_id %&gt;" class="like_unlike"&gt;&lt;%= $unliked_cnt %&gt;&lt;/span&gt;
</code></pre>

</div>



<h2>
  
  
  Conclusion
</h2>

<p>Use the combination of article ID, user ID, and kind of action (like or dislike) to create a unique voting ID. This voting ID can be a key of signed cookie.</p>

<p>A simplified like/dislike system implemented in my project <strong>MornCat CMS</strong> at <a href="https://github.com/arslonga/my_blog">https://github.com/arslonga/my_blog</a> </p>

       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->
          <div class="card" id="card_33">
            <div class="card-header">
              <h2 class="card-title"><a href="https://blog.perl-academy.de/2022-04-28-auf-dem-weg-zu-perl-536-a-signaturen">Auf dem Weg zu Perl 5.36 – Signaturen</a></h2>
<a href="https://blog.perl-academy.de/" class="badge badge-primary" style="float: left">Perl-Academy.de</a>

              <p class="text-right"><small>Published
 on Thursday 28 April 2022 10:00</small></p>
            </div> <!-- card-header -->
     <div class="card-body">       <div class="card-text">Nicht einmal 1 Monat, dann wird es die nächste Version von Perl 5 geben: Perl 5.36. Um die Wartezeit etwas zu verkürzen, werden wir hier ein paar Neuerungen vorstellen. Der erste Teil hat dann aber etwas zum Thema, das gar nicht mehr so neu ist: (Methoden-)Signaturen. Schon seit Perl 5.20 (also rund acht Jahre) gibt es die Signaturen. Aber jetzt endlich sind sie nicht mehr als "experimentell" gekennzeichnet.       </div><!-- card-text -->     </div>
            <div class="card-footer">
            </div><!-- card-footer -->
          </div><!-- card -->

        </div><!-- col-md-8 -->
        <div class="col-md-2">
<script type="text/javascript"><!--
google_ad_client = "pub-3663319204757145";
/* planet */
google_ad_slot = "8413744374";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
        </div><!-- col-md-2 -->
      </div><!-- row -->
      <footer class="footer">
        <div class="container-fluid">
          <div class="row>
            <div class="col-md-8">
              <address><a href="https://twitter.com/@davorg">@davorg</a> / Thursday 26 May 2022 16:52 UTC</address>
            </div>
          </div>
        </div><!-- container -->
      </footer>
    </div><!-- container -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56332-76"></script>
    <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-56332-76');
    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>
    <script src="/script.js"></script>
  </body>
</html>
